/*
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(x){var w="0.9.3",v={isMsie:function(){var b=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return b?parseInt(b[2],10):!1},isBlankString:function(b){return !b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isArray:x.isArray,isFunction:x.isFunction,isObject:x.isPlainObject,isUndefined:function(b){return"undefined"==typeof b},bind:x.proxy,bindAll:function(a){var f;for(var e in a){x.isFunction(f=a[e])&&(a[e]=x.proxy(f,a))}},indexOf:function(e,d){for(var f=0;f<e.length;f++){if(e[f]===d){return f}}return -1},each:x.each,map:x.map,filter:x.grep,every:function(a,f){var e=!0;return a?(x.each(a,function(b,c){return(e=f.call(null,c,b,a))?void 0:!1}),!!e):e},some:function(a,f){var e=!1;return a?(x.each(a,function(b,c){return(e=f.call(null,c,b,a))?!1:void 0}),!!e):e},mixin:x.extend,getUniqueId:function(){var b=0;return function(){return b++}}(),defer:function(b){setTimeout(b,0)},debounce:function(g,f,j){var i,h;return function(){var d,c,b=this,a=arguments;return d=function(){i=null,j||(h=g.apply(b,a))},c=j&&!i,clearTimeout(i),i=setTimeout(d,f),c&&(h=g.apply(b,a)),h}},throttle:function(j,i){var B,A,z,y,l,k;return l=0,k=function(){l=new Date,z=null,y=j.apply(B,A)},function(){var b=new Date,a=i-(b-l);return B=this,A=arguments,0>=a?(clearTimeout(z),z=null,l=b,y=j.apply(B,A)):z||(z=setTimeout(k,a)),y}},tokenizeQuery:function(a){return x.trim(a).toLowerCase().split(/[\s]+/)},tokenizeText:function(a){return x.trim(a).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},u=function(){var b=/\s+/;return{on:function(a,f){var e;if(!f){return this}for(this._callbacks=this._callbacks||{},a=a.split(b);e=a.shift();){this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(f)}return this},trigger:function(a,j){var i,h;if(!this._callbacks){return this}for(a=a.split(b);i=a.shift();){if(h=this._callbacks[i]){for(var g=0;g<h.length;g+=1){h[g].call(this,{type:i,data:j})}}}return this}}}(),t=function(){function a(d){d&&d.el||x.error("EventBus initialized without el"),this.$el=x(d.el)}var c="typeahead:";return v.mixin(a.prototype,{trigger:function(e){var d=[].slice.call(arguments,1);this.$el.trigger(c+e,d)}}),a}(),s=function(){function i(b){this.prefix=["__",b,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function c(){return(new Date).getTime()}function z(b){return JSON.stringify(v.isUndefined(b)?null:b)}function y(b){return JSON.parse(b)}var l,k;try{l=window.localStorage,l.setItem("~~~","!"),l.removeItem("~~~")}catch(j){l=null}return k=l&&window.JSON?{_prefix:function(b){return this.prefix+b},_ttlKey:function(b){return this._prefix(b)+this.ttlKey},get:function(b){return this.isExpired(b)&&this.remove(b),y(l.getItem(this._prefix(b)))},set:function(b,f,d){return v.isNumber(d)?l.setItem(this._ttlKey(b),z(c()+d)):l.removeItem(this._ttlKey(b)),l.setItem(this._prefix(b),z(f))},remove:function(b){return l.removeItem(this._ttlKey(b)),l.removeItem(this._prefix(b)),this},clear:function(){var f,e,h=[],g=l.length;for(f=0;g>f;f++){(e=l.key(f)).match(this.keyMatcher)&&h.push(e.replace(this.keyMatcher,""))}for(f=h.length;f--;){this.remove(h[f])}return this},isExpired:function(b){var e=y(l.getItem(this._ttlKey(b)));return v.isNumber(e)&&c()>e?!0:!1}}:{get:v.noop,set:v.noop,remove:v.noop,clear:v.noop,isExpired:v.noop},v.mixin(i.prototype,k),i}(),r=function(){function b(c){v.bindAll(this),c=c||{},this.sizeLimit=c.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return v.mixin(b.prototype,{get:function(c){return this.cache[c]},set:function(e,d){var f;this.cachedKeysByAge.length===this.sizeLimit&&(f=this.cachedKeysByAge.shift(),delete this.cache[f]),this.cache[e]=d,this.cachedKeysByAge.push(e)}}),b}(),q=function(){function a(b){v.bindAll(this),b=v.isString(b)?{url:b}:b,l=l||new r,y=v.isNumber(b.maxParallelRequests)?b.maxParallelRequests:y||6,this.url=b.url,this.wildcard=b.wildcard||"%QUERY",this.filter=b.filter,this.replace=b.replace,this.ajaxSettings={type:"get",cache:b.cache,timeout:b.timeout,dataType:b.dataType||"json",beforeSend:b.beforeSend},this._get=(/^throttle$/i.test(b.rateLimitFn)?v.throttle:v.debounce)(this._get,b.rateLimitWait||300)}function B(){g++}function A(){g--}function z(){return y>g}var y,l,g=0,c={};return v.mixin(a.prototype,{_get:function(f,e){function i(d){var b=h.filter?h.filter(d):d;e&&e(b),l.set(f,d)}var h=this;z()?this._sendRequest(f).done(i):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(d){function i(){A(),c[d]=null,h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var h=this,e=c[d];return e||(B(),e=c[d]=x.ajax(d,this.ajaxSettings).always(i)),e},get:function(i,h){var D,C,k=this,j=encodeURIComponent(i||"");return h=h||v.noop,D=this.replace?this.replace(this.url,j):this.url.replace(this.wildcard,j),(C=l.get(D))?v.defer(function(){h(k.filter?k.filter(C):C)}):this._get(D,h),!!C}}),a}(),p=function(){function c(d){v.bindAll(this),v.isString(d.template)&&!d.engine&&x.error("no template engine specified"),d.local||d.prefetch||d.remote||x.error("one of local, prefetch, or remote is required"),this.name=d.name||v.getUniqueId(),this.limit=d.limit||5,this.minLength=d.minLength||1,this.header=d.header,this.footer=d.footer,this.valueKey=d.valueKey||"value",this.template=b(d.template,d.engine,this.valueKey),this.local=d.local,this.prefetch=d.prefetch,this.remote=d.remote,this.itemHash={},this.adjacencyList={},this.storage=d.name?new s(d.name):null}function b(h,g,k){var j,i;return v.isFunction(h)?j=h:v.isString(h)?(i=g.compile(h),j=v.bind(i.render,i)):j=function(d){return"<p>"+d[k]+"</p>"},j}var a={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return v.mixin(c.prototype,{_processLocalData:function(d){this._mergeProcessedData(this._processData(d))},_loadPrefetchData:function(G){function F(i){var d=G.filter?G.filter(i):i,l=y._processData(d),k=l.itemHash,j=l.adjacencyList;y.storage&&(y.storage.set(a.itemHash,k,G.ttl),y.storage.set(a.adjacencyList,j,G.ttl),y.storage.set(a.thumbprint,g,G.ttl),y.storage.set(a.protocol,v.getProtocol(),G.ttl)),y._mergeProcessedData(l)}var E,D,C,B,A,z,y=this,g=w+(G.thumbprint||"");return this.storage&&(E=this.storage.get(a.thumbprint),D=this.storage.get(a.protocol),C=this.storage.get(a.itemHash),B=this.storage.get(a.adjacencyList)),A=E!==g||D!==v.getProtocol(),G=v.isString(G)?{url:G}:G,G.ttl=v.isNumber(G.ttl)?G.ttl:86400000,C&&B&&!A?(this._mergeProcessedData({itemHash:C,adjacencyList:B}),z=x.Deferred().resolve()):z=x.getJSON(G.url).done(F),z},_transformDatum:function(g){var f=v.isString(g)?g:g[this.valueKey],i=g.tokens||v.tokenizeText(f),h={value:f,tokens:i};return v.isString(g)?(h.datum={},h.datum[this.valueKey]=g):h.datum=g,h.tokens=v.filter(h.tokens,function(d){return !v.isBlankString(d)}),h.tokens=v.map(h.tokens,function(d){return d.toLowerCase()}),h},_processData:function(g){var f=this,i={},h={};return v.each(g,function(d,k){var j=f._transformDatum(k),e=v.getUniqueId(j.value);i[e]=j,v.each(j.tokens,function(y,l){var A=l.charAt(0),z=h[A]||(h[A]=[e]);!~v.indexOf(z,e)&&z.push(e)})}),{itemHash:i,adjacencyList:h}},_mergeProcessedData:function(e){var d=this;v.mixin(this.itemHash,e.itemHash),v.each(e.adjacencyList,function(f,h){var g=d.adjacencyList[f];d.adjacencyList[f]=g?g.concat(h):h})},_getLocalSuggestions:function(i){var h,y=this,l=[],k=[],j=[];return v.each(i,function(f,e){var g=e.charAt(0);!~v.indexOf(l,g)&&l.push(g)}),v.each(l,function(d,g){var f=y.adjacencyList[g];return f?(k.push(f),(!h||f.length<h.length)&&(h=f),void 0):!1}),k.length<l.length?[]:(v.each(h,function(d,A){var z,g,f=y.itemHash[A];z=v.every(k,function(e){return ~v.indexOf(e,A)}),g=z&&v.every(i,function(e){return v.some(f.tokens,function(B){return 0===B.indexOf(e)})}),g&&j.push(f)}),j)},initialize:function(){var d;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new q(this.remote):null,d=this.prefetch?this._loadPrefetchData(this.prefetch):x.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return d},d},getSuggestions:function(j,i){function A(d){y=y.slice(0),v.each(d,function(g,f){var B,h=l._transformDatum(f);return B=v.some(y,function(e){return h.value===e.value}),!B&&y.push(h),y.length<l.limit}),i&&i(y)}var z,y,l=this,k=!1;j.length<this.minLength||(z=v.tokenizeQuery(j),y=this._getLocalSuggestions(z).slice(0,this.limit),y.length<this.limit&&this.transport&&(k=this.transport.get(j,A)),!k&&i&&i(y))}}),c}(),o=function(){function a(e){var f=this;v.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=x(e.hint),this.$input=x(e.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),v.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(b){f.specialKeyCodeMap[b.which||b.keyCode]||v.defer(f._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=d(this.$input)}function d(e){return x("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function c(f,e){return f=(f||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),f===e}return v.mixin(a.prototype,u,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(f){var e=this.specialKeyCodeMap[f.which||f.keyCode];e&&this.trigger(e+"Keyed",f)},_compareQueryToInputValue:function(){var f=this.getInputValue(),e=c(this.query,f),g=e?this.query.length!==f.length:!1;g?this.trigger("whitespaceChanged",{value:this.query}):e||this.trigger("queryChanged",{value:this.query=f})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(b){this.query=b},getInputValue:function(){return this.$input.val()},setInputValue:function(f,e){this.$input.val(f),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(b){this.$hint.val(b)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var f,e=this.$input.val().length,g=this.$input[0].selectionStart;return v.isNumber(g)?g===e:document.selection?(f=document.selection.createRange(),f.moveStart("character",-e),e===f.text.length):!0}}),a}(),n=function(){function a(e){v.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=x(e.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function h(b){return b.data("suggestion")}var d={suggestionsList:'<span class="tt-suggestions"></span>'},c={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return v.mixin(a.prototype,u,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(e){var f=x(e.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),f.addClass("tt-is-under-cursor")},_handleSelection:function(e){var f=x(e.currentTarget);this.trigger("suggestionSelected",h(f))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(g){var e,k,j,i;if(this.isVisible()){if(e=this._getSuggestions(),k=e.filter(".tt-is-under-cursor"),k.removeClass("tt-is-under-cursor"),j=e.index(k)+g,j=(j+1)%(e.length+1)-1,-1===j){return this.trigger("cursorRemoved"),void 0}-1>j&&(j=e.length-1),i=e.eq(j).addClass("tt-is-under-cursor"),this._ensureVisibility(i),this.trigger("cursorMoved",h(i))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(g){var f=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),k=this.$menu.scrollTop(),j=g.position().top,i=j+g.outerHeight(!0);0>j?this.$menu.scrollTop(k+j):i>f&&this.$menu.scrollTop(k+(i-f))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(f){var e={left:"0",right:"auto"},g={left:"auto",right:" 0"};"ltr"===f?this.$menu.css(e):this.$menu.css(g)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var b=this._getSuggestions().filter(".tt-is-under-cursor").first();return b.length>0?h(b):null},getFirstSuggestion:function(){var b=this._getSuggestions().first();return b.length>0?h(b):null},renderSuggestions:function(F,E){var D,C,B,A,z,y="tt-dataset-"+F.name,g='<div class="tt-suggestion">%body</div>',f=this.$menu.find("."+y);0===f.length&&(C=x(d.suggestionsList).css(c.suggestionsList),f=x("<div></div>").addClass(y).append(F.header).append(C).append(F.footer).appendTo(this.$menu)),E.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),B=document.createElement("div"),A=document.createDocumentFragment(),v.each(E,function(e,b){b.dataset=F.name,D=F.template(b.datum),B.innerHTML=g.replace("%body",D),z=x(B.firstChild).css(c.suggestion).data("suggestion",b),z.children().each(function(){x(this).css(c.suggestionChild)}),A.appendChild(z[0])}),f.show().find(".tt-suggestions").html(A)):this.clearSuggestions(F.name),this.trigger("suggestionsRendered")},clearSuggestions:function(f){var e=f?this.$menu.find(".tt-dataset-"+f):this.$menu.find('[class^="tt-dataset-"]'),g=e.find(".tt-suggestions");e.hide(),g.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),a}(),m=function(){function a(g){var e,k,h;v.bindAll(this),this.$node=j(g.input),this.datasets=g.datasets,this.dir=null,this.eventBus=g.eventBus,e=this.$node.find(".tt-dropdown-menu"),k=this.$node.find(".tt-query"),h=this.$node.find(".tt-hint"),this.dropdownView=new n({menu:e}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new o({input:k,hint:h}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function j(g){var z=x(d.wrapper),y=x(d.dropdown),l=x(g),k=x(d.hint);z=z.css(c.wrapper),y=y.css(c.dropdown),k.css(c.hint).css({backgroundAttachment:l.css("background-attachment"),backgroundClip:l.css("background-clip"),backgroundColor:l.css("background-color"),backgroundImage:l.css("background-image"),backgroundOrigin:l.css("background-origin"),backgroundPosition:l.css("background-position"),backgroundRepeat:l.css("background-repeat"),backgroundSize:l.css("background-size")}),l.data("ttAttrs",{dir:l.attr("dir"),autocomplete:l.attr("autocomplete"),spellcheck:l.attr("spellcheck"),style:l.attr("style")}),l.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(c.query);try{!l.attr("dir")&&l.attr("dir","auto")}catch(h){}return l.wrap(z).parent().prepend(k).append(y)}function i(f){var e=f.find(".tt-query");v.each(e.data("ttAttrs"),function(b,g){v.isUndefined(g)?e.removeAttr(b):e.attr(b,g)}),e.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(f),f.remove()}var d={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},c={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return v.isMsie()&&v.mixin(c.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),v.isMsie()&&v.isMsie()<=7&&(v.mixin(c.wrapper,{display:"inline",zoom:"1"}),v.mixin(c.query,{marginTop:"-1px"})),v.mixin(a.prototype,u,{_managePreventDefault:function(g){var f,l,k=g.data,h=!1;switch(g.type){case"tabKeyed":f=this.inputView.getHintValue(),l=this.inputView.getInputValue(),h=f&&f!==l;break;case"upKeyed":case"downKeyed":h=!k.shiftKey&&!k.ctrlKey&&!k.metaKey}h&&k.preventDefault()},_setLanguageDirection:function(){var b=this.inputView.getLanguageDirection();b!==this.dir&&(this.dir=b,this.$node.css("direction",b),this.dropdownView.setLanguageDirection(b))},_updateHint:function(){var E,D,C,B,A,z=this.dropdownView.getFirstSuggestion(),y=z?z.value:null,l=this.dropdownView.isVisible(),k=this.inputView.isOverflow();y&&l&&!k&&(E=this.inputView.getInputValue(),D=E.replace(/\s{2,}/g," ").replace(/^\s+/g,""),C=v.escapeRegExChars(D),B=new RegExp("^(?:"+C+")(.*$)","i"),A=B.exec(y),this.inputView.setHintValue(E+(A?A[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(f){var e=f.data;this.inputView.setInputValue(e.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(b){this.dropdownView["blured"===b.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(f){var e=f.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===f.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(f){var e="suggestionSelected"===f.type,g=e?f.data:this.dropdownView.getSuggestionUnderCursor();g&&(this.inputView.setInputValue(g.value),e?this.inputView.focus():f.data.preventDefault(),e&&v.isMsie()?v.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",g.datum,g.dataset))},_getSuggestions:function(){var f=this,e=this.inputView.getQuery();v.isBlankString(e)||v.each(this.datasets,function(g,b){b.getSuggestions(e,function(h){e===f.inputView.getQuery()&&f.dropdownView.renderSuggestions(b,h)})})},_autocomplete:function(h){var g,z,y,l,k;("rightKeyed"!==h.type&&"leftKeyed"!==h.type||(g=this.inputView.isCursorAtEnd(),z="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===h.type:"rightKeyed"===h.type,g&&!z))&&(y=this.inputView.getQuery(),l=this.inputView.getHintValue(),""!==l&&y!==l&&(k=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(k.value),this.eventBus.trigger("autocompleted",k.datum,k.dataset)))},_propagateEvent:function(b){this.eventBus.trigger(b.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),i(this.$node),this.$node=null},setQuery:function(b){this.inputView.setQuery(b),this.inputView.setInputValue(b),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),a}();!function(){var a,e={},c="ttView";a={initialize:function(d){function i(){var h,k=x(this),j=new t({el:k});h=v.map(f,function(b){return b.initialize()}),k.data(c,new m({input:k,eventBus:j=new t({el:k}),datasets:f})),x.when.apply(x,h).always(function(){v.defer(function(){j.trigger("initialized")})})}var f;return d=v.isArray(d)?d:[d],0===d.length&&x.error("no datasets provided"),f=v.map(d,function(h){var g=e[h.name]?e[h.name]:new p(h);return h.name&&(e[h.name]=g),g}),this.each(i)},destroy:function(){function d(){var f=x(this),g=f.data(c);g&&(g.destroy(),f.removeData(c))}return this.each(d)},setQuery:function(d){function f(){var b=x(this).data(c);b&&b.setQuery(d)}return this.each(f)}},jQuery.fn.typeahead=function(b){return a[b]?a[b].apply(this,[].slice.call(arguments,1)):a.initialize.apply(this,arguments)}}()}(window.jQuery);