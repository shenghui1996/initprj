if(!jQuery){throw new Error("Bootstrap requires jQuery")}+function(d){function c(){var f=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var g in e){if(void 0!==f.style[g]){return{end:e[g]}}}}d.fn.emulateTransitionEnd=function(a){var h=!1,g=this;d(this).one(d.support.transition.end,function(){h=!0});var f=function(){h||d(g).trigger(d.support.transition.end)};return setTimeout(f,a),this},d(function(){d.support.transition=c()})}(window.jQuery),+function(f){var e='[data-dismiss="alert"]',h=function(a){f(a).on("click",e,this.close)};h.prototype.close=function(a){function l(){i.trigger("closed.bs.alert").remove()}var k=f(this),j=k.attr("data-target");j||(j=k.attr("href"),j=j&&j.replace(/.*(?=#[^\s]*$)/,""));var i=f(j);a&&a.preventDefault(),i.length||(i=k.hasClass("alert")?k:k.parent()),i.trigger(a=f.Event("close.bs.alert")),a.isDefaultPrevented()||(i.removeClass("in"),f.support.transition&&i.hasClass("fade")?i.one(f.support.transition.end,l).emulateTransitionEnd(150):l())};var g=f.fn.alert;f.fn.alert=function(a){return this.each(function(){var c=f(this),b=c.data("bs.alert");b||c.data("bs.alert",b=new h(this)),"string"==typeof a&&b[a].call(c)})},f.fn.alert.Constructor=h,f.fn.alert.noConflict=function(){return f.fn.alert=g,this},f(document).on("click.bs.alert.data-api",e,h.prototype.close)}(window.jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a)};d.DEFAULTS={loadingText:"loading..."},d.prototype.setState=function(h){var g="disabled",k=this.$element,j=k.is("input")?"val":"html",i=k.data();h+="Text",i.resetText||k.data("resetText",k[j]()),k[j](i[h]||this.options[h]),setTimeout(function(){"loadingText"==h?k.addClass(g).attr(g,g):k.removeClass(g).removeAttr(g)},0)},d.prototype.toggle=function(){var g=this.$element.closest('[data-toggle="buttons"]');if(g.length){var c=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===c.prop("type")&&g.find(".active").removeClass("active")}this.$element.toggleClass("active")};var f=e.fn.button;e.fn.button=function(a){return this.each(function(){var g=e(this),c=g.data("bs.button"),b="object"==typeof a&&a;c||g.data("bs.button",c=new d(this,b)),"toggle"==a?c.toggle():a&&c.setState(a)})},e.fn.button.Constructor=d,e.fn.button.noConflict=function(){return e.fn.button=f,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(a){var g=e(a.target);g.hasClass("btn")||(g=g.closest(".btn")),g.button("toggle"),a.preventDefault()})}(window.jQuery),+function(e){var d=function(a,g){this.$element=e(a),this.$indicators=this.$element.find(".carousel-indicators"),this.options=g,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};d.DEFAULTS={interval:5000,pause:"hover",wrap:!0},d.prototype.cycle=function(a){return a||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},d.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},d.prototype.to=function(a){var h=this,g=this.getActiveIndex();return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid",function(){h.to(a)}):g==a?this.pause().cycle():this.slide(a>g?"next":"prev",e(this.$items[a]))},d.prototype.pause=function(a){return a||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},d.prototype.next=function(){return this.sliding?void 0:this.slide("next")},d.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},d.prototype.slide=function(r,q){var p=this.$element.find(".item.active"),o=q||p[r](),n=this.interval,m="next"==r?"left":"right",l="next"==r?"first":"last",k=this;if(!o.length){if(!this.options.wrap){return}o=this.$element.find(".item")[l]()}this.sliding=!0,n&&this.pause();var a=e.Event("slide.bs.carousel",{relatedTarget:o[0],direction:m});if(!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var c=e(k.$indicators.children()[k.getActiveIndex()]);c&&c.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(a),a.isDefaultPrevented()){return}o.addClass(r),o[0].offsetWidth,p.addClass(m),o.addClass(m),p.one(e.support.transition.end,function(){o.removeClass([r,m].join(" ")).addClass("active"),p.removeClass(["active",m].join(" ")),k.sliding=!1,setTimeout(function(){k.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(a),a.isDefaultPrevented()){return}p.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return n&&this.cycle(),this}};var f=e.fn.carousel;e.fn.carousel=function(a){return this.each(function(){var i=e(this),h=i.data("bs.carousel"),c=e.extend({},d.DEFAULTS,i.data(),"object"==typeof a&&a),b="string"==typeof a?a:c.slide;h||i.data("bs.carousel",h=new d(this,c)),"number"==typeof a?h.to(a):b?h[b]():c.interval&&h.pause().cycle()})},e.fn.carousel.Constructor=d,e.fn.carousel.noConflict=function(){return e.fn.carousel=f,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(a){var l,k=e(this),j=e(k.attr("data-target")||(l=k.attr("href"))&&l.replace(/.*(?=#[^\s]+$)/,"")),i=e.extend({},j.data(),k.data()),h=k.attr("data-slide-to");h&&(i.interval=!1),j.carousel(i),(h=k.attr("data-slide-to"))&&j.data("bs.carousel").to(h),a.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var a=e(this);a.carousel(a.data())})})}(window.jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var b=this.$element.hasClass("width");return b?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var l=this.$parent&&this.$parent.find("> .panel > .in");if(l&&l.length){var k=l.data("bs.collapse");if(k&&k.transitioning){return}l.collapse("hide"),k||l.data("bs.collapse",null)}var j=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[j](0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("in")[j]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition){return i.call(this)}var h=e.camelCase(["scroll",j].join("-"));this.$element.one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350)[j](this.$element[0][h])}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=e.Event("hide.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var h=this.dimension();this.$element[h](this.$element[h]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var g=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?(this.$element[h](0).one(e.support.transition.end,e.proxy(g,this)).emulateTransitionEnd(350),void 0):g.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var f=e.fn.collapse;e.fn.collapse=function(a){return this.each(function(){var g=e(this),c=g.data("bs.collapse"),b=e.extend({},d.DEFAULTS,g.data(),"object"==typeof a&&a);c||g.data("bs.collapse",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.collapse.Constructor=d,e.fn.collapse.noConflict=function(){return e.fn.collapse=f,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(r){var q,p=e(this),o=p.attr("data-target")||r.preventDefault()||(q=p.attr("href"))&&q.replace(/.*(?=#[^\s]+$)/,""),n=e(o),m=n.data("bs.collapse"),l=m?"toggle":p.data(),k=p.attr("data-parent"),a=k&&e(k);m&&m.transitioning||(a&&a.find('[data-toggle=collapse][data-parent="'+k+'"]').not(p).addClass("collapsed"),p[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),n.collapse(l)})}(window.jQuery),+function(i){function h(){i(m).remove(),i(l).each(function(a){var c=n(i(this));c.hasClass("open")&&(c.trigger(a=i.Event("hide.bs.dropdown")),a.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(a){var f=a.attr("data-target");f||(f=a.attr("href"),f=f&&/#/.test(f)&&f.replace(/.*(?=#[^\s]*$)/,""));var e=f&&i(f);return e&&e.length?e:a.parent()}var m=".dropdown-backdrop",l="[data-toggle=dropdown]",k=function(a){i(a).on("click.bs.dropdown",this.toggle)};k.prototype.toggle=function(o){var c=i(this);if(!c.is(".disabled, :disabled")){var b=n(c),a=b.hasClass("open");if(h(),!a){if("ontouchstart" in document.documentElement&&!b.closest(".navbar-nav").length&&i('<div class="dropdown-backdrop"/>').insertAfter(i(this)).on("click",h),b.trigger(o=i.Event("show.bs.dropdown")),o.isDefaultPrevented()){return}b.toggleClass("open").trigger("shown.bs.dropdown"),c.focus()}return !1}},k.prototype.keydown=function(a){if(/(38|40|27)/.test(a.keyCode)){var q=i(this);if(a.preventDefault(),a.stopPropagation(),!q.is(".disabled, :disabled")){var p=n(q),o=p.hasClass("open");if(!o||o&&27==a.keyCode){return 27==a.which&&p.find(l).focus(),q.click()}var e=i("[role=menu] li:not(.divider):visible a",p);if(e.length){var c=e.index(e.filter(":focus"));38==a.keyCode&&c>0&&c--,40==a.keyCode&&c<e.length-1&&c++,~c||(c=0),e.eq(c).focus()}}}};var j=i.fn.dropdown;i.fn.dropdown=function(a){return this.each(function(){var e=i(this),b=e.data("dropdown");b||e.data("dropdown",b=new k(this)),"string"==typeof a&&b[a].call(e)})},i.fn.dropdown.Constructor=k,i.fn.dropdown.noConflict=function(){return i.fn.dropdown=j,this},i(document).on("click.bs.dropdown.data-api",h).on("click.bs.dropdown.data-api",".dropdown form",function(b){b.stopPropagation()}).on("click.bs.dropdown.data-api",l,k.prototype.toggle).on("keydown.bs.dropdown.data-api",l+", [role=menu]",k.prototype.keydown)}(window.jQuery),+function(e){var d=function(a,g){this.options=g,this.$element=e(a),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};d.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},d.prototype.toggle=function(b){return this[this.isShown?"hide":"show"](b)},d.prototype.show=function(a){var h=this,g=e.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(g),this.isShown||g.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var c=e.support.transition&&h.$element.hasClass("fade");h.$element.parent().length||h.$element.appendTo(document.body),h.$element.show(),c&&h.$element[0].offsetWidth,h.$element.addClass("in").attr("aria-hidden",!1),h.enforceFocus();var b=e.Event("shown.bs.modal",{relatedTarget:a});c?h.$element.find(".modal-dialog").one(e.support.transition.end,function(){h.$element.focus().trigger(b)}).emulateTransitionEnd(300):h.$element.focus().trigger(b)}))},d.prototype.hide=function(a){a&&a.preventDefault(),a=e.Event("hide.bs.modal"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},d.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(b){this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.focus()},this))},d.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(b){27==b.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},d.prototype.hideModal=function(){var b=this;this.$element.hide(),this.backdrop(function(){b.removeBackdrop(),b.$element.trigger("hidden.bs.modal")})},d.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},d.prototype.backdrop=function(a){var h=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var g=e.support.transition&&h;if(this.$backdrop=e('<div class="modal-backdrop '+h+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(b){b.target===b.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),g&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!a){return}g?this.$backdrop.one(e.support.transition.end,a).emulateTransitionEnd(150):a()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,a).emulateTransitionEnd(150):a()):a&&a()}};var f=e.fn.modal;e.fn.modal=function(b,a){return this.each(function(){var i=e(this),h=i.data("bs.modal"),c=e.extend({},d.DEFAULTS,i.data(),"object"==typeof b&&b);h||i.data("bs.modal",h=new d(this,c)),"string"==typeof b?h[b](a):c.show&&h.show(a)})},e.fn.modal.Constructor=d,e.fn.modal.noConflict=function(){return e.fn.modal=f,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var j=e(this),i=j.attr("href"),h=e(j.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),g=h.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},h.data(),j.data());a.preventDefault(),h.modal(g,this).one("hide",function(){j.is(":visible")&&j.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(window.jQuery),+function(e){var d=function(g,c){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",g,c)};d.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},d.prototype.init=function(a,p,o){this.enabled=!0,this.type=a,this.$element=e(p),this.options=this.getOptions(o);for(var n=this.options.trigger.split(" "),m=n.length;m--;){var l=n[m];if("click"==l){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else{if("manual"!=l){var k="hover"==l?"mouseenter":"focus",j="hover"==l?"mouseleave":"blur";this.$element.on(k+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(j+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.getOptions=function(a){return a=e.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},d.prototype.getDelegateOptions=function(){var a={},g=this.getDefaults();return this._options&&e.each(this._options,function(b,c){g[b]!=c&&(a[b]=c)}),a},d.prototype.enter=function(a){var g=a instanceof this.constructor?a:e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(g.timeout),g.hoverState="in",g.options.delay&&g.options.delay.show?(g.timeout=setTimeout(function(){"in"==g.hoverState&&g.show()},g.options.delay.show),void 0):g.show()},d.prototype.leave=function(a){var g=a instanceof this.constructor?a:e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(g.timeout),g.hoverState="out",g.options.delay&&g.options.delay.hide?(g.timeout=setTimeout(function(){"out"==g.hoverState&&g.hide()},g.options.delay.hide),void 0):g.hide()},d.prototype.show=function(){var D=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(D),D.isDefaultPrevented()){return}var C=this.tip();this.setContent(),this.options.animation&&C.addClass("fade");var B="function"==typeof this.options.placement?this.options.placement.call(this,C[0],this.$element[0]):this.options.placement,A=/\s?auto?\s?/i,z=A.test(B);z&&(B=B.replace(A,"")||"top"),C.detach().css({top:0,left:0,display:"block"}).addClass(B),this.options.container?C.appendTo(this.options.container):C.insertAfter(this.$element);var y=this.getPosition(),x=C[0].offsetWidth,w=C[0].offsetHeight;if(z){var v=this.$element.parent(),u=B,t=document.documentElement.scrollTop||document.body.scrollTop,s="body"==this.options.container?window.innerWidth:v.outerWidth(),r="body"==this.options.container?window.innerHeight:v.outerHeight(),q="body"==this.options.container?0:v.offset().left;B="bottom"==B&&y.top+y.height+w-t>r?"top":"top"==B&&y.top-t-w<0?"bottom":"right"==B&&y.right+x>s?"left":"left"==B&&y.left-x<q?"right":B,C.removeClass(u).addClass(B)}var a=this.getCalculatedOffset(B,y,x,w);this.applyPlacement(a,B),this.$element.trigger("shown.bs."+this.type)}},d.prototype.applyPlacement=function(v,u){var t,s=this.tip(),r=s[0].offsetWidth,q=s[0].offsetHeight,p=parseInt(s.css("margin-top"),10),o=parseInt(s.css("margin-left"),10);isNaN(p)&&(p=0),isNaN(o)&&(o=0),v.top=v.top+p,v.left=v.left+o,s.offset(v).addClass("in");var n=s[0].offsetWidth,m=s[0].offsetHeight;if("top"==u&&m!=q&&(t=!0,v.top=v.top+q-m),/bottom|top/.test(u)){var l=0;v.left<0&&(l=-2*v.left,v.left=0,s.offset(v),n=s[0].offsetWidth,m=s[0].offsetHeight),this.replaceArrow(l-r+n,n,"left")}else{this.replaceArrow(m-q,m,"top")}t&&s.offset(v)},d.prototype.replaceArrow=function(h,g,i){this.arrow().css(i,h?50*(1-h/g)+"%":"")},d.prototype.setContent=function(){var g=this.tip(),c=this.getTitle();g.find(".tooltip-inner")[this.options.html?"html":"text"](c),g.removeClass("fade in top bottom left right")},d.prototype.hide=function(){function a(){"in"!=i.hoverState&&h.detach()}var i=this,h=this.tip(),g=e.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(h.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?h.one(e.support.transition.end,a).emulateTransitionEnd(150):a(),this.$element.trigger("hidden.bs."+this.type),this)},d.prototype.fixTitle=function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").attr("title","")},d.prototype.hasContent=function(){return this.getTitle()},d.prototype.getPosition=function(){var a=this.$element[0];return e.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},this.$element.offset())},d.prototype.getCalculatedOffset=function(h,g,j,i){return"bottom"==h?{top:g.top+g.height,left:g.left+g.width/2-j/2}:"top"==h?{top:g.top-i,left:g.left+g.width/2-j/2}:"left"==h?{top:g.top+g.height/2-i/2,left:g.left-j}:{top:g.top+g.height/2-i/2,left:g.left+g.width}},d.prototype.getTitle=function(){var h,g=this.$element,i=this.options;return h=g.attr("data-original-title")||("function"==typeof i.title?i.title.call(g[0]):i.title)},d.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},d.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},d.prototype.enable=function(){this.enabled=!0},d.prototype.disable=function(){this.enabled=!1},d.prototype.toggleEnabled=function(){this.enabled=!this.enabled},d.prototype.toggle=function(a){var g=a?e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;g.tip().hasClass("in")?g.leave(g):g.enter(g)},d.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var f=e.fn.tooltip;e.fn.tooltip=function(a){return this.each(function(){var g=e(this),c=g.data("bs.tooltip"),b="object"==typeof a&&a;c||g.data("bs.tooltip",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.tooltip.Constructor=d,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=f,this}}(window.jQuery),+function(e){var d=function(g,c){this.init("popover",g,c)};if(!e.fn.tooltip){throw new Error("Popover requires tooltip.js")}d.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),d.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),d.prototype.constructor=d,d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.setContent=function(){var h=this.tip(),g=this.getTitle(),i=this.getContent();h.find(".popover-title")[this.options.html?"html":"text"](g),h.find(".popover-content")[this.options.html?"html":"text"](i),h.removeClass("fade top bottom left right in"),h.find(".popover-title").html()||h.find(".popover-title").hide()},d.prototype.hasContent=function(){return this.getTitle()||this.getContent()},d.prototype.getContent=function(){var g=this.$element,c=this.options;return g.attr("data-content")||("function"==typeof c.content?c.content.call(g[0]):c.content)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},d.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var f=e.fn.popover;e.fn.popover=function(a){return this.each(function(){var g=e(this),c=g.data("bs.popover"),b="object"==typeof a&&a;c||g.data("bs.popover",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.popover.Constructor=d,e.fn.popover.noConflict=function(){return e.fn.popover=f,this}}(window.jQuery),+function(e){function d(h,g){var b,a=e.proxy(this.process,this);this.$element=e(h).is("body")?e(window):e(h),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",a),this.options=e.extend({},d.DEFAULTS,g),this.selector=(this.options.target||(b=e(h).attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}d.DEFAULTS={offset:10},d.prototype.refresh=function(){var a=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var g=this;this.$body.find(this.selector).map(function(){var h=e(this),c=h.data("target")||h.attr("href"),b=/^#\w/.test(c)&&e(c);return b&&b.length&&[[b[a]().top+(!e.isWindow(g.$scrollElement.get(0))&&g.$scrollElement.scrollTop()),c]]||null}).sort(function(h,c){return h[0]-c[0]}).each(function(){g.offsets.push(this[0]),g.targets.push(this[1])})},d.prototype.process=function(){var i,h=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,m=n-this.$scrollElement.height(),l=this.offsets,k=this.targets,j=this.activeTarget;if(h>=m){return j!=(i=k.last()[0])&&this.activate(i)}for(i=l.length;i--;){j!=k[i]&&h>=l[i]&&(!l[i+1]||h<=l[i+1])&&this.activate(k[i])}},d.prototype.activate=function(a){this.activeTarget=a,e(this.selector).parents(".active").removeClass("active");var h=this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]',g=e(h).parents("li").addClass("active");g.parent(".dropdown-menu").length&&(g=g.closest("li.dropdown").addClass("active")),g.trigger("activate")};var f=e.fn.scrollspy;e.fn.scrollspy=function(a){return this.each(function(){var g=e(this),c=g.data("bs.scrollspy"),b="object"==typeof a&&a;c||g.data("bs.scrollspy",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.scrollspy.Constructor=d,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=f,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var a=e(this);a.scrollspy(a.data())})})}(window.jQuery),+function(e){var d=function(a){this.element=e(a)};d.prototype.show=function(){var a=this.element,l=a.closest("ul:not(.dropdown-menu)"),k=a.attr("data-target");if(k||(k=a.attr("href"),k=k&&k.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var j=l.find(".active:last a")[0],i=e.Event("show.bs.tab",{relatedTarget:j});if(a.trigger(i),!i.isDefaultPrevented()){var h=e(k);this.activate(a.parent("li"),l),this.activate(h,h.parent(),function(){a.trigger({type:"shown.bs.tab",relatedTarget:j})})}}},d.prototype.activate=function(a,l,k){function j(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),a.addClass("active"),h?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active"),k&&k()}var i=l.find("> .active"),h=k&&e.support.transition&&i.hasClass("fade");h?i.one(e.support.transition.end,j).emulateTransitionEnd(150):j(),i.removeClass("in")};var f=e.fn.tab;e.fn.tab=function(a){return this.each(function(){var c=e(this),b=c.data("bs.tab");b||c.data("bs.tab",b=new d(this)),"string"==typeof a&&b[a]()})},e.fn.tab.Constructor=d,e.fn.tab.noConflict=function(){return e.fn.tab=f,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(a){a.preventDefault(),e(this).tab("show")})}(window.jQuery),+function(e){var d=function(b,a){this.options=e.extend({},d.DEFAULTS,a),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(b),this.affixed=this.unpin=null,this.checkPosition()};d.RESET="affix affix-top affix-bottom",d.DEFAULTS={offset:0},d.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},d.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),m=this.$window.scrollTop(),l=this.$element.offset(),k=this.options.offset,j=k.top,b=k.bottom;"object"!=typeof k&&(b=j=k),"function"==typeof j&&(j=k.top()),"function"==typeof b&&(b=k.bottom());var a=null!=this.unpin&&m+this.unpin<=l.top?!1:null!=b&&l.top+this.$element.height()>=n-b?"bottom":null!=j&&j>=m?"top":!1;this.affixed!==a&&(this.unpin&&this.$element.css("top",""),this.affixed=a,this.unpin="bottom"==a?l.top-m:null,this.$element.removeClass(d.RESET).addClass("affix"+(a?"-"+a:"")),"bottom"==a&&this.$element.offset({top:document.body.offsetHeight-b-this.$element.height()}))}};var f=e.fn.affix;e.fn.affix=function(a){return this.each(function(){var g=e(this),c=g.data("bs.affix"),b="object"==typeof a&&a;c||g.data("bs.affix",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.affix.Constructor=d,e.fn.affix.noConflict=function(){return e.fn.affix=f,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var a=e(this),g=a.data();g.offset=g.offset||{},g.offsetBottom&&(g.offset.bottom=g.offsetBottom),g.offsetTop&&(g.offset.top=g.offsetTop),a.affix(g)})})}(window.jQuery);
(function(e,d,b,h){var a="ripples";var c=null;var f={};function g(j,i){c=this;this.element=e(j);this.options=e.extend({},f,i);this._defaults=f;this._name=a;this.init()}g.prototype.init=function(){var i=this.element;i.on("mousedown touchstart",function(k){if(c.isTouch()&&k.type==="mousedown"){return}if(!(i.find(".ripple-wrapper").length)){i.append('<div class="ripple-wrapper"></div>')}var m=i.children(".ripple-wrapper");var l=c.getRelY(m,k);var n=c.getRelX(m,k);if(!l&&!n){return}var o=c.getRipplesColor(i);var j=e("<div></div>");j.addClass("ripple").css({left:n,top:l,"background-color":o});m.append(j);(function(){return d.getComputedStyle(j[0]).opacity})();c.rippleOn(i,j);setTimeout(function(){c.rippleEnd(j)},500);i.on("mouseup mouseleave touchend",function(){j.data("mousedown","off");if(j.data("animating")==="off"){c.rippleOut(j)}})})};g.prototype.getNewSize=function(i,j){return(Math.max(i.outerWidth(),i.outerHeight())/j.outerWidth())*2.5};g.prototype.getRelX=function(j,i){var k=j.offset();if(!c.isTouch()){return i.pageX-k.left}else{i=i.originalEvent;if(i.touches.length===1){return i.touches[0].pageX-k.left}return false}};g.prototype.getRelY=function(j,i){var k=j.offset();if(!c.isTouch()){return i.pageY-k.top}else{i=i.originalEvent;if(i.touches.length===1){return i.touches[0].pageY-k.top}return false}};g.prototype.getRipplesColor=function(i){var j=i.data("ripple-color")?i.data("ripple-color"):d.getComputedStyle(i[0]).color;return j};g.prototype.hasTransitionSupport=function(){var j=b.body||b.documentElement;var k=j.style;var i=(k.transition!==h||k.WebkitTransition!==h||k.MozTransition!==h||k.MsTransition!==h||k.OTransition!==h);return i};g.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};g.prototype.rippleEnd=function(i){i.data("animating","off");if(i.data("mousedown")==="off"){c.rippleOut(i)}};g.prototype.rippleOut=function(i){i.off();if(c.hasTransitionSupport()){i.addClass("ripple-out")}else{i.animate({opacity:0},100,function(){i.trigger("transitionend")})}i.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){i.remove()})};g.prototype.rippleOn=function(i,k){var j=c.getNewSize(i,k);if(c.hasTransitionSupport()){k.css({"-ms-transform":"scale("+j+")","-moz-transform":"scale("+j+")","-webkit-transform":"scale("+j+")",transform:"scale("+j+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on")}else{k.animate({width:Math.max(i.outerWidth(),i.outerHeight())*2,height:Math.max(i.outerWidth(),i.outerHeight())*2,"margin-left":Math.max(i.outerWidth(),i.outerHeight())*(-1),"margin-top":Math.max(i.outerWidth(),i.outerHeight())*(-1),opacity:0.2},500,function(){k.trigger("transitionend")})}};e.fn.ripples=function(i){return this.each(function(){if(!e.data(this,"plugin_"+a)){e.data(this,"plugin_"+a,new g(this,i))}})}})(jQuery,window,document);
(function(a){a.expr[":"].notmdproc=function(c){if(a(c).data("mdproc")){return false}else{return true}};function b(c){if(typeof c.which=="undefined"){return true}else{if(typeof c.which=="number"&&c.which>0){return !c.ctrlKey&&!c.metaKey&&!c.altKey&&c.which!=8&&c.which!=9}}return false}a.material={options:{input:true,ripples:true,checkbox:true,togglebutton:true,radio:true,arrive:true,autofill:false,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple",".pagination li:not(.active):not(.disabled) a:not(.withoutripple)"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(c){a((c)?c:this.options.checkboxElements).filter(":notmdproc").data("mdproc",true).after("<span class=checkbox-material><span class=check></span></span>")},togglebutton:function(c){a((c)?c:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",true).after("<span class=toggle></span>")},radio:function(c){a((c)?c:this.options.radioElements).filter(":notmdproc").data("mdproc",true).after("<span class=circle></span><span class=check></span>")},input:function(c){a((c)?c:this.options.inputElements).filter(":notmdproc").data("mdproc",true).each(function(){var d=a(this);if(!d.attr("data-hint")&&!d.hasClass("floating-label")){return}d.wrap("<div class=form-control-wrapper></div>");d.after("<span class=material-input></span>");if(d.hasClass("floating-label")){var e=d.attr("placeholder");d.attr("placeholder",null).removeClass("floating-label");d.after("<div class=floating-label>"+e+"</div>")}if(d.attr("data-hint")){d.after("<div class=hint>"+d.attr("data-hint")+"</div>")}if(d.val()===null||d.val()=="undefined"||d.val()===""){d.addClass("empty")}if(d.parent().next().is("[type=file]")){d.parent().addClass("fileinput");var f=d.parent().next().detach();d.after(f)}})},attachInputEventHandlers:function(){a(document).on("change",".checkbox input[type=checkbox]",function(){a(this).blur()}).on("keydown paste",".form-control",function(c){if(b(c)){a(this).removeClass("empty")}}).on("keyup change",".form-control",function(){var c=a(this);if(c.val()===""&&(typeof c[0].checkValidity==="undefined"||c[0].checkValidity())){c.addClass("empty")}else{c.removeClass("empty")}}).on("focus",".form-control-wrapper.fileinput",function(){a(this).find("input").addClass("focus")}).on("blur",".form-control-wrapper.fileinput",function(){a(this).find("input").removeClass("focus")}).on("change",".form-control-wrapper.fileinput [type=file]",function(){var d=a(this);var c="";a.each(this.files,function(f,e){c+=e.name+", "});c=c.substring(0,c.length-2);if(c){d.prev().removeClass("empty")}else{d.prev().addClass("empty")}d.prev().val(c)})},ripples:function(c){a((c)?c:this.options.withRipples).ripples()},autofill:function(){var c=setInterval(function(){a("input[type!=checkbox]").each(function(){var d=a(this);if(d.val()&&d.val()!==d.attr("value")){d.trigger("change")}})},100);setTimeout(function(){clearInterval(c)},10000)},attachAutofillEventHandlers:function(){var c;a(document).on("focus","input",function(){var d=a(this).parents("form").find("input").not("[type=file]");c=setInterval(function(){d.each(function(){var e=a(this);if(e.val()!==e.attr("value")){e.trigger("change")}})},100)}).on("blur","input",function(){clearInterval(c)})},init:function(){var c=a(document);if(a.fn.ripples&&this.options.ripples){this.ripples()}if(this.options.input){this.input();this.attachInputEventHandlers()}if(this.options.checkbox){this.checkbox()}if(this.options.togglebutton){this.togglebutton()}if(this.options.radio){this.radio()}if(this.options.autofill){this.autofill();this.attachAutofillEventHandlers()}if(document.arrive&&this.options.arrive){if(a.fn.ripples&&this.options.ripples){c.arrive(this.options.withRipples,function(){a.material.ripples(a(this))})}if(this.options.input){c.arrive(this.options.inputElements,function(){a.material.input(a(this))})}if(this.options.checkbox){c.arrive(this.options.checkboxElements,function(){a.material.checkbox(a(this))})}if(this.options.radio){c.arrive(this.options.radioElements,function(){a.material.radio(a(this))})}if(this.options.togglebutton){c.arrive(this.options.togglebuttonElements,function(){a.material.togglebutton(a(this))})}}}}})(jQuery);
var Handlebars=(function(){var a=(function(){var m;function n(o){this.string=o}n.prototype.toString=function(){return""+this.string};m=n;return m})();var k=(function(v){var w={};var p=v;var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var m=/[&<>"'`]/g;var q=/[&<>"'`]/;function y(z){return x[z]||"&amp;"}function u(B,A){for(var z in A){if(Object.prototype.hasOwnProperty.call(A,z)){B[z]=A[z]}}}w.extend=u;var o=Object.prototype.toString;w.toString=o;var n=function(z){return typeof z==="function"};if(n(/x/)){n=function(z){return typeof z==="function"&&o.call(z)==="[object Function]"}}var n;w.isFunction=n;var t=Array.isArray||function(z){return(z&&typeof z==="object")?o.call(z)==="[object Array]":false};w.isArray=t;function s(z){if(z instanceof p){return z.toString()}else{if(!z&&z!==0){return""}}z=""+z;if(!q.test(z)){return z}return z.replace(m,y)}w.escapeExpression=s;function r(z){if(!z&&z!==0){return true}else{if(t(z)&&z.length===0){return true}else{return false}}}w.isEmpty=r;return w})(a);var d=(function(){var n;var o=["description","fileName","lineNumber","message","name","number","stack"];function m(t,s){var q;if(s&&s.firstLine){q=s.firstLine;t+=" - "+q+":"+s.firstColumn}var r=Error.prototype.constructor.call(this,t);for(var p=0;p<o.length;p++){this[o[p]]=r[o[p]]}if(q){this.lineNumber=q;this.column=s.firstColumn}}m.prototype=new Error();n=m;return n})();var i=(function(x,A){var z={};var v=x;var t=A;var C="1.3.0";z.VERSION=C;var n=4;z.COMPILER_REVISION=n;var q={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};z.REVISION_CHANGES=q;var u=v.isArray,p=v.isFunction,o=v.toString,m="[object Object]";function s(E,D){this.helpers=E||{};this.partials=D||{};w(this)}z.HandlebarsEnvironment=s;s.prototype={constructor:s,logger:y,log:r,registerHelper:function(E,F,D){if(o.call(E)===m){if(D||F){throw new t("Arg not supported with multiple helpers")}v.extend(this.helpers,E)}else{if(D){F.not=D}this.helpers[E]=F}},registerPartial:function(D,E){if(o.call(D)===m){v.extend(this.partials,D)}else{this.partials[D]=E}}};function w(D){D.registerHelper("helperMissing",function(E){if(arguments.length===2){return undefined}else{throw new t("Missing helper: '"+E+"'")}});D.registerHelper("blockHelperMissing",function(G,F){var E=F.inverse||function(){},H=F.fn;if(p(G)){G=G.call(this)}if(G===true){return H(this)}else{if(G===false||G==null){return E(this)}else{if(u(G)){if(G.length>0){return D.helpers.each(G,F)}else{return E(this)}}else{return H(G)}}}});D.registerHelper("each",function(E,M){var K=M.fn,G=M.inverse;var I=0,J="",H;if(p(E)){E=E.call(this)}if(M.data){H=B(M.data)}if(E&&typeof E==="object"){if(u(E)){for(var F=E.length;I<F;I++){if(H){H.index=I;H.first=(I===0);H.last=(I===(E.length-1))}J=J+K(E[I],{data:H})}}else{for(var L in E){if(E.hasOwnProperty(L)){if(H){H.key=L;H.index=I;H.first=(I===0)}J=J+K(E[L],{data:H});I++}}}}if(I===0){J=G(this)}return J});D.registerHelper("if",function(F,E){if(p(F)){F=F.call(this)}if((!E.hash.includeZero&&!F)||v.isEmpty(F)){return E.inverse(this)}else{return E.fn(this)}});D.registerHelper("unless",function(F,E){return D.helpers["if"].call(this,F,{fn:E.inverse,inverse:E.fn,hash:E.hash})});D.registerHelper("with",function(F,E){if(p(F)){F=F.call(this)}if(!v.isEmpty(F)){return E.fn(F)}});D.registerHelper("log",function(F,E){var G=E.data&&E.data.level!=null?parseInt(E.data.level,10):1;D.log(G,F)})}var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(F,D){if(y.level<=F){var E=y.methodMap[F];if(typeof console!=="undefined"&&console[E]){console[E].call(console,D)}}}};z.logger=y;function r(E,D){y.log(E,D)}z.log=r;var B=function(D){var E={};v.extend(E,D);return E};z.createFrame=B;return z})(k,d);var g=(function(v,z,p){var x={};var u=v;var s=z;var o=p.COMPILER_REVISION;var r=p.REVISION_CHANGES;function n(C){var B=C&&C[0]||1,E=o;if(B!==E){if(B<E){var A=r[E],D=r[B];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+A+") or downgrade your runtime to an older version ("+D+").")}else{throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+C[1]+").")}}}x.checkRevision=n;function w(A,D){if(!D){throw new s("No environment passed to template")}var C=function(F,H,J,K,I,L){var E=D.VM.invokePartial.apply(this,arguments);if(E!=null){return E}if(D.compile){var G={helpers:K,partials:I,data:L};I[H]=D.compile(F,{data:L!==undefined},D);return I[H](J,G)}else{throw new s("The partial "+H+" could not be compiled when running in runtime-only mode")}};var B={escapeExpression:u.escapeExpression,invokePartial:C,programs:[],program:function(F,G,H){var E=this.programs[F];if(H){E=t(F,G,H)}else{if(!E){E=this.programs[F]=t(F,G)}}return E},merge:function(G,F){var E=G||F;if(G&&F&&(G!==F)){E={};u.extend(E,F);u.extend(E,G)}return E},programWithDepth:D.VM.programWithDepth,noop:D.VM.noop,compilerInfo:null};return function(H,F){F=F||{};var I=F.partial?F:D,J,G;if(!F.partial){J=F.helpers;G=F.partials}var E=A.call(B,I,H,J,G,F.data);if(!F.partial){D.VM.checkRevision(B.compilerInfo)}return E}}x.template=w;function q(B,C,D){var A=Array.prototype.slice.call(arguments,3);var E=function(G,F){F=F||{};return C.apply(this,[G,F.data||D].concat(A))};E.program=B;E.depth=A.length;return E}x.programWithDepth=q;function t(A,B,C){var D=function(F,E){E=E||{};return B(F,E.data||C)};D.program=A;D.depth=0;return D}x.program=t;function m(A,C,E,F,D,G){var B={partial:true,helpers:F,partials:D,data:G};if(A===undefined){throw new s("The partial "+C+" could not be found")}else{if(A instanceof Function){return A(E,B)}}}x.invokePartial=m;function y(){return""}x.noop=y;return x})(k,d,i);var f=(function(w,y,o,s,v){var x;var m=w;var p=y;var r=o;var u=s;var q=v;var t=function(){var z=new m.HandlebarsEnvironment();u.extend(z,m);z.SafeString=p;z.Exception=r;z.Utils=u;z.VM=q;z.template=function(A){return q.template(A,z)};return z};var n=t();n.create=t;x=n;return x})(i,a,d,k,g);var j=(function(q){var o;var n=q;function m(r){r=r||{};this.firstLine=r.first_line;this.firstColumn=r.first_column;this.lastColumn=r.last_column;this.lastLine=r.last_line}var p={ProgramNode:function(t,v,s,u){var r,w;if(arguments.length===3){u=s;s=null}else{if(arguments.length===2){u=v;v=null}}m.call(this,u);this.type="program";this.statements=t;this.strip={};if(s){w=s[0];if(w){r={first_line:w.firstLine,last_line:w.lastLine,last_column:w.lastColumn,first_column:w.firstColumn};this.inverse=new p.ProgramNode(s,v,r)}else{this.inverse=new p.ProgramNode(s,v)}this.strip.right=v.left}else{if(v){this.strip.left=v.right}}},MustacheNode:function(w,v,r,t,s){m.call(this,s);this.type="mustache";this.strip=t;if(r!=null&&r.charAt){var u=r.charAt(3)||r.charAt(2);this.escaped=u!=="{"&&u!=="&"}else{this.escaped=!!r}if(w instanceof p.SexprNode){this.sexpr=w}else{this.sexpr=new p.SexprNode(w,v)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(w,t,r){m.call(this,r);this.type="sexpr";this.hash=t;var v=this.id=w[0];var u=this.params=w.slice(1);var s=this.eligibleHelper=v.isSimple;this.isHelper=s&&(u.length||t)},PartialNode:function(r,t,u,s){m.call(this,s);this.type="partial";this.partialName=r;this.context=t;this.strip=u},BlockNode:function(u,s,r,v,t){m.call(this,t);if(u.sexpr.id.original!==v.path.original){throw new n(u.sexpr.id.original+" doesn't match "+v.path.original,this)}this.type="block";this.mustache=u;this.program=s;this.inverse=r;this.strip={left:u.strip.left,right:v.strip.right};(s||r).strip.left=u.strip.right;(r||s).strip.right=v.strip.left;if(r&&!s){this.isInverse=true}},ContentNode:function(r,s){m.call(this,s);this.type="content";this.string=r},HashNode:function(s,r){m.call(this,r);this.type="hash";this.pairs=s},IdNode:function(x,w){m.call(this,w);this.type="ID";var v="",t=[],y=0;for(var u=0,r=x.length;u<r;u++){var s=x[u].part;v+=(x[u].separator||"")+s;if(s===".."||s==="."||s==="this"){if(t.length>0){throw new n("Invalid path: "+v,this)}else{if(s===".."){y++}else{this.isScoped=true}}}else{t.push(s)}}this.original=v;this.parts=t;this.string=t.join(".");this.depth=y;this.isSimple=x.length===1&&!this.isScoped&&y===0;this.stringModeValue=this.string},PartialNameNode:function(r,s){m.call(this,s);this.type="PARTIAL_NAME";this.name=r.original},DataNode:function(s,r){m.call(this,r);this.type="DATA";this.id=s},StringNode:function(r,s){m.call(this,s);this.type="STRING";this.original=this.string=this.stringModeValue=r},IntegerNode:function(r,s){m.call(this,s);this.type="INTEGER";this.original=this.integer=r;this.stringModeValue=Number(r)},BooleanNode:function(r,s){m.call(this,s);this.type="BOOLEAN";this.bool=r;this.stringModeValue=r==="true"},CommentNode:function(s,r){m.call(this,r);this.type="comment";this.comment=s}};o=p;return o})(d);var b=(function(){var n;var m=(function(){var v={trace:function r(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function q(w,z,A,D,C,y,B){var x=y.length-1;switch(C){case 1:return new D.ProgramNode(y[x-1],this._$);break;case 2:return new D.ProgramNode([],this._$);break;case 3:this.$=new D.ProgramNode([],y[x-1],y[x],this._$);break;case 4:this.$=new D.ProgramNode(y[x-2],y[x-1],y[x],this._$);break;case 5:this.$=new D.ProgramNode(y[x-1],y[x],[],this._$);break;case 6:this.$=new D.ProgramNode(y[x],this._$);break;case 7:this.$=new D.ProgramNode([],this._$);break;case 8:this.$=new D.ProgramNode([],this._$);break;case 9:this.$=[y[x]];break;case 10:y[x-1].push(y[x]);this.$=y[x-1];break;case 11:this.$=new D.BlockNode(y[x-2],y[x-1].inverse,y[x-1],y[x],this._$);break;case 12:this.$=new D.BlockNode(y[x-2],y[x-1],y[x-1].inverse,y[x],this._$);break;case 13:this.$=y[x];break;case 14:this.$=y[x];break;case 15:this.$=new D.ContentNode(y[x],this._$);break;case 16:this.$=new D.CommentNode(y[x],this._$);break;case 17:this.$=new D.MustacheNode(y[x-1],null,y[x-2],o(y[x-2],y[x]),this._$);break;case 18:this.$=new D.MustacheNode(y[x-1],null,y[x-2],o(y[x-2],y[x]),this._$);break;case 19:this.$={path:y[x-1],strip:o(y[x-2],y[x])};break;case 20:this.$=new D.MustacheNode(y[x-1],null,y[x-2],o(y[x-2],y[x]),this._$);break;case 21:this.$=new D.MustacheNode(y[x-1],null,y[x-2],o(y[x-2],y[x]),this._$);break;case 22:this.$=new D.PartialNode(y[x-2],y[x-1],o(y[x-3],y[x]),this._$);break;case 23:this.$=o(y[x-1],y[x]);break;case 24:this.$=new D.SexprNode([y[x-2]].concat(y[x-1]),y[x],this._$);break;case 25:this.$=new D.SexprNode([y[x]],null,this._$);break;case 26:this.$=y[x];break;case 27:this.$=new D.StringNode(y[x],this._$);break;case 28:this.$=new D.IntegerNode(y[x],this._$);break;case 29:this.$=new D.BooleanNode(y[x],this._$);break;case 30:this.$=y[x];break;case 31:y[x-1].isHelper=true;this.$=y[x-1];break;case 32:this.$=new D.HashNode(y[x],this._$);break;case 33:this.$=[y[x-2],y[x]];break;case 34:this.$=new D.PartialNameNode(y[x],this._$);break;case 35:this.$=new D.PartialNameNode(new D.StringNode(y[x],this._$),this._$);break;case 36:this.$=new D.PartialNameNode(new D.IntegerNode(y[x],this._$));break;case 37:this.$=new D.DataNode(y[x],this._$);break;case 38:this.$=new D.IdNode(y[x],this._$);break;case 39:y[x-2].push({part:y[x],separator:y[x-1]});this.$=y[x-2];break;case 40:this.$=[{part:y[x]}];break;case 43:this.$=[];break;case 44:y[x-1].push(y[x]);break;case 47:this.$=[y[x]];break;case 48:y[x-1].push(y[x]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function s(x,w){throw new Error(x)},parse:function u(F){var M=this,C=[0],V=[null],H=[],W=this.table,x="",G=0,T=0,z=0,E=2,J=1;this.lexer.setInput(F);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var y=this.lexer.yylloc;H.push(y);var A=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function L(Y){C.length=C.length-2*Y;V.length=V.length-Y;H.length=H.length-Y}function K(){var Y;Y=M.lexer.lex()||1;if(typeof Y!=="number"){Y=M.symbols_[Y]||Y}return Y}var S,O,B,R,X,I,Q={},N,U,w,D;while(true){B=C[C.length-1];if(this.defaultActions[B]){R=this.defaultActions[B]}else{if(S===null||typeof S=="undefined"){S=K()}R=W[B]&&W[B][S]}if(typeof R==="undefined"||!R.length||!R[0]){var P="";if(!z){D=[];for(N in W[B]){if(this.terminals_[N]&&N>2){D.push("'"+this.terminals_[N]+"'")}}if(this.lexer.showPosition){P="Parse error on line "+(G+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+D.join(", ")+", got '"+(this.terminals_[S]||S)+"'"}else{P="Parse error on line "+(G+1)+": Unexpected "+(S==1?"end of input":"'"+(this.terminals_[S]||S)+"'")}this.parseError(P,{text:this.lexer.match,token:this.terminals_[S]||S,line:this.lexer.yylineno,loc:y,expected:D})}}if(R[0] instanceof Array&&R.length>1){throw new Error("Parse Error: multiple actions possible at state: "+B+", token: "+S)}switch(R[0]){case 1:C.push(S);V.push(this.lexer.yytext);H.push(this.lexer.yylloc);C.push(R[1]);S=null;if(!O){T=this.lexer.yyleng;x=this.lexer.yytext;G=this.lexer.yylineno;y=this.lexer.yylloc;if(z>0){z--}}else{S=O;O=null}break;case 2:U=this.productions_[R[1]][1];Q.$=V[V.length-U];Q._$={first_line:H[H.length-(U||1)].first_line,last_line:H[H.length-1].last_line,first_column:H[H.length-(U||1)].first_column,last_column:H[H.length-1].last_column};if(A){Q._$.range=[H[H.length-(U||1)].range[0],H[H.length-1].range[1]]}I=this.performAction.call(Q,x,T,G,this.yy,R[1],V,H);if(typeof I!=="undefined"){return I}if(U){C=C.slice(0,-1*U*2);V=V.slice(0,-1*U);H=H.slice(0,-1*U)}C.push(this.productions_[R[1]][0]);V.push(Q.$);H.push(Q._$);w=W[C[C.length-2]][C[C.length-1]];C.push(w);break;case 3:return true}}return true}};function o(w,x){return{left:w.charAt(2)==="~",right:x.charAt(0)==="~"||x.charAt(1)==="~"}}var p=(function(){var z=({EOF:1,parseError:function B(E,D){if(this.yy.parser){this.yy.parser.parseError(E,D)}else{throw new Error(E)}},setInput:function(D){this._input=D;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var E=this._input[0];this.yytext+=E;this.yyleng++;this.offset++;this.match+=E;this.matched+=E;var D=E.match(/(?:\r\n?|\n).*/g);if(D){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return E},unput:function(F){var D=F.length;var E=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-D-1);this.offset-=D;var H=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(E.length-1){this.yylineno-=E.length-1}var G=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:E?(E.length===H.length?this.yylloc.first_column:0)+H[H.length-E.length].length-E[0].length:this.yylloc.first_column-D};if(this.options.ranges){this.yylloc.range=[G[0],G[0]+this.yyleng-D]}return this},more:function(){this._more=true;return this},less:function(D){this.unput(this.match.slice(D))},pastInput:function(){var D=this.matched.substr(0,this.matched.length-this.match.length);return(D.length>20?"...":"")+D.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var D=this.match;if(D.length<20){D+=this._input.substr(0,20-D.length)}return(D.substr(0,20)+(D.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var D=this.pastInput();var E=new Array(D.length+1).join("-");return D+this.upcomingInput()+"\n"+E+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var J,H,E,G,F,D;if(!this._more){this.yytext="";this.match=""}var K=this._currentRules();for(var I=0;I<K.length;I++){E=this._input.match(this.rules[K[I]]);if(E&&(!H||E[0].length>H[0].length)){H=E;G=I;if(!this.options.flex){break}}}if(H){D=H[0].match(/(?:\r\n?|\n).*/g);if(D){this.yylineno+=D.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length};this.yytext+=H[0];this.match+=H[0];this.matches=H;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(H[0].length);this.matched+=H[0];J=this.performAction.call(this,this.yy,this,K[G],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(J){return J}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function w(){var D=this.next();if(typeof D!=="undefined"){return D}else{return this.lex()}},begin:function x(D){this.conditionStack.push(D)},popState:function C(){return this.conditionStack.pop()},_currentRules:function A(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function x(D){this.begin(D)}});z.options={};z.performAction=function y(I,E,H,D){function F(K,J){return E.yytext=E.yytext.substr(K,E.yyleng-J)}var G=D;switch(H){case 0:if(E.yytext.slice(-2)==="\\\\"){F(0,1);this.begin("mu")}else{if(E.yytext.slice(-1)==="\\"){F(0,1);this.begin("emu")}else{this.begin("mu")}}if(E.yytext){return 14}break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:F(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:F(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:E.yytext=F(1,2).replace(/\\"/g,'"');return 32;break;case 24:E.yytext=F(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:E.yytext=F(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};z.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];z.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return z})();v.lexer=p;function t(){this.yy={}}t.prototype=v;v.Parser=t;return new t})();n=m;return n})();var l=(function(q,m){var n={};var r=q;var o=m;n.parser=r;function p(s){if(s.constructor===o.ProgramNode){return s}r.yy=o;return r.parse(s)}n.parse=p;return n})(b,j);var e=(function(r){var q={};var m=r;function o(){}q.Compiler=o;o.prototype={compiler:o,disassemble:function(){var x=this.opcodes,w,u=[],z,y;for(var v=0,s=x.length;v<s;v++){w=x[v];if(w.opcode==="DECLARE"){u.push("DECLARE "+w.name+"="+w.value)}else{z=[];for(var t=0;t<w.args.length;t++){y=w.args[t];if(typeof y==="string"){y='"'+y.replace("\n","\\n")+'"'}z.push(y)}u.push(w.opcode+" "+z.join(" "))}}return u.join("\n")},equals:function(t){var s=this.opcodes.length;if(t.opcodes.length!==s){return false}for(var w=0;w<s;w++){var x=this.opcodes[w],u=t.opcodes[w];if(x.opcode!==u.opcode||x.args.length!==u.args.length){return false}for(var v=0;v<x.args.length;v++){if(x.args[v]!==u.args[v]){return false}}}s=this.children.length;if(t.children.length!==s){return false}for(w=0;w<s;w++){if(!this.children[w].equals(t.children[w])){return false}}return true},guid:0,compile:function(s,u){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=u;var v=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(v){for(var t in v){this.options.knownHelpers[t]=v[t]}}return this.accept(s)},accept:function(u){var t=u.strip||{},s;if(t.left){this.opcode("strip")}s=this[u.type](u);if(t.right){this.opcode("strip")}return s},program:function(u){var t=u.statements;for(var v=0,s=t.length;v<s;v++){this.accept(t[v])}this.isSimple=s===1;this.depths.list=this.depths.list.sort(function(x,w){return x-w});return this},compileProgram:function(u){var s=new this.compiler().compile(u,this.options);var v=this.guid++,x;this.usePartial=this.usePartial||s.usePartial;this.children[v]=s;for(var w=0,t=s.depths.list.length;w<t;w++){x=s.depths.list[w];if(x<2){continue}else{this.addDepth(x-1)}}return v},block:function(x){var w=x.mustache,t=x.program,s=x.inverse;if(t){t=this.compileProgram(t)}if(s){s=this.compileProgram(s)}var v=w.sexpr;var u=this.classifySexpr(v);if(u==="helper"){this.helperSexpr(v,t,s)}else{if(u==="simple"){this.simpleSexpr(v);this.opcode("pushProgram",t);this.opcode("pushProgram",s);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(v,t,s);this.opcode("pushProgram",t);this.opcode("pushProgram",s);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(v){var u=v.pairs,x,w;this.opcode("pushHash");for(var t=0,s=u.length;t<s;t++){x=u[t];w=x[1];if(this.options.stringParams){if(w.depth){this.addDepth(w.depth)}this.opcode("getContext",w.depth||0);this.opcode("pushStringParam",w.stringModeValue,w.type);if(w.type==="sexpr"){this.sexpr(w)}}else{this.accept(w)}this.opcode("assignToHash",x[0])}this.opcode("popHash")},partial:function(s){var t=s.partialName;this.usePartial=true;if(s.context){this.ID(s.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",t.name);this.opcode("append")},content:function(s){this.opcode("appendContent",s.string)},mustache:function(s){this.sexpr(s.sexpr);if(s.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(w,u,t){var x=w.id,v=x.parts[0],s=u!=null||t!=null;this.opcode("getContext",x.depth);this.opcode("pushProgram",u);this.opcode("pushProgram",t);this.opcode("invokeAmbiguous",v,s)},simpleSexpr:function(s){var t=s.id;if(t.type==="DATA"){this.DATA(t)}else{if(t.parts.length){this.ID(t)}else{this.addDepth(t.depth);this.opcode("getContext",t.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperSexpr:function(v,t,s){var w=this.setupFullMustacheParams(v,t,s),u=v.id.parts[0];if(this.options.knownHelpers[u]){this.opcode("invokeKnownHelper",w.length,u)}else{if(this.options.knownHelpersOnly){throw new m("You specified knownHelpersOnly, but used the unknown helper "+u,v)}else{this.opcode("invokeHelper",w.length,u,v.isRoot)}}},sexpr:function(t){var s=this.classifySexpr(t);if(s==="simple"){this.simpleSexpr(t)}else{if(s==="helper"){this.helperSexpr(t)}else{this.ambiguousSexpr(t)}}},ID:function(v){this.addDepth(v.depth);this.opcode("getContext",v.depth);var t=v.parts[0];if(!t){this.opcode("pushContext")}else{this.opcode("lookupOnContext",v.parts[0])}for(var u=1,s=v.parts.length;u<s;u++){this.opcode("lookup",v.parts[u])}},DATA:function(u){this.options.data=true;if(u.id.isScoped||u.id.depth){throw new m("Scoped data references are not supported: "+u.original,u)}this.opcode("lookupData");var v=u.id.parts;for(var t=0,s=v.length;t<s;t++){this.opcode("lookup",v[t])}},STRING:function(s){this.opcode("pushString",s.string)},INTEGER:function(s){this.opcode("pushLiteral",s.integer)},BOOLEAN:function(s){this.opcode("pushLiteral",s.bool)},comment:function(){},opcode:function(s){this.opcodes.push({opcode:s,args:[].slice.call(arguments,1)})},declare:function(s,t){this.opcodes.push({opcode:"DECLARE",name:s,value:t})},addDepth:function(s){if(s===0){return}if(!this.depths[s]){this.depths[s]=true;this.depths.list.push(s)}},classifySexpr:function(v){var u=v.isHelper;var w=v.eligibleHelper;var t=this.options;if(w&&!u){var s=v.id.parts[0];if(t.knownHelpers[s]){u=true}else{if(t.knownHelpersOnly){w=false}}}if(u){return"helper"}else{if(w){return"ambiguous"}else{return"simple"}}},pushParams:function(u){var s=u.length,t;while(s--){t=u[s];if(this.options.stringParams){if(t.depth){this.addDepth(t.depth)}this.opcode("getContext",t.depth||0);this.opcode("pushStringParam",t.stringModeValue,t.type);if(t.type==="sexpr"){this.sexpr(t)}}else{this[t.type](t)}}},setupFullMustacheParams:function(u,t,s){var v=u.params;this.pushParams(v);this.opcode("pushProgram",t);this.opcode("pushProgram",s);if(u.hash){this.hash(u.hash)}else{this.opcode("emptyHash")}return v}};function n(u,v,w){if(u==null||(typeof u!=="string"&&u.constructor!==w.AST.ProgramNode)){throw new m("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+u)}v=v||{};if(!("data" in v)){v.data=true}var t=w.parse(u);var s=new w.Compiler().compile(t,v);return new w.JavaScriptCompiler().compile(s,v)}q.precompile=n;function p(s,t,u){if(s==null||(typeof s!=="string"&&s.constructor!==u.AST.ProgramNode)){throw new m("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+s)}t=t||{};if(!("data" in t)){t.data=true}var w;function v(){var z=u.parse(s);var y=new u.Compiler().compile(z,t);var x=new u.JavaScriptCompiler().compile(y,t,undefined,true);return u.template(x)}return function(y,x){if(!w){w=v()}return w.call(this,y,x)}}q.compile=p;return q})(d);var h=(function(u,x){var w;var m=u.COMPILER_REVISION;var q=u.REVISION_CHANGES;var r=u.log;var s=x;function o(z){this.value=z}function y(){}y.prototype={nameLookup:function(C,A){var B,z;if(C.indexOf("depth")===0){B=true}if(/^[0-9]+$/.test(A)){z=C+"["+A+"]"}else{if(y.isValidJavaScriptVariableName(A)){z=C+"."+A}else{z=C+"['"+A+"']"}}if(B){return"("+C+" && "+z+")"}else{return z}},compilerInfo:function(){var A=m,z=q[A];return"this.compilerInfo = ["+A+",'"+z+"'];\n"},appendToBuffer:function(z){if(this.environment.isSimple){return"return "+z+";"}else{return{appendToBuffer:true,content:z,toString:function(){return"buffer += "+z+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(z,B,D,C){this.environment=z;this.options=B||{};r("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!D;this.context=D||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(z,B);var F=z.opcodes,E;this.i=0;for(var A=F.length;this.i<A;this.i++){E=F[this.i];if(E.opcode==="DECLARE"){this[E.name]=E.value}else{this[E.opcode].apply(this,E.args)}if(E.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new s("Compile completed with content left on stack")}return this.createFunctionContext(C)},preamble:function(){var z=[];if(!this.isChild){var A=this.namespace;var B="helpers = this.merge(helpers, "+A+".helpers);";if(this.environment.usePartial){B=B+" partials = this.merge(partials, "+A+".partials);"}if(this.options.data){B=B+" data = data || {};"}z.push(B)}else{z.push("")}if(!this.environment.isSimple){z.push(", buffer = "+this.initializeBuffer())}else{z.push("")}this.lastContext=0;this.source=z},createFunctionContext:function(D){var F=this.stackVars.concat(this.registers.list);if(F.length>0){this.source[1]=this.source[1]+", "+F.join(", ")}if(!this.isChild){for(var C in this.context.aliases){if(this.context.aliases.hasOwnProperty(C)){this.source[1]=this.source[1]+", "+C+"="+this.context.aliases[C]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var G=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var B=0,z=this.environment.depths.list.length;B<z;B++){G.push("depth"+this.environment.depths.list[B])}var E=this.mergeSource();if(!this.isChild){E=this.compilerInfo()+E}if(D){G.push(E);return Function.apply(this,G)}else{var A="function "+(this.name||"")+"("+G.join(",")+") {\n  "+E+"}";r("debug",A+"\n\n");return A}},mergeSource:function(){var D="",B;for(var C=0,z=this.source.length;C<z;C++){var A=this.source[C];if(A.appendToBuffer){if(B){B=B+"\n    + "+A.content}else{B=A.content}}else{if(B){D+="buffer += "+B+";\n  ";B=undefined}D+=A+"\n  "}}return D},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var z=["depth0"];this.setupParams(0,z);this.replaceStack(function(A){z.splice(1,0,A);return"blockHelperMissing.call("+z.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var A=["depth0"];this.setupParams(0,A);var z=this.topStack();A.splice(1,0,z);this.pushSource("if (!"+this.lastHelper+") { "+z+" = blockHelperMissing.call("+A.join(", ")+"); }")},appendContent:function(z){if(this.pendingContent){z=this.pendingContent+z}if(this.stripNext){z=z.replace(/^\s+/,"")}this.pendingContent=z},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var z=this.popStack();this.pushSource("if("+z+" || "+z+" === 0) { "+this.appendToBuffer(z)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(z){if(this.lastContext!==z){this.lastContext=z}},lookupOnContext:function(z){this.push(this.nameLookup("depth"+this.lastContext,z,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(z){return"typeof "+z+" === functionType ? "+z+".apply(depth0) : "+z})},lookup:function(z){this.replaceStack(function(A){return A+" == null || "+A+" === false ? "+A+" : "+this.nameLookup(A,z,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(z,A){this.pushStackLiteral("depth"+this.lastContext);this.pushString(A);if(A!=="sexpr"){if(typeof z==="string"){this.pushString(z)}else{this.pushStackLiteral(z)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var z=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+z.contexts.join(",")+"}");this.push("{"+z.types.join(",")+"}")}this.push("{\n    "+z.values.join(",\n    ")+"\n  }")},pushString:function(z){this.pushStackLiteral(this.quotedString(z))},push:function(z){this.inlineStack.push(z);return z},pushLiteral:function(z){this.pushStackLiteral(z)},pushProgram:function(z){if(z!=null){this.pushStackLiteral(this.programExpression(z))}else{this.pushStackLiteral(null)}},invokeHelper:function(D,A,z){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var B=this.lastHelper=this.setupHelper(D,A,true);var E=this.nameLookup("depth"+this.lastContext,A,"context");var C="helper = "+B.name+" || "+E;if(B.paramsInit){C+=","+B.paramsInit}this.push("("+C+",helper ? helper.call("+B.callParams+") : helperMissing.call("+B.helperMissingParams+"))");if(!z){this.flushInline()}},invokeKnownHelper:function(B,z){var A=this.setupHelper(B,z);this.push(A.name+".call("+A.callParams+")")},invokeAmbiguous:function(z,D){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var A=this.setupHelper(0,z,D);var B=this.lastHelper=this.nameLookup("helpers",z,"helper");var E=this.nameLookup("depth"+this.lastContext,z,"context");var C=this.nextStack();if(A.paramsInit){this.pushSource(A.paramsInit)}this.pushSource("if (helper = "+B+") { "+C+" = helper.call("+A.callParams+"); }");this.pushSource("else { helper = "+E+"; "+C+" = typeof helper === functionType ? helper.call("+A.callParams+") : helper; }")},invokePartial:function(z){var A=[this.nameLookup("partials",z,"partial"),"'"+z+"'",this.popStack(),"helpers","partials"];if(this.options.data){A.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+A.join(", ")+")")},assignToHash:function(A){var C=this.popStack(),z,B;if(this.options.stringParams){B=this.popStack();z=this.popStack()}var D=this.hash;if(z){D.contexts.push("'"+A+"': "+z)}if(B){D.types.push("'"+A+"': "+B)}D.values.push("'"+A+"': ("+C+")")},compiler:y,compileChildren:function(z,C){var E=z.children,G,F;for(var D=0,A=E.length;D<A;D++){G=E[D];F=new this.compiler();var B=this.matchExistingProgram(G);if(B==null){this.context.programs.push("");B=this.context.programs.length;G.index=B;G.name="program"+B;this.context.programs[B]=F.compile(G,C,this.context);this.context.environments[B]=G}else{G.index=B;G.name="program"+B}}},matchExistingProgram:function(C){for(var B=0,A=this.context.environments.length;B<A;B++){var z=this.context.environments[B];if(z&&z.equals(C)){return B}}},programExpression:function(A){this.context.aliases.self="this";if(A==null){return"self.noop"}var F=this.environment.children[A],E=F.depths.list,D;var C=[F.index,F.name,"data"];for(var B=0,z=E.length;B<z;B++){D=E[B];if(D===1){C.push("depth0")}else{C.push("depth"+(D-1))}}return(E.length===0?"self.program(":"self.programWithDepth(")+C.join(", ")+")"},register:function(z,A){this.useRegister(z);this.pushSource(z+" = "+A+";")},useRegister:function(z){if(!this.registers[z]){this.registers[z]=true;this.registers.list.push(z)}},pushStackLiteral:function(z){return this.push(new o(z))},pushSource:function(z){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(z){this.source.push(z)}},pushStack:function(A){this.flushInline();var z=this.incrStack();if(A){this.pushSource(z+" = "+A+";")}this.compileStack.push(z);return z},replaceStack:function(G){var B="",C=this.isInline(),F,A,D;if(C){var E=this.popStack(true);if(E instanceof o){F=E.value;D=true}else{A=!this.stackSlot;var z=!A?this.topStackName():this.incrStack();B="("+this.push(z)+" = "+E+"),";F=this.topStack()}}else{F=this.topStack()}var H=G.call(this,F);if(C){if(!D){this.popStack()}if(A){this.stackSlot--}this.push("("+B+H+")")}else{if(!/^stack/.test(F)){F=this.nextStack()}this.pushSource(F+" = ("+B+H+");")}return F},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var B=this.inlineStack;if(B.length){this.inlineStack=[];for(var A=0,z=B.length;A<z;A++){var C=B[A];if(C instanceof o){this.compileStack.push(C)}else{this.pushStack(C)}}}},isInline:function(){return this.inlineStack.length},popStack:function(z){var B=this.isInline(),A=(B?this.inlineStack:this.compileStack).pop();if(!z&&(A instanceof o)){return A.value}else{if(!B){if(!this.stackSlot){throw new s("Invalid stack pop")}this.stackSlot--}return A}},topStack:function(A){var z=(this.isInline()?this.inlineStack:this.compileStack),B=z[z.length-1];if(!A&&(B instanceof o)){return B.value}else{return B}},quotedString:function(z){return'"'+z.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(D,B,A){var C=[],E=this.setupParams(D,C,A);var z=this.nameLookup("helpers",B,"helper");return{params:C,paramsInit:E,name:z,callParams:["depth0"].concat(C).join(", "),helperMissingParams:A&&["depth0",this.quotedString(B)].concat(C).join(", ")}},setupOptions:function(B,A){var H=[],E=[],G=[],z,C,F;H.push("hash:"+this.popStack());if(this.options.stringParams){H.push("hashTypes:"+this.popStack());H.push("hashContexts:"+this.popStack())}C=this.popStack();F=this.popStack();if(F||C){if(!F){this.context.aliases.self="this";F="self.noop"}if(!C){this.context.aliases.self="this";C="self.noop"}H.push("inverse:"+C);H.push("fn:"+F)}for(var D=0;D<B;D++){z=this.popStack();A.push(z);if(this.options.stringParams){G.push(this.popStack());E.push(this.popStack())}}if(this.options.stringParams){H.push("contexts:["+E.join(",")+"]");H.push("types:["+G.join(",")+"]")}if(this.options.data){H.push("data:data")}return H},setupParams:function(C,B,A){var z="{"+this.setupOptions(C,B).join(",")+"}";if(A){this.useRegister("options");B.push("options");return"options="+z}else{B.push(z);return""}}};var n=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var v=y.RESERVED_WORDS={};for(var t=0,p=n.length;t<p;t++){v[n[t]]=true}y.isValidJavaScriptVariableName=function(z){if(!y.RESERVED_WORDS[z]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(z)){return true}return false};w=y;return w})(i,d);var c=(function(v,A,n,r,u){var x;var m=v;var t=A;var q=n.parser;var p=n.parse;var w=r.Compiler;var z=r.compile;var o=r.precompile;var B=u;var y=m.create;var s=function(){var C=y();C.compile=function(D,E){return z(D,E,C)};C.precompile=function(D,E){return o(D,E,C)};C.AST=t;C.Compiler=w;C.JavaScriptCompiler=B;C.Parser=q;C.parse=p;return C};m=s();m.create=s;x=m;return x})(f,j,l,e,h);return c})();
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a)}else{a(window.jQuery)}}(function(a){a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled"));a.support.xhrFileUpload=!!(window.XMLHttpRequestUpload&&window.FileReader);a.support.xhrFormDataFileUpload=!!window.FormData;a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(c,b){c=this.messages[c]||c.toString();if(b){a.each(b,function(d,e){c=c.replace("{"+d+"}",e)})}return c},formData:function(b){return b.serializeArray()},add:function(c,b){if(b.autoUpload||(b.autoUpload!==false&&a(this).fileupload("option","autoUpload"))){b.process().done(function(){b.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var b=this.slice||this.webkitSlice||this.mozSlice;return b.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(d,c,b){var e=d-this.timestamp;if(!this.bitrate||!b||e>b){this.bitrate=(c-this.loaded)*(1000/e)*8;this.loaded=c;this.timestamp=d}return this.bitrate}},_isXHRUpload:function(b){return !b.forceIframeTransport&&((!b.multipart&&a.support.xhrFileUpload)||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;if(typeof b.formData==="function"){return b.formData(b.form)}if(a.isArray(b.formData)){return b.formData}if(a.type(b.formData)==="object"){c=[];a.each(b.formData,function(d,e){c.push({name:d,value:e})});return c}return[]},_getTotal:function(c){var b=0;a.each(c,function(d,e){b+=e.size||1});return b},_initProgressObject:function(c){var b={loaded:0,total:0,bitrate:0};if(c._progress){a.extend(c._progress,b)}else{c._progress=b}},_initResponseObject:function(b){var c;if(b._response){for(c in b._response){if(b._response.hasOwnProperty(c)){delete b._response[c]}}}else{b._response={}}},_onProgress:function(f,d){if(f.lengthComputable){var c=((Date.now)?Date.now():(new Date()).getTime()),b;if(d._time&&d.progressInterval&&(c-d._time<d.progressInterval)&&f.loaded!==f.total){return}d._time=c;b=Math.floor(f.loaded/f.total*(d.chunkSize||d._progress.total))+(d.uploadedBytes||0);this._progress.loaded+=(b-d._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,d.bitrateInterval);d._progress.loaded=d.loaded=b;d._progress.bitrate=d.bitrate=d._bitrateTimer.getBitrate(c,b,d.bitrateInterval);this._trigger("progress",f,d);this._trigger("progressall",f,this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload){a(d.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;c._onProgress(f,b)});b.xhr=function(){return d}}},_isInstanceOf:function(b,c){return Object.prototype.toString.call(c)==="[object "+b+"]"},_initXHRData:function(c){var e=this,g,d=c.files[0],b=c.multipart||!a.support.xhrFileUpload,f=c.paramName[0];c.headers=a.extend({},c.headers);if(c.contentRange){c.headers["Content-Range"]=c.contentRange}if(!b||c.blob||!this._isInstanceOf("File",d)){c.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"'}if(!b){c.contentType=d.type;c.data=c.blob||d}else{if(a.support.xhrFormDataFileUpload){if(c.postMessage){g=this._getFormData(c);if(c.blob){g.push({name:f,value:c.blob})}else{a.each(c.files,function(h,i){g.push({name:c.paramName[h]||f,value:i})})}}else{if(e._isInstanceOf("FormData",c.formData)){g=c.formData}else{g=new FormData();a.each(this._getFormData(c),function(h,i){g.append(i.name,i.value)})}if(c.blob){g.append(f,c.blob,d.name)}else{a.each(c.files,function(h,i){if(e._isInstanceOf("File",i)||e._isInstanceOf("Blob",i)){g.append(c.paramName[h]||f,i,i.name)}})}}c.data=g}}c.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||"");b.formData=this._getFormData(b);if(b.redirect&&c&&c!==location.host){b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})}},_initDataSettings:function(b){if(this._isXHRUpload(b)){if(!this._chunkedUpload(b,true)){if(!b.data){this._initXHRData(b)}this._initProgressListener(b)}if(b.postMessage){b.dataType="postmessage "+(b.dataType||"")}}else{this._initIframeSettings(b)}},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;if(!d){d=[];c.each(function(){var e=a(this),f=e.prop("name")||"files[]",g=(e.prop("files")||[1]).length;while(g){d.push(f);g-=1}});if(!d.length){d=[c.prop("name")||"files[]"]}}else{if(!a.isArray(d)){d=[d]}}return d},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop("form"));if(!b.form.length){b.form=a(this.options.fileInput.prop("form"))}}b.paramName=this._getParamName(b);if(!b.url){b.url=b.form.prop("action")||location.href}b.type=(b.type||b.form.prop("method")||"").toUpperCase();if(b.type!=="POST"&&b.type!=="PUT"&&b.type!=="PATCH"){b.type="POST"}if(!b.formAcceptCharset){b.formAcceptCharset=b.form.attr("accept-charset")}},_getAJAXSettings:function(c){var b=a.extend({},this.options,c);this._initFormSettings(b);this._initDataSettings(b);return b},_getDeferredState:function(b){if(b.state){return b.state()}if(b.isResolved()){return"resolved"}if(b.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(e,d,c){var b=a.Deferred(),f=b.promise();d=d||this.options.context||f;if(e===true){b.resolveWith(d,c)}else{if(e===false){b.rejectWith(d,c)}}f.abort=b.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(f,d){var c=this,b=function(e){return a.Deferred().resolveWith(c,[e]).promise()};d.process=function(g,e){if(g||e){d._processQueue=this._processQueue=(this._processQueue||b(this)).pipe(g,e)}return this._processQueue||b(this)};d.submit=function(){if(this.state()!=="pending"){d.jqXHR=this.jqXHR=(c._trigger("submit",f,this)!==false)&&c._onSend(f,this)}return this.jqXHR||c._getXHRPromise()};d.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}return c._getXHRPromise()};d.state=function(){if(this.jqXHR){return c._getDeferredState(this.jqXHR)}if(this._processQueue){return c._getDeferredState(this._processQueue)}};d.progress=function(){return this._progress};d.response=function(){return this._response}},_getUploadedBytes:function(d){var b=d.getResponseHeader("Range"),e=b&&b.split("-"),c=e&&e.length>1&&parseInt(e[1],10);return c&&c+1},_chunkedUpload:function(m,g){m.uploadedBytes=m.uploadedBytes||0;var f=this,d=m.files[0],e=d.size,b=m.uploadedBytes,c=m.maxChunkSize||e,i=this._blobSlice,j=a.Deferred(),l=j.promise(),h,k;if(!(this._isXHRUpload(m)&&i&&(b||c<e))||m.data){return false}if(g){return true}if(b>=e){d.error=m.i18n("uploadedBytes");return this._getXHRPromise(false,m.context,[null,"error",d.error])}k=function(){var p=a.extend({},m),n=p._progress.loaded;p.blob=i.call(d,b,b+c,d.type);p.chunkSize=p.blob.size;p.contentRange="bytes "+b+"-"+(b+p.chunkSize-1)+"/"+e;f._initXHRData(p);f._initProgressListener(p);h=((f._trigger("chunksend",null,p)!==false&&a.ajax(p))||f._getXHRPromise(false,p.context)).done(function(o,r,q){b=f._getUploadedBytes(q)||(b+p.chunkSize);if(n+p.chunkSize-p._progress.loaded){f._onProgress(a.Event("progress",{lengthComputable:true,loaded:b-p.uploadedBytes,total:b-p.uploadedBytes}),p)}m.uploadedBytes=p.uploadedBytes=b;p.result=o;p.textStatus=r;p.jqXHR=q;f._trigger("chunkdone",null,p);f._trigger("chunkalways",null,p);if(b<e){k()}else{j.resolveWith(p.context,[o,r,q])}}).fail(function(o,r,q){p.jqXHR=o;p.textStatus=r;p.errorThrown=q;f._trigger("chunkfail",null,p);f._trigger("chunkalways",null,p);j.rejectWith(p.context,[o,r,q])})};this._enhancePromise(l);l.abort=function(){return h.abort()};k();return l},_beforeSend:function(c,b){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(b,g,f,d){var e=d._progress.total,c=d._response;if(d._progress.loaded<e){this._onProgress(a.Event("progress",{lengthComputable:true,loaded:e,total:e}),d)}c.result=d.result=b;c.textStatus=d.textStatus=g;c.jqXHR=d.jqXHR=f;this._trigger("done",null,d)},_onFail:function(d,f,e,c){var b=c._response;if(c.recalculateProgress){this._progress.loaded-=c._progress.loaded;this._progress.total-=c._progress.total}b.jqXHR=c.jqXHR=d;b.textStatus=c.textStatus=f;b.errorThrown=c.errorThrown=e;this._trigger("fail",null,c)},_onAlways:function(d,e,c,b){this._trigger("always",null,b)},_onSend:function(h,f){if(!f.submit){this._addConvenienceMethods(h,f)}var g=this,j,b,i,c,k=g._getAJAXSettings(f),d=function(){g._sending+=1;k._bitrateTimer=new g._BitrateTimer();j=j||(((b||g._trigger("send",h,k)===false)&&g._getXHRPromise(false,k.context,b))||g._chunkedUpload(k)||a.ajax(k)).done(function(e,m,l){g._onDone(e,m,l,k)}).fail(function(e,m,l){g._onFail(e,m,l,k)}).always(function(m,n,l){g._onAlways(m,n,l,k);g._sending-=1;g._active-=1;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>g._sending){var e=g._slots.shift();while(e){if(g._getDeferredState(e)==="pending"){e.resolve();break}e=g._slots.shift()}}if(g._active===0){g._trigger("stop")}});return j};this._beforeSend(h,k);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){i=a.Deferred();this._slots.push(i);c=i.pipe(d)}else{this._sequence=this._sequence.pipe(d,d);c=this._sequence}c.abort=function(){b=[undefined,"abort","abort"];if(!j){if(i){i.rejectWith(k.context,b)}return d()}return j.abort()};return this._enhancePromise(c)}return d()},_onAdd:function(k,g){var j=this,n=true,m=a.extend({},this.options,g),d=m.limitMultiFileUploads,h=this._getParamName(m),c,b,l,f;if(!(m.singleFileUploads||d)||!this._isXHRUpload(m)){l=[g.files];c=[h]}else{if(!m.singleFileUploads&&d){l=[];c=[];for(f=0;f<g.files.length;f+=d){l.push(g.files.slice(f,f+d));b=h.slice(f,f+d);if(!b.length){b=h}c.push(b)}}else{c=h}}g.originalFiles=g.files;a.each(l||g.files,function(e,i){var o=a.extend({},g);o.files=l?i:[i];o.paramName=c[e];j._initResponseObject(o);j._initProgressObject(o);j._addConvenienceMethods(k,o);n=j._trigger("add",k,o);return n});return n},_replaceFileInput:function(b){var c=b.clone(true);a("<form></form>").append(c)[0].reset();b.after(c).detach();a.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(d,e){if(e===b[0]){return c[0]}return e});if(b[0]===this.element[0]){this.element=c}},_handleFileTreeEntry:function(f,g){var e=this,b=a.Deferred(),c=function(h){if(h&&!h.entry){h.entry=f}b.resolve([h])},d;g=g||"";if(f.isFile){if(f._file){f._file.relativePath=g;b.resolve(f._file)}else{f.file(function(h){h.relativePath=g;b.resolve(h)},c)}}else{if(f.isDirectory){d=f.createReader();d.readEntries(function(h){e._handleFileTreeEntries(h,g+f.name+"/").done(function(i){b.resolve(i)}).fail(c)},c)}else{b.resolve([])}}return b.promise()},_handleFileTreeEntries:function(b,d){var c=this;return a.when.apply(a,a.map(b,function(e){return c._handleFileTreeEntry(e,d)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(c){c=c||{};var b=c.items;if(b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)){return this._handleFileTreeEntries(a.map(b,function(e){var d;if(e.webkitGetAsEntry){d=e.webkitGetAsEntry();if(d){d._file=e.getAsFile()}return d}return e.getAsEntry()}))}return a.Deferred().resolve(a.makeArray(c.files)).promise()},_getSingleFileInputFiles:function(d){d=a(d);var b=d.prop("webkitEntries")||d.prop("entries"),c,e;if(b&&b.length){return this._handleFileTreeEntries(b)}c=a.makeArray(d.prop("files"));if(!c.length){e=d.prop("value");if(!e){return a.Deferred().resolve([]).promise()}c=[{name:e.replace(/^.*\\/,"")}]}else{if(c[0].name===undefined&&c[0].fileName){a.each(c,function(f,g){g.name=g.fileName;g.size=g.fileSize})}}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){if(!(b instanceof a)||b.length===1){return this._getSingleFileInputFiles(b)}return a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(d){var b=this,c={fileInput:a(d.target),form:a(d.target.form)};this._getFileInputFiles(c.fileInput).always(function(e){c.files=e;if(b.options.replaceFileInput){b._replaceFileInput(c.fileInput)}if(b._trigger("change",d,c)!==false){b._onAdd(d,c)}})},_onPaste:function(d){var b=d.originalEvent&&d.originalEvent.clipboardData&&d.originalEvent.clipboardData.items,c={files:[]};if(b&&b.length){a.each(b,function(e,g){var f=g.getAsFile&&g.getAsFile();if(f){c.files.push(f)}});if(this._trigger("paste",d,c)!==false){this._onAdd(d,c)}}},_onDrop:function(f){f.dataTransfer=f.originalEvent&&f.originalEvent.dataTransfer;var b=this,d=f.dataTransfer,c={};if(d&&d.files&&d.files.length){f.preventDefault();this._getDroppedFiles(d).always(function(e){c.files=e;if(b._trigger("drop",f,c)!==false){b._onAdd(f,c)}})}},_onDragOver:function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var c=d.dataTransfer,b={dropEffect:"copy",preventDefault:true};if(c&&a.inArray("Files",c.types)!==-1&&this._trigger("dragover",d,b)!==false){c.dropEffect=b.dropEffect;if(b.preventDefault){d.preventDefault()}}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(a.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=a.inArray(b,this._specialOptions)!==-1;if(d){this._destroyEventHandlers()}this._super(b,c);if(d){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(b.fileInput instanceof a)){b.fileInput=a(b.fileInput)}}if(!(b.dropZone instanceof a)){b.dropZone=a(b.dropZone)}if(!(b.pasteZone instanceof a)){b.pasteZone=a(b.pasteZone)}},_getRegExp:function(d){var c=d.split("/"),b=c.pop();c.shift();return new RegExp(c.join("/"),b)},_isRegExpOption:function(b,c){return b!=="url"&&a.type(c)==="string"&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var c=this,b=this.options;a.each(a(this.element[0].cloneNode(false)).data(),function(d,e){if(c._isRegExpOption(d,e)){e=c._getRegExp(e)}b[d]=e})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(c){var b=this;if(!c||this.options.disabled){return}if(c.fileInput&&!c.files){this._getFileInputFiles(c.fileInput).always(function(d){c.files=d;b._onAdd(null,c)})}else{c.files=a.makeArray(c.files);this._onAdd(null,c)}},send:function(f){if(f&&!this.options.disabled){if(f.fileInput&&!f.files){var d=this,b=a.Deferred(),g=b.promise(),c,e;g.abort=function(){e=true;if(c){return c.abort()}b.reject(null,"abort","abort");return g};this._getFileInputFiles(f.fileInput).always(function(h){if(e){return}if(!h.length){b.reject();return}f.files=h;c=d._onSend(null,f).then(function(i,k,j){b.resolve(i,k,j)},function(i,k,j){b.reject(i,k,j)})});return this._enhancePromise(g)}f.files=a.makeArray(f.files);if(f.files.length){return this._onSend(null,f)}}return this._getXHRPromise(false,f&&f.context)}})}));
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(b){var a={init:function(c){var d=this;if(!d.data("jqv")||d.data("jqv")==null){c=a._saveOptions(d,c);b(".formError").live("click",function(){b(this).fadeOut(150,function(){b(this).parent(".formErrorOuter").remove();b(this).remove()})})}return this},attach:function(e){if(!b(this).is("form")){alert("Sorry, jqv.attach() only applies to a form");return this}var d=this;var c;if(e){c=a._saveOptions(d,e)}else{c=d.data("jqv")}c.validateAttribute=(d.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(c.binded){d.find("["+c.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(c.validationEventTrigger,a._onFieldEvent);d.find("["+c.validateAttribute+"*=validate][type=checkbox],["+c.validateAttribute+"*=validate][type=radio]").bind("click",a._onFieldEvent);d.find("["+c.validateAttribute+"*=validate][class*=datepicker]").bind(c.validationEventTrigger,{delay:300},a._onFieldEvent)}if(c.autoPositionUpdate){b(window).bind("resize",{noAnimation:true,formElem:d},a.updatePromptsPosition)}d.bind("submit",a._onSubmitEvent);return this},detach:function(){if(!b(this).is("form")){alert("Sorry, jqv.detach() only applies to a form");return this}var d=this;var c=d.data("jqv");d.find("["+c.validateAttribute+"*=validate]").not("[type=checkbox]").unbind(c.validationEventTrigger,a._onFieldEvent);d.find("["+c.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").unbind("click",a._onFieldEvent);d.unbind("submit",a.onAjaxFormComplete);d.find("["+c.validateAttribute+"*=validate]").not("[type=checkbox]").die(c.validationEventTrigger,a._onFieldEvent);d.find("["+c.validateAttribute+"*=validate][type=checkbox]").die("click",a._onFieldEvent);d.die("submit",a.onAjaxFormComplete);d.removeData("jqv");if(c.autoPositionUpdate){b(window).unbind("resize",a.updatePromptsPosition)}return this},validate:function(){var d=b(this);var f=null;if(d.is("form")&&!d.hasClass("validating")){d.addClass("validating");var c=d.data("jqv");f=a._validateFields(this);setTimeout(function(){d.removeClass("validating")},100);if(f&&c.onSuccess){c.onSuccess()}else{if(!f&&c.onFailure){c.onFailure()}}}else{if(d.is("form")){d.removeClass("validating")}else{var e=d.closest("form");var c=e.data("jqv");f=a._validateField(d,c);if(f&&c.onFieldSuccess){c.onFieldSuccess()}else{if(c.onFieldFailure&&c.InvalidFields.length>0){c.onFieldFailure()}}}}return f},updatePromptsPosition:function(f){if(f&&this==window){var e=f.data.formElem;var c=f.data.noAnimation}else{var e=b(this.closest("form"))}var d=e.data("jqv");e.find("["+d.validateAttribute+"*=validate]").not(":disabled").each(function(){var i=b(this);if(d.prettySelect&&i.is(":hidden")){i=e.find("#"+d.usePrefix+i.attr("id")+d.useSuffix)}var g=a._getPrompt(i);var h=b(g).find(".formErrorContent").html();if(g){a._updatePrompt(i,b(g),h,undefined,false,d,c)}});return this},showPrompt:function(d,f,h,e){var g=this.closest("form");var c=g.data("jqv");if(!c){c=a._saveOptions(this,c)}if(h){c.promptPosition=h}c.showArrow=e==true;a._showPrompt(this,d,f,false,c);return this},hide:function(){var f=b(this).closest("form");var d=f.data("jqv");var e=(d&&d.fadeDuration)?d.fadeDuration:0.3;var c;if(b(this).is("form")){c="parentForm"+a._getClassName(b(this).attr("id"))}else{c=a._getClassName(b(this).attr("id"))+"formError"}b("."+c).fadeTo(e,0.3,function(){b(this).parent(".formErrorOuter").remove();b(this).remove()});return this},hideAll:function(){var d=this;var c=d.data("jqv");var e=c?c.fadeDuration:0.3;b(".formError").fadeTo(e,0.3,function(){b(this).parent(".formErrorOuter").remove();b(this).remove()});return this},_onFieldEvent:function(e){var f=b(this);var d=f.closest("form");var c=d.data("jqv");c.eventTrigger="field";window.setTimeout(function(){a._validateField(f,c);if(c.InvalidFields.length==0&&c.onFieldSuccess){c.onFieldSuccess()}else{if(c.InvalidFields.length>0&&c.onFieldFailure){c.onFieldFailure()}}},(e.data)?e.data.delay:0)},_onSubmitEvent:function(){var e=b(this);var c=e.data("jqv");c.eventTrigger="submit";var d=a._validateFields(e);if(d&&c.ajaxFormValidation){a._validateFormWithAjax(e,c);return false}if(c.onValidationComplete){return !!c.onValidationComplete(e,d)}return d},_checkAjaxStatus:function(d){var c=true;b.each(d.ajaxValidCache,function(e,f){if(!f){c=false;return false}});return c},_checkAjaxFieldStatus:function(c,d){return d.ajaxValidCache[c]==true},_validateFields:function(e){var m=e.data("jqv");var f=false;e.trigger("jqv.form.validating");var n=null;e.find("["+m.validateAttribute+"*=validate]").not(":disabled").each(function(){var p=b(this);var o=[];if(b.inArray(p.attr("name"),o)<0){f|=a._validateField(p,m);if(f&&n==null){if(p.is(":hidden")&&m.prettySelect){n=p=e.find("#"+m.usePrefix+a._jqSelector(p.attr("id"))+m.useSuffix)}else{n=p}}if(m.doNotShowAllErrosOnSubmit){return false}o.push(p.attr("name"));if(m.showOneMessage==true&&f){return false}}});e.trigger("jqv.form.result",[f]);if(f){if(m.scroll){var l=n.offset().top;var h=n.offset().left;var j=m.promptPosition;if(typeof(j)=="string"&&j.indexOf(":")!=-1){j=j.substring(0,j.indexOf(":"))}if(j!="bottomRight"&&j!="bottomLeft"){var i=a._getPrompt(n);if(i){l=i.offset().top}}if(m.isOverflown){var c=b(m.overflownDIV);if(!c.length){return false}var d=c.scrollTop();var g=-parseInt(c.offset().top);l+=d+g-5;var k=b(m.overflownDIV+":not(:animated)");k.animate({scrollTop:l},1100,function(){if(m.focusFirstField){n.focus()}})}else{b("html, body").animate({scrollTop:l},1100,function(){if(m.focusFirstField){n.focus()}});b("html, body").animate({scrollLeft:h},1100)}}else{if(m.focusFirstField){n.focus()}}return false}return true},_validateFormWithAjax:function(g,e){var h=g.serialize();var f=(e.ajaxFormValidationMethod)?e.ajaxFormValidationMethod:"GET";var d=(e.ajaxFormValidationURL)?e.ajaxFormValidationURL:g.attr("action");var c=(e.dataType)?e.dataType:"json";b.ajax({type:f,url:d,cache:false,dataType:c,data:h,form:g,methods:a,options:e,beforeSend:function(){return e.onBeforeAjaxFormValidation(g,e)},error:function(i,j){a._ajaxError(i,j)},success:function(n){if((c=="json")&&(n!==true)){var l=false;for(var m=0;m<n.length;m++){var o=n[m];var q=o[0];var k=b(b("#"+q)[0]);if(k.length==1){var p=o[2];if(o[1]==true){if(p==""||!p){a._closePrompt(k)}else{if(e.allrules[p]){var j=e.allrules[p].alertTextOk;if(j){p=j}}a._showPrompt(k,p,"pass",false,e,true)}}else{l|=true;if(e.allrules[p]){var j=e.allrules[p].alertText;if(j){p=j}}a._showPrompt(k,p,"",false,e,true)}}}e.onAjaxFormComplete(!l,g,n,e)}else{e.onAjaxFormComplete(true,g,n,e)}}})},_validateField:function(c,k,r){if(!c.attr("id")){c.attr("id","form-validation-field-"+b.validationEngine.fieldIdCounter);++b.validationEngine.fieldIdCounter}if(c.is(":hidden")&&!k.prettySelect||c.parent().is(":hidden")){return false}var t=c.attr(k.validateAttribute);var y=/validate\[(.*)\]/.exec(t);if(!y){return false}var u=y[1];var q=u.split(/\[|,|\]/);var n=false;var h=c.attr("name");var g="";var x="";var s=false;var z=false;k.isError=false;k.showArrow=true;if(k.maxErrorsPerField>0){z=true}var d=b(c.closest("form"));for(var w=0;w<q.length;w++){q[w]=q[w].replace(" ","");if(q[w]===""){delete q[w]}}for(var w=0,m=0;w<q.length;w++){if(z&&m>=k.maxErrorsPerField){if(!s){var j=b.inArray("required",q);s=(j!=-1&&j>=w)}break}var f=undefined;switch(q[w]){case"required":s=true;f=a._getErrorMessage(d,c,q[w],q,w,k,a._required);break;case"custom":f=a._getErrorMessage(d,c,q[w],q,w,k,a._custom);break;case"groupRequired":var v="["+k.validateAttribute+"*="+q[w+1]+"]";var e=d.find(v).eq(0);if(e[0]!=c[0]){a._validateField(e,k,r);k.showArrow=true}f=a._getErrorMessage(d,c,q[w],q,w,k,a._groupRequired);if(f){s=true}k.showArrow=false;break;case"ajax":f=a._ajax(c,q,w,k);if(f){x="load"}break;case"minSize":f=a._getErrorMessage(d,c,q[w],q,w,k,a._minSize);break;case"maxSize":f=a._getErrorMessage(d,c,q[w],q,w,k,a._maxSize);break;case"min":f=a._getErrorMessage(d,c,q[w],q,w,k,a._min);break;case"max":f=a._getErrorMessage(d,c,q[w],q,w,k,a._max);break;case"past":f=a._getErrorMessage(d,c,q[w],q,w,k,a._past);break;case"future":f=a._getErrorMessage(d,c,q[w],q,w,k,a._future);break;case"dateRange":var v="["+k.validateAttribute+"*="+q[w+1]+"]";k.firstOfGroup=d.find(v).eq(0);k.secondOfGroup=d.find(v).eq(1);if(k.firstOfGroup[0].value||k.secondOfGroup[0].value){f=a._getErrorMessage(d,c,q[w],q,w,k,a._dateRange)}if(f){s=true}k.showArrow=false;break;case"dateTimeRange":var v="["+k.validateAttribute+"*="+q[w+1]+"]";k.firstOfGroup=d.find(v).eq(0);k.secondOfGroup=d.find(v).eq(1);if(k.firstOfGroup[0].value||k.secondOfGroup[0].value){f=a._getErrorMessage(d,c,q[w],q,w,k,a._dateTimeRange)}if(f){s=true}k.showArrow=false;break;case"maxCheckbox":c=b(d.find("input[name='"+h+"']"));f=a._getErrorMessage(d,c,q[w],q,w,k,a._maxCheckbox);break;case"minCheckbox":c=b(d.find("input[name='"+h+"']"));f=a._getErrorMessage(d,c,q[w],q,w,k,a._minCheckbox);break;case"equals":f=a._getErrorMessage(d,c,q[w],q,w,k,a._equals);break;case"funcCall":f=a._getErrorMessage(d,c,q[w],q,w,k,a._funcCall);break;case"creditCard":f=a._getErrorMessage(d,c,q[w],q,w,k,a._creditCard);break;case"condRequired":f=a._getErrorMessage(d,c,q[w],q,w,k,a._condRequired);if(f!==undefined){s=true}break;default:}var l=false;if(typeof f=="object"){switch(f.status){case"_break":l=true;break;case"_error":f=f.message;break;case"_error_no_prompt":return true;break;default:break}}if(l){break}if(typeof f=="string"){g+=f+"<br/>";k.isError=true;m++}}if(!s&&c.val().length<1){k.isError=false}var o=c.prop("type");if((o=="radio"||o=="checkbox")&&d.find("input[name='"+h+"']").size()>1){c=b(d.find("input[name='"+h+"'][type!=hidden]:first"));k.showArrow=false}if(c.is(":hidden")&&k.prettySelect){c=d.find("#"+k.usePrefix+a._jqSelector(c.attr("id"))+k.useSuffix)}if(k.isError){a._showPrompt(c,g,x,false,k)}else{if(!n){a._closePrompt(c)}}if(!n){c.trigger("jqv.field.result",[c,k.isError,g])}var p=b.inArray(c[0],k.InvalidFields);if(p==-1){if(k.isError){k.InvalidFields.push(c[0])}}else{if(!k.isError){k.InvalidFields.splice(p,1)}}a._handleStatusCssClasses(c,k);return k.isError},_handleStatusCssClasses:function(d,c){if(c.addSuccessCssClassToField){d.removeClass(c.addSuccessCssClassToField)}if(c.addFailureCssClassToField){d.removeClass(c.addFailureCssClassToField)}if(c.addSuccessCssClassToField&&!c.isError){d.addClass(c.addSuccessCssClassToField)}if(c.addFailureCssClassToField&&c.isError){d.addClass(c.addFailureCssClassToField)}},_getErrorMessage:function(c,n,l,p,g,q,m){var k=l;if(l=="custom"){var d=jQuery.inArray(l,p)+1;var o=p[d];l="custom["+o+"]"}var e=(n.attr("data-validation-engine"))?n.attr("data-validation-engine"):n.attr("class");var h=e.split(" ");var j;if(l=="future"||l=="past"||l=="maxCheckbox"||l=="minCheckbox"){j=m(c,n,p,g,q)}else{j=m(n,p,g,q)}if(j!=undefined){var f=a._getCustomErrorMessage(b(n),h,k,q);if(f){j=f}}return j},_getCustomErrorMessage:function(j,e,h,l){var f=false;var d=a._validityProp[h];if(d!=undefined){f=j.attr("data-errormessage-"+d);if(f!=undefined){return f}}f=j.attr("data-errormessage");if(f!=undefined){return f}var c="#"+j.attr("id");if(typeof l.custom_error_messages[c]!="undefined"&&typeof l.custom_error_messages[c][h]!="undefined"){f=l.custom_error_messages[c][h]["message"]}else{if(e.length>0){for(var g=0;g<e.length&&e.length>0;g++){var k="."+e[g];if(typeof l.custom_error_messages[k]!="undefined"&&typeof l.custom_error_messages[k][h]!="undefined"){f=l.custom_error_messages[k][h]["message"];break}}}}if(!f&&typeof l.custom_error_messages[h]!="undefined"&&typeof l.custom_error_messages[h]["message"]!="undefined"){f=l.custom_error_messages[h]["message"]}return f},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(h,j,e,d,g){switch(h.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:if(!b.trim(h.val())||h.val()==h.attr("data-validation-placeholder")||h.val()==h.attr("placeholder")){return d.allrules[j[e]].alertText}break;case"radio":case"checkbox":if(g){if(!h.attr("checked")){return d.allrules[j[e]].alertTextCheckboxMultiple}break}var f=h.closest("form");var c=h.attr("name");if(f.find("input[name='"+c+"']:checked").size()==0){if(f.find("input[name='"+c+"']:visible").size()==1){return d.allrules[j[e]].alertTextCheckboxe}else{return d.allrules[j[e]].alertTextCheckboxMultiple}}break}},_groupRequired:function(f,h,d,c){var g="["+c.validateAttribute+"*="+h[d+1]+"]";var e=false;f.closest("form").find(g).each(function(){if(!a._required(b(this),h,d,c)){e=true;return false}});if(!e){return c.allrules[h[d]].alertText}},_custom:function(j,k,d,l){var c=k[d+1];var g=l.allrules[c];var h;if(!g){alert("jqv:custom rule not found - "+c);return}if(g.regex){var f=g.regex;if(!f){alert("jqv:custom regex not found - "+c);return}var e=new RegExp(f);if(!e.test(j.val())){return l.allrules[c].alertText}}else{if(g.func){h=g.func;if(typeof(h)!=="function"){alert("jqv:custom parameter 'function' is no function - "+c);return}if(!h(j,k,d,l)){return l.allrules[c].alertText}}else{alert("jqv:custom type not allowed "+c);return}}},_funcCall:function(j,k,d,c){var h=k[d+1];var f;if(h.indexOf(".")>-1){var g=h.split(".");var e=window;while(g.length){e=e[g.shift()]}f=e}else{f=window[h]||c.customFunctions[h]}if(typeof(f)=="function"){return f(j,k,d,c)}},_equals:function(f,g,e,d){var c=g[e+1];if(f.val()!=b("#"+c).val()){return d.allrules.equals.alertText}},_maxSize:function(h,j,f,e){var d=j[f+1];var c=h.val().length;if(c>d){var g=e.allrules.maxSize;return g.alertText+d+g.alertText2}},_minSize:function(h,j,f,d){var e=j[f+1];var c=h.val().length;if(c<e){var g=d.allrules.minSize;return g.alertText+e+g.alertText2}},_min:function(h,j,f,d){var e=parseFloat(j[f+1]);var c=parseFloat(h.val());if(c<e){var g=d.allrules.min;if(g.alertText2){return g.alertText+e+g.alertText2}return g.alertText+e}},_max:function(h,j,f,e){var d=parseFloat(j[f+1]);var c=parseFloat(h.val());if(c>d){var g=e.allrules.max;if(g.alertText2){return g.alertText+d+g.alertText2}return g.alertText+d}},_past:function(d,j,k,e,m){var c=k[e+1];var g=b(d.find("input[name='"+c.replace(/^#+/,"")+"']"));var f;if(c.toLowerCase()=="now"){f=new Date()}else{if(undefined!=g.val()){if(g.is(":disabled")){return}f=a._parseDate(g.val())}else{f=a._parseDate(c)}}var l=a._parseDate(j.val());if(l>f){var h=m.allrules.past;if(h.alertText2){return h.alertText+a._dateToString(f)+h.alertText2}return h.alertText+a._dateToString(f)}},_future:function(d,j,k,e,m){var c=k[e+1];var g=b(d.find("input[name='"+c.replace(/^#+/,"")+"']"));var f;if(c.toLowerCase()=="now"){f=new Date()}else{if(undefined!=g.val()){if(g.is(":disabled")){return}f=a._parseDate(g.val())}else{f=a._parseDate(c)}}var l=a._parseDate(j.val());if(l<f){var h=m.allrules.future;if(h.alertText2){return h.alertText+a._dateToString(f)+h.alertText2}return h.alertText+a._dateToString(f)}},_isDate:function(d){var c=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return c.test(d)},_isDateTime:function(d){var c=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return c.test(d)},_dateCompare:function(d,c){return(new Date(d.toString())<new Date(c.toString()))},_dateRange:function(e,f,d,c){if((!c.firstOfGroup[0].value&&c.secondOfGroup[0].value)||(c.firstOfGroup[0].value&&!c.secondOfGroup[0].value)){return c.allrules[f[d]].alertText+c.allrules[f[d]].alertText2}if(!a._isDate(c.firstOfGroup[0].value)||!a._isDate(c.secondOfGroup[0].value)){return c.allrules[f[d]].alertText+c.allrules[f[d]].alertText2}if(!a._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value)){return c.allrules[f[d]].alertText+c.allrules[f[d]].alertText2}},_dateTimeRange:function(e,f,d,c){if((!c.firstOfGroup[0].value&&c.secondOfGroup[0].value)||(c.firstOfGroup[0].value&&!c.secondOfGroup[0].value)){return c.allrules[f[d]].alertText+c.allrules[f[d]].alertText2}if(!a._isDateTime(c.firstOfGroup[0].value)||!a._isDateTime(c.secondOfGroup[0].value)){return c.allrules[f[d]].alertText+c.allrules[f[d]].alertText2}if(!a._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value)){return c.allrules[f[d]].alertText+c.allrules[f[d]].alertText2}},_maxCheckbox:function(h,j,k,g,f){var d=k[g+1];var e=j.attr("name");var c=h.find("input[name='"+e+"']:checked").size();if(c>d){f.showArrow=false;if(f.allrules.maxCheckbox.alertText2){return f.allrules.maxCheckbox.alertText+" "+d+" "+f.allrules.maxCheckbox.alertText2}return f.allrules.maxCheckbox.alertText}},_minCheckbox:function(h,j,k,g,f){var d=k[g+1];var e=j.attr("name");var c=h.find("input[name='"+e+"']:checked").size();if(c<d){f.showArrow=false;return f.allrules.minCheckbox.alertText+" "+d+" "+f.allrules.minCheckbox.alertText2}},_creditCard:function(k,l,f,n){var d=false,m=k.val().replace(/ +/g,"").replace(/-+/g,"");var c=m.length;if(c>=14&&c<=16&&parseInt(m)>0){var g=0,f=c-1,j=1,h,e=new String();do{h=parseInt(m.charAt(f));e+=(j++%2==0)?h*2:h}while(--f>=0);for(f=0;f<e.length;f++){g+=parseInt(e.charAt(f))}d=g%10==0}if(!d){return n.allrules.creditCard.alertText}},_ajax:function(o,r,j,s){var q=r[j+1];var n=s.allrules[q];var e=n.extraData;var l=n.extraDataDynamic;var h={fieldId:o.attr("id"),fieldValue:o.val()};if(typeof e==="object"){b.extend(h,e)}else{if(typeof e==="string"){var k=e.split("&");for(var j=0;j<k.length;j++){var p=k[j].split("=");if(p[0]&&p[0]){h[p[0]]=p[1]}}}}if(l){var g=[];var m=String(l).split(",");for(var j=0;j<m.length;j++){var c=m[j];if(b(c).length){var d=o.closest("form").find(c).val();var f=c.replace("#","")+"="+escape(d);h[c.replace("#","")]=d}}}if(s.eventTrigger=="field"){delete (s.ajaxValidCache[o.attr("id")])}if(!s.isError&&!a._checkAjaxFieldStatus(o.attr("id"),s)){b.ajax({type:s.ajaxFormValidationMethod,url:n.url,cache:false,dataType:"json",data:h,field:o,rule:n,methods:a,options:s,beforeSend:function(){},error:function(i,t){a._ajaxError(i,t)},success:function(v){var x=v[0];var u=b("#"+x).eq(0);if(u.length==1){var t=v[1];var w=v[2];if(!t){s.ajaxValidCache[x]=false;s.isError=true;if(w){if(s.allrules[w]){var i=s.allrules[w].alertText;if(i){w=i}}}else{w=n.alertText}a._showPrompt(u,w,"",true,s)}else{s.ajaxValidCache[x]=true;if(w){if(s.allrules[w]){var i=s.allrules[w].alertTextOk;if(i){w=i}}}else{w=n.alertTextOk}if(w){a._showPrompt(u,w,"pass",true,s)}else{a._closePrompt(u)}if(s.eventTrigger=="submit"){o.closest("form").submit()}}}u.trigger("jqv.field.result",[u,s.isError,w])}});return n.alertTextLoad}},_ajaxError:function(c,d){if(c.status==0&&d==null){alert("The page is not served from a server! ajax call failed")}else{if(typeof console!="undefined"){console.log("Ajax error: "+c.status+" "+d)}}},_dateToString:function(c){return c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()},_parseDate:function(e){var c=e.split("-");if(c==e){c=e.split("/")}return new Date(c[0],(c[1]-1),c[2])},_showPrompt:function(i,g,h,f,e,d){var c=a._getPrompt(i);if(d){c=false}if(c){a._updatePrompt(i,c,g,h,f,e)}else{a._buildPrompt(i,g,h,f,e)}},_buildPrompt:function(h,c,f,j,k){var d=b("<div>");d.addClass(a._getClassName(h.attr("id"))+"formError");d.addClass("parentForm"+a._getClassName(h.parents("form").attr("id")));d.addClass("formError");switch(f){case"pass":d.addClass("greenPopup");break;case"load":d.addClass("blackPopup");break;default:}if(j){d.addClass("ajaxed")}var l=b("<div>").addClass("formErrorContent").html(c).appendTo(d);if(k.showArrow){var i=b("<div>").addClass("formErrorArrow");var e=h.data("promptPosition")||k.promptPosition;if(typeof(e)=="string"){var g=e.indexOf(":");if(g!=-1){e=e.substring(0,g)}}switch(e){case"bottomLeft":case"bottomRight":d.find(".formErrorContent").before(i);i.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":i.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');d.append(i);break}}if(k.addPromptClass){d.addClass(k.addPromptClass)}d.css({opacity:0,position:"absolute"});h.before(d);var g=a._calculatePosition(h,d,k);d.css({top:g.callerTopPosition,left:g.callerleftPosition,marginTop:g.marginTopSize,opacity:0}).data("callerField",h);if(k.autoHidePrompt){setTimeout(function(){d.animate({opacity:0},function(){d.closest(".formErrorOuter").remove();d.remove()})},k.autoHideDelay)}return d.animate({opacity:0.87})},_updatePrompt:function(i,d,c,g,j,k,e){if(d){if(typeof g!=="undefined"){if(g=="pass"){d.addClass("greenPopup")}else{d.removeClass("greenPopup")}if(g=="load"){d.addClass("blackPopup")}else{d.removeClass("blackPopup")}}if(j){d.addClass("ajaxed")}else{d.removeClass("ajaxed")}d.find(".formErrorContent").html(c);var h=a._calculatePosition(i,d,k);var f={top:h.callerTopPosition,left:h.callerleftPosition,marginTop:h.marginTopSize};if(e){d.css(f)}else{d.animate(f)}}},_closePrompt:function(d){var c=a._getPrompt(d);if(c){c.fadeTo("fast",0,function(){c.parent(".formErrorOuter").remove();c.remove()})}},closePrompt:function(c){return a._closePrompt(c)},_getPrompt:function(e){var f=b(e).closest("form").attr("id");var d=a._getClassName(e.attr("id"))+"formError";var c=b("."+a._escapeExpression(d)+".parentForm"+f)[0];if(c){return b(c)}},_escapeExpression:function(c){return c.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var f=b(document);var c=b("body");var d=(e&&e.hasClass("rtl"))||(e&&(e.attr("dir")||"").toLowerCase()==="rtl")||f.hasClass("rtl")||(f.attr("dir")||"").toLowerCase()==="rtl"||c.hasClass("rtl")||(c.attr("dir")||"").toLowerCase()==="rtl";return Boolean(d)},_calculatePosition:function(m,f,r){var e,n,k;var g=m.width();var c=m.position().left;var p=m.position().top;var d=m.height();var q=f.height();e=n=0;k=-q;var j=m.data("promptPosition")||r.promptPosition;var i="";var h="";var o=0;var l=0;if(typeof(j)=="string"){if(j.indexOf(":")!=-1){i=j.substring(j.indexOf(":")+1);j=j.substring(0,j.indexOf(":"));if(i.indexOf(",")!=-1){h=i.substring(i.indexOf(",")+1);i=i.substring(0,i.indexOf(","));l=parseInt(h);if(isNaN(l)){l=0}}o=parseInt(i);if(isNaN(i)){i=0}}}switch(j){default:case"topRight":n+=c+g-30;e+=p;break;case"topLeft":e+=p;n+=c;break;case"centerRight":e=p+4;k=0;n=c+m.outerWidth(true)+5;break;case"centerLeft":n=c-(f.width()+2);e=p+4;k=0;break;case"bottomLeft":e=p+m.height()+5;k=0;n=c;break;case"bottomRight":n=c+g-30;e=p+m.height()+5;k=0}n+=o;e+=l;return{callerTopPosition:e+"px",callerleftPosition:n+"px",marginTopSize:k+"px"}},_saveOptions:function(e,d){if(b.validationEngineLanguage){var c=b.validationEngineLanguage.allRules}else{b.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page")}b.validationEngine.defaults.allrules=c;var f=b.extend(true,{},b.validationEngine.defaults,d);e.data("jqv",f);return f},_getClassName:function(c){if(c){return c.replace(/:/g,"_").replace(/\./g,"_")}},_jqSelector:function(c){return c.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(g,h,e,d){var c,f;for(c=(e+1);c<h.length;c++){f=jQuery("#"+h[c]).first();if(f.length&&a._required(f,["required"],0,d,true)==undefined){return a._required(g,["required"],0,d)}}}};b.fn.validationEngine=function(d){var c=b(this);if(!c[0]){return c}if(typeof(d)=="string"&&d.charAt(0)!="_"&&a[d]){if(d!="showPrompt"&&d!="hide"&&d!="hideAll"){a.init.apply(c)}return a[d].apply(c,Array.prototype.slice.call(arguments,1))}else{if(typeof d=="object"||!d){a.init.apply(c,arguments);return a.attach.apply(c)}else{b.error("Method "+d+" does not exist in jQuery.validationEngine")}}};b.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:b.noop,onBeforeAjaxFormValidation:b.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,addSuccessCssClassToField:false,addFailureCssClassToField:false,autoHidePrompt:false,autoHideDelay:10000,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};b(function(){b.validationEngine.defaults.promptPosition=a.isRTL()?"topLeft":"topRight"})})(jQuery);
(function(a){a.fn.validationEngineLanguage=function(){};a.validationEngineLanguage={newLang:function(){a.validationEngineLanguage.allRules={required:{regex:"none",alertText:"",alertTextCheckboxMultiple:"",alertTextCheckboxe:""},minSize:{regex:"none",alertText:" ",alertText2:" "},maxSize:{regex:"none",alertText:"",alertText2:" "},min:{regex:"none",alertText:""},max:{regex:"none",alertText:""},past:{regex:"none",alertText:""},future:{regex:"none",alertText:""},maxCheckbox:{regex:"none",alertText:""},minCheckbox:{regex:"none",alertText:"",alertText2:""},equals:{regex:"none",alertText:""},phone:{regex:/^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,alertText:"* Invalid phone number"},email:{regex:/^([A-Za-z0-9_\-\.\'])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,6})$/,alertText:"Email"},integer:{regex:/^[\-\+]?\d+$/,alertText:""},number:{regex:/^[\-\+]?(([0-9]+)([\.,]([0-9]+))?|([\.,]([0-9]+))?)$/,alertText:"* Invalid floating decimal number"},date:{regex:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,alertText:" YYYY-MM-DD"},ipv4:{regex:/^([1-9][0-9]{0,2})+\.([1-9][0-9]{0,2})+\.([1-9][0-9]{0,2})+\.([1-9][0-9]{0,2})+$/,alertText:"IP"},url:{regex:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,alertText:"URL"},onlyNumberSp:{regex:/^[0-9\ ]+$/,alertText:""},onlyLetterSp:{regex:/^[a-zA-Z\ \']+$/,alertText:""},onlyLetterNumber:{regex:/^[0-9a-zA-Z]+$/,alertText:""},onlyChineseLetterNumber:{regex:/^[^#@$?%\^&*+=\\\/?;:"'`~, <>(){}\[\]|]*$/,alertText:""},ajaxUserCall:{url:"home",extraData:"name=eric",alertText:"* This user is already taken",alertTextLoad:"* Validating, please wait"},ajaxNameCall:{url:"ajaxtest.html",alertText:"* This name is already taken",alertTextOk:"* This name is available",alertTextLoad:"* Validating, please wait"},validate2fields:{alertText:"* Please input HELLO"}}}};a.validationEngineLanguage.newLang()})(jQuery);
(function(a3){function al(b,a){return function(c){return aX(b.call(this,c),a)}}function an(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function a8(){}function ay(a){at(this,a)}function ak(j){var m=this._data={},d=j.years||j.year||j.y||0,b=j.months||j.month||j.M||0,g=j.weeks||j.week||j.w||0,p=j.days||j.day||j.d||0,c=j.hours||j.hour||j.h||0,l=j.minutes||j.minute||j.m||0,k=j.seconds||j.second||j.s||0,h=j.milliseconds||j.millisecond||j.ms||0;this._milliseconds=h+k*1000+l*60000+c*3600000,this._days=p+g*7,this._months=b+d*12,m.milliseconds=h%1000,k+=aA(h/1000),m.seconds=k%60,l+=aA(k/60),m.minutes=l%60,c+=aA(l/60),m.hours=c%24,p+=aA(c/24),p+=g*7,m.days=p%30,b+=aA(p/30),m.months=b%12,d+=aA(b/12),m.years=d}function at(b,a){for(var c in a){a.hasOwnProperty(c)&&(b[c]=a[c])}return b}function aA(a){return a<0?Math.ceil(a):Math.floor(a)}function aX(b,a){var c=b+"";while(c.length<a){c="0"+c}return c}function aw(f,b,h){var d=b._milliseconds,a=b._days,c=b._months,g;d&&f._d.setTime(+f+d*h),a&&f.date(f.date()+a*h),c&&(g=f.date(),f.date(1).month(f.month()+c*h).date(Math.min(g,f.daysInMonth())))}function ar(a){return Object.prototype.toString.call(a)==="[object Array]"}function aO(f,b){var g=Math.min(f.length,b.length),d=Math.abs(f.length-b.length),a=0,c;for(c=0;c<g;c++){~~f[c]!==~~b[c]&&a++}return a+d}function ai(b,a){return a.abbr=b,aM[b]||(aM[b]=new a8),aM[b].set(a),aM[b]}function af(a){return a?(!aM[a]&&aR&&require("./lang/"+a),aM[a]):aL.fn._lang}function aF(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function ad(c){var a=c.match(a7),d,b;for(d=0,b=a.length;d<b;d++){aB[a[d]]?a[d]=aB[a[d]]:a[d]=aF(a[d])}return function(e){var f="";for(d=0;d<b;d++){f+=typeof a[d].call=="function"?a[d].call(e,c):a[d]}return f}}function ac(c,a){function b(e){return c.lang().longDateFormat(e)||e}var d=5;while(d--&&a1.test(a)){a=a.replace(a1,b)}return az[a]||(az[a]=ad(a)),az[a](c)}function ae(a){switch(a){case"DDDD":return aP;case"YYYY":return a4;case"YYYYY":return aJ;case"S":case"SS":case"SSS":case"DDD":return aZ;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return aT;case"X":return a6;case"Z":case"ZZ":return a0;case"T":return aG;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return a5;default:return new RegExp(a.replace("\\",""))}}function aE(f,b,g){var d,a,c=g._a;switch(f){case"M":case"MM":c[1]=b==null?0:~~b-1;break;case"MMM":case"MMMM":d=af(g._l).monthsParse(b),d!=null?c[1]=d:g._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":b!=null&&(c[2]=~~b);break;case"YY":c[0]=~~b+(~~b>68?1900:2000);break;case"YYYY":case"YYYYY":c[0]=~~b;break;case"a":case"A":g._isPm=(b+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b;break;case"S":case"SS":case"SSS":c[6]=~~(("0."+b)*1000);break;case"X":g._d=new Date(parseFloat(b)*1000);break;case"Z":case"ZZ":g._useUTC=!0,d=(b+"").match(aH),d&&d[1]&&(g._tzh=~~d[1]),d&&d[2]&&(g._tzm=~~d[2]),d&&d[0]==="+"&&(g._tzh=-g._tzh,g._tzm=-g._tzm)}b==null&&(g._isValid=!1)}function aq(c){var a,d,b=[];if(c._d){return}for(a=0;a<7;a++){c._a[a]=b[a]=c._a[a]==null?a===2?1:0:c._a[a]}b[3]+=c._tzh||0,b[4]+=c._tzm||0,d=new Date(0),c._useUTC?(d.setUTCFullYear(b[0],b[1],b[2]),d.setUTCHours(b[3],b[4],b[5],b[6])):(d.setFullYear(b[0],b[1],b[2]),d.setHours(b[3],b[4],b[5],b[6])),c._d=d}function ap(d){var b=d._f.match(a7),f=d._i,c,a;d._a=[];for(c=0;c<b.length;c++){a=(ae(b[c]).exec(f)||[])[0],a&&(f=f.slice(f.indexOf(a)+a.length)),aB[b[c]]&&aE(b[c],a,d)}d._isPm&&d._a[3]<12&&(d._a[3]+=12),d._isPm===!1&&d._a[3]===12&&(d._a[3]=0),aq(d)}function aj(g){var c,j,f,b=99,d,h,a;while(g._f.length){c=at({},g),c._f=g._f.pop(),ap(c),j=new ay(c);if(j.isValid()){f=j;break}a=aO(c._a,j.toArray()),a<b&&(b=a,f=j)}at(g,f)}function av(b){var a,c=b._i;if(aI.exec(c)){b._f="YYYY-MM-DDT";for(a=0;a<4;a++){if(ah[a][1].exec(c)){b._f+=ah[a][0];break}}a0.exec(c)&&(b._f+=" Z"),ap(b)}else{b._d=new Date(c)}}function ab(a){var c=a._i,b=aK.exec(c);c===a3?a._d=new Date:b?a._d=new Date(+b[1]):typeof c=="string"?av(a):ar(c)?(a._a=c.slice(0),aq(a)):a._d=c instanceof Date?new Date(+c):new Date(c)}function aa(d,b,f,c,a){return a.relativeTime(b||1,!!f,d,c)}function aQ(h,l,c){var d=aN(Math.abs(h)/1000),m=aN(d/60),b=aN(m/60),k=aN(b/24),j=aN(k/365),g=d<45&&["s",d]||m===1&&["m"]||m<45&&["mm",m]||b===1&&["h"]||b<22&&["hh",b]||k===1&&["d"]||k<=25&&["dd",k]||k<=45&&["M"]||k<345&&["MM",aN(k/30)]||j===1&&["y"]||["yy",j];return g[2]=l,g[3]=h>0,g[4]=c,aa.apply({},g)}function a2(d,f,c){var a=c-f,b=c-d.day();return b>a&&(b-=7),b<a-7&&(b+=7),Math.ceil(aL(d).add("d",b).dayOfYear()/7)}function aW(b){var c=b._i,a=b._f;return c===null||c===""?null:(typeof c=="string"&&(b._i=c=af().preparse(c)),aL.isMoment(c)?(b=at({},c),b._d=new Date(+c._d)):a?ar(a)?aj(b):ap(b):ab(b),new ay(b))}function aD(a,b){aL.fn[a]=aL.fn[a+"s"]=function(d){var c=this._isUTC?"UTC":"";return d!=null?(this._d["set"+c+b](d),this):this._d["get"+c+b]()}}function aC(a){aL.duration.fn[a]=function(){return this._data[a]}}function au(a,b){aL.duration.fn["as"+a]=function(){return +this/b}}var aL,aS="2.0.0",aN=Math.round,aY,aM={},aR=typeof module!="undefined"&&module.exports,aK=/^\/?Date\((\-?\d+)/i,a7=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,a1=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,aU=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,a5=/\d\d?/,aZ=/\d{1,3}/,aP=/\d{3}/,a4=/\d{1,4}/,aJ=/[+\-]?\d{1,6}/,aT=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,a0=/Z|[\+\-]\d\d:?\d\d/i,aG=/T/i,a6=/[\+\-]?\d+(\.\d{1,3})?/,aI=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ax="YYYY-MM-DDTHH:mm:ssZ",ah=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aH=/([\+\-]|\d\d)/gi,ag="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),am={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},az={},aV="DDD w W M D d".split(" "),ao="M D H h m s w W".split(" "),aB={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return aX(this.year()%100,2)},YYYY:function(){return aX(this.year(),4)},YYYYY:function(){return aX(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return aX(~~(this.milliseconds()/10),2)},SSS:function(){return aX(this.milliseconds(),3)},Z:function(){var b=-this.zone(),a="+";return b<0&&(b=-b,a="-"),a+aX(~~(b/60),2)+":"+aX(~~b%60,2)},ZZ:function(){var b=-this.zone(),a="+";return b<0&&(b=-b,a="-"),a+aX(~~(10*b/6),4)},X:function(){return this.unix()}};while(aV.length){aY=aV.pop(),aB[aY+"o"]=an(aB[aY])}while(ao.length){aY=ao.pop(),aB[aY+aY]=al(aB[aY],2)}aB.DDDD=al(aB.DDD,3),a8.prototype={set:function(b){var a,c;for(c in b){a=b[c],typeof a=="function"?this[c]=a:this["_"+c]=a}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(d){var f,c,a,b;this._monthsParse||(this._monthsParse=[]);for(f=0;f<12;f++){this._monthsParse[f]||(c=aL([2000,f]),a="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[f]=new RegExp(a.replace(".",""),"i"));if(this._monthsParse[f].test(d)){return f}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(b){var a=this._longDateFormat[b];return !a&&this._longDateFormat[b.toUpperCase()]&&(a=this._longDateFormat[b.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(c){return c.slice(1)}),this._longDateFormat[b]=a),a},meridiem:function(b,a,c){return b>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(b,a){var c=this._calendar[b];return typeof c=="function"?c.apply(a):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(d,b,f,c){var a=this._relativeTime[f];return typeof a=="function"?a(d,b,f,c):a.replace(/%d/i,d)},pastFuture:function(b,a){var c=this._relativeTime[b>0?"future":"past"];return typeof c=="function"?c(a):c.replace(/%s/i,a)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return a2(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},aL=function(b,a,c){return aW({_i:b,_f:a,_l:c,_isUTC:!1})},aL.utc=function(b,a,c){return aW({_useUTC:!0,_isUTC:!0,_l:c,_i:b,_f:a})},aL.unix=function(a){return aL(a*1000)},aL.duration=function(d,g){var c=aL.isDuration(d),a=typeof d=="number",b=c?d._data:a?{}:d,f;return a&&(g?b[g]=d:b.milliseconds=d),f=new ak(b),c&&d.hasOwnProperty("_lang")&&(f._lang=d._lang),f},aL.version=aS,aL.defaultFormat=ax,aL.lang=function(b,c){var a;if(!b){return aL.fn._lang._abbr}c?ai(b,c):aM[b]||af(b),aL.duration.fn._lang=aL.fn._lang=af(b)},aL.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),af(a)},aL.isMoment=function(a){return a instanceof ay},aL.isDuration=function(a){return a instanceof ak},aL.fn=ay.prototype={clone:function(){return aL(this)},valueOf:function(){return +this._d},unix:function(){return Math.floor(+this._d/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return aL.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return this._isValid==null&&(this._a?this._isValid=!aO(this._a,(this._isUTC?aL.utc(this._a):aL(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){var b=ac(this,a||aL.defaultFormat);return this.lang().postformat(b)},add:function(b,c){var a;return typeof b=="string"?a=aL.duration(+c,b):a=aL.duration(b,c),aw(this,a,1),this},subtract:function(b,c){var a;return typeof b=="string"?a=aL.duration(+c,b):a=aL.duration(b,c),aw(this,a,-1),this},diff:function(f,h,d){var b=this._isUTC?aL(f).utc():aL(f).local(),c=(this.zone()-b.zone())*60000,g,a;return h&&(h=h.replace(/s$/,"")),h==="year"||h==="month"?(g=(this.daysInMonth()+b.daysInMonth())*43200000,a=(this.year()-b.year())*12+(this.month()-b.month()),a+=(this-aL(this).startOf("month")-(b-aL(b).startOf("month")))/g,h==="year"&&(a/=12)):(g=this-b-c,a=h==="second"?g/1000:h==="minute"?g/60000:h==="hour"?g/3600000:h==="day"?g/86400000:h==="week"?g/604800000:g),d?a:aA(a)},from:function(a,b){return aL.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(aL(),a)},calendar:function(){var a=this.diff(aL().startOf("day"),"days",!0),b=a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<aL([this.year()]).zone()||this.zone()<aL([this.year(),5]).zone()},day:function(b){var a=this._isUTC?this._d.getUTCDay():this._d.getDay();return b==null?a:this.add({d:b-a})},startOf:function(a){a=a.replace(/s$/,"");switch(a){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return a==="week"&&this.day(0),this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){return b=typeof b!="undefined"?b:"millisecond",+this.clone().startOf(b)>+aL(a).startOf(b)},isBefore:function(a,b){return b=typeof b!="undefined"?b:"millisecond",+this.clone().startOf(b)<+aL(a).startOf(b)},isSame:function(a,b){return b=typeof b!="undefined"?b:"millisecond",+this.clone().startOf(b)===+aL(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return aL.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=aN((aL(this).startOf("day")-aL(this).startOf("year"))/86400000)+1;return a==null?b:this.add("d",a-b)},isoWeek:function(b){var a=a2(this,1,4);return b==null?a:this.add("d",(b-a)*7)},week:function(b){var a=this.lang().week(this);return b==null?a:this.add("d",(b-a)*7)},lang:function(a){return a===a3?this._lang:(this._lang=af(a),this)}};for(aY=0;aY<ag.length;aY++){aD(ag[aY].toLowerCase().replace(/s$/,""),ag[aY])}aD("year","FullYear"),aL.fn.days=aL.fn.day,aL.fn.weeks=aL.fn.week,aL.fn.isoWeeks=aL.fn.isoWeek,aL.duration.fn=ak.prototype={weeks:function(){return aA(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+this._months*2592000000},humanize:function(b){var a=+this,c=aQ(a,!b,this.lang());return b&&(c=this.lang().pastFuture(a,c)),this.lang().postformat(c)},lang:aL.fn.lang};for(aY in am){am.hasOwnProperty(aY)&&(au(aY,am[aY]),aC(aY.toLowerCase()))}au("Weeks",604800000),aL.lang("en",{ordinal:function(b){var a=b%10,c=~~(b%100/10)===1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th";return b+c}}),aR&&(module.exports=aL),typeof ender=="undefined"&&(this.moment=aL),typeof define=="function"&&define.amd&&define("moment",[],function(){return aL})}).call(this);
(function(){var b={months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT"},meridiem:function(e,d,f){return e<9?"":e<11&&d<30?"":e<13&&d<30?"":e<18?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"},ordinal:function(c){return""}};typeof module!="undefined"&&module.exports&&(module.exports=b),typeof window!="undefined"&&this.moment&&this.moment.lang&&this.moment.lang("zh-cn",b)})();
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(window.jQuery)}}}(function(M){var y=(function(){var aA=function(aB){return function(aC){return aB===aC}};var av=function(aC,aB){return aC===aB};var ao=function(aB){return function(aD,aC){return aD[aB]===aC[aB]}};var ax=function(){return true};var aq=function(){return false};var ap=function(aB){return function(){return !aB.apply(aB,arguments)}};var au=function(aC,aB){return function(aD){return aC(aD)&&aB(aD)}};var az=function(aB){return aB};var ar=function(aB,aC){return function(){return aB[aC].apply(aB,arguments)}};var an=0;var aw=function(aB){var aC=++an+"";return aB?aB+aC:aC};var am=function(aB){var aC=M(document);return{top:aB.top+aC.scrollTop(),left:aB.left+aC.scrollLeft(),width:aB.right-aB.left,height:aB.bottom-aB.top}};var at=function(aD){var aB={};for(var aC in aD){if(aD.hasOwnProperty(aC)){aB[aD[aC]]=aC}}return aB};var ay=function(aB,aC){aC=aC||"";return aC+aB.split(".").map(function(aD){return aD.substring(0,1).toUpperCase()+aD.substring(1)}).join("")};return{eq:aA,eq2:av,peq2:ao,ok:ax,fail:aq,self:az,not:ap,and:au,invoke:ar,uniqueId:aw,rect2bnd:am,invertObject:at,namespaceToCamel:ay}})();var z=(function(){var az=function(aD){return aD[0]};var aC=function(aD){return aD[aD.length-1]};var av=function(aD){return aD.slice(0,aD.length-1)};var aw=function(aD){return aD.slice(1)};var au=function(aH,aF){for(var aE=0,aD=aH.length;aE<aD;aE++){var aG=aH[aE];if(aF(aG)){return aG}}};var aB=function(aG,aF){for(var aE=0,aD=aG.length;aE<aD;aE++){if(!aF(aG[aE])){return false}}return true};var ay=function(aE,aD){return M.inArray(aD,aE)};var an=function(aE,aD){return ay(aE,aD)!==-1};var at=function(aE,aD){aD=aD||y.self;return aE.reduce(function(aG,aF){return aG+aD(aF)},0)};var aA=function(aG){var aE=[],aD=-1,aF=aG.length;while(++aD<aF){aE[aD]=aG[aD]}return aE};var aq=function(aD){return !aD||!aD.length};var ap=function(aF,aD){if(!aF.length){return[]}var aE=aw(aF);return aE.reduce(function(aI,aH){var aG=aC(aI);if(aD(aC(aG),aH)){aG[aG.length]=aH}else{aI[aI.length]=[aH]}return aI},[[az(aF)]])};var ax=function(aG){var aF=[];for(var aE=0,aD=aG.length;aE<aD;aE++){if(aG[aE]){aF.push(aG[aE])}}return aF};var ao=function(aG){var aF=[];for(var aE=0,aD=aG.length;aE<aD;aE++){if(!an(aF,aG[aE])){aF.push(aG[aE])}}return aF};var ar=function(aF,aE){var aD=ay(aF,aE);if(aD===-1){return null}return aF[aD+1]};var am=function(aF,aE){var aD=ay(aF,aE);if(aD===-1){return null}return aF[aD-1]};return{head:az,last:aC,initial:av,tail:aw,prev:am,next:ar,find:au,contains:an,all:aB,sum:at,from:aA,isEmpty:aq,clusterBy:ap,compact:ax,unique:ao}})();var E=typeof define==="function"&&define.amd;var o=function(ao){var aq=ao==="Comic Sans MS"?"Courier New":"Comic Sans MS";var am=M("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var ap=am.css("fontFamily",aq).width();var an=am.css("fontFamily",ao+","+aq).width();am.remove();return ap!==an};var N=navigator.userAgent;var j=/MSIE|Trident/i.test(N);var Z;if(j){var c=/MSIE (\d+[.]\d+)/.exec(N);if(c){Z=parseFloat(c[1])}c=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N);if(c){Z=parseFloat(c[1])}}var ai={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:j,isFF:/firefox/i.test(N),isWebkit:/webkit/i.test(N),isSafari:/safari/i.test(N),browserVersion:Z,jqueryVersion:parseFloat(M.fn.jquery),isSupportAmd:E,hasCodeMirror:E?require.specified("codemirror"):!!window.CodeMirror,isFontInstalled:o,isW3CRangeSupport:!!document.createRange};var al=String.fromCharCode(160);var X="\ufeff";var d=(function(){var bc=function(bx){return bx&&M(bx).hasClass("note-editable")};var bt=function(bx){return bx&&M(bx).hasClass("note-control-sizing")};var aX=function(bx){bx=bx.toUpperCase();return function(by){return by&&by.nodeName.toUpperCase()===bx}};var a8=function(bx){return bx&&bx.nodeType===3};var a9=function(bx){return bx&&bx.nodeType===1};var bq=function(bx){return bx&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(bx.nodeName.toUpperCase())};var bh=function(bx){if(bc(bx)){return false}return bx&&/^DIV|^P|^LI|^H[1-7]/.test(bx.nodeName.toUpperCase())};var aR=function(bx){return bx&&/^H[1-7]/.test(bx.nodeName.toUpperCase())};var bb=aX("PRE");var aF=aX("LI");var ba=function(bx){return bh(bx)&&!aF(bx)};var bm=aX("TABLE");var aN=function(bx){return !aI(bx)&&!aw(bx)&&!bo(bx)&&!bh(bx)&&!bm(bx)&&!bk(bx)};var aw=function(bx){return bx&&/^UL|^OL/.test(bx.nodeName.toUpperCase())};var bo=aX("HR");var aB=function(bx){return bx&&/^TD|^TH/.test(bx.nodeName.toUpperCase())};var bk=aX("BLOCKQUOTE");var aI=function(bx){return aB(bx)||bk(bx)||bc(bx)};var a7=aX("A");var ao=function(bx){return aN(bx)&&!!bl(bx,bh)};var aO=function(bx){return aN(bx)&&!bl(bx,bh)};var ar=aX("BODY");var be=function(by,bx){return by.nextSibling===bx||by.previousSibling===bx};var aP=function(by,bx){bx=bx||y.ok;var bz=[];if(by.previousSibling&&bx(by.previousSibling)){bz.push(by.previousSibling)}bz.push(by);if(by.nextSibling&&bx(by.nextSibling)){bz.push(by.nextSibling)}return bz};var aS=ai.isMSIE&&ai.browserVersion<11?"&nbsp;":"<br>";var bu=function(bx){if(a8(bx)){return bx.nodeValue.length}return bx.childNodes.length};var av=function(by){var bx=bu(by);if(bx===0){return true}else{if(!a8(by)&&bx===1&&by.innerHTML===aS){return true}else{if(z.all(by.childNodes,a8)&&by.innerHTML===""){return true}}}return false};var bw=function(bx){if(!bq(bx)&&!bu(bx)){bx.innerHTML=aS}};var bl=function(by,bx){while(by){if(bx(by)){return by}if(bc(by)){break}by=by.parentNode}return null};var aD=function(by,bx){by=by.parentNode;while(by){if(bu(by)!==1){break}if(bx(by)){return by}if(bc(by)){break}by=by.parentNode}return null};var aL=function(bz,bx){bx=bx||y.fail;var by=[];bl(bz,function(bA){if(!bc(bA)){by.push(bA)}return bx(bA)});return by};var aE=function(bz,bx){var by=aL(bz);return z.last(by.filter(bx))};var a6=function(bz,by){var bx=aL(bz);for(var bA=by;bA;bA=bA.parentNode){if(M.inArray(bA,bx)>-1){return bA}}return null};var aJ=function(bz,by){by=by||y.fail;var bx=[];while(bz){if(by(bz)){break}bx.push(bz);bz=bz.previousSibling}return bx};var a2=function(bz,by){by=by||y.fail;var bx=[];while(bz){if(by(bz)){break}bx.push(bz);bz=bz.nextSibling}return bx};var ap=function(by,bx){var bA=[];bx=bx||y.ok;(function bz(bD){if(by!==bD&&bx(bD)){bA.push(bD)}for(var bC=0,bB=bD.childNodes.length;bC<bB;bC++){bz(bD.childNodes[bC])}})(by);return bA};var aC=function(bz,by){var bx=bz.parentNode;var bA=M("<"+by+">")[0];bx.insertBefore(bA,bz);bA.appendChild(bz);return bA};var aH=function(bA,bz){var by=bz.nextSibling,bx=bz.parentNode;if(by){bx.insertBefore(bA,by)}else{bx.appendChild(bA)}return bA};var aT=function(bx,by){M.each(by,function(bz,bA){bx.appendChild(bA)});return bx};var bs=function(bx){return bx.offset===0};var bd=function(bx){return bx.offset===bu(bx.node)};var bi=function(bx){return bs(bx)||bd(bx)};var at=function(by,bx){while(by&&by!==bx){if(bg(by)!==0){return false}by=by.parentNode}return true};var au=function(by,bx){while(by&&by!==bx){if(bg(by)!==bu(by.parentNode)-1){return false}by=by.parentNode}return true};var bv=function(bx,by){return bs(bx)&&at(bx.node,by)};var aG=function(bx,by){return bd(bx)&&au(bx.node,by)};var bg=function(bx){var by=0;while((bx=bx.previousSibling)){by+=1}return by};var am=function(bx){return !!(bx&&bx.childNodes&&bx.childNodes.length)};var ax=function(bx,by){var bz,bA;if(bx.offset===0){if(bc(bx.node)){return null}bz=bx.node.parentNode;bA=bg(bx.node)}else{if(am(bx.node)){bz=bx.node.childNodes[bx.offset-1];bA=bu(bz)}else{bz=bx.node;bA=by?0:bx.offset-1}}return{node:bz,offset:bA}};var aV=function(bx,by){var bz,bA;if(bu(bx.node)===bx.offset){if(bc(bx.node)){return null}bz=bx.node.parentNode;bA=bg(bx.node)+1}else{if(am(bx.node)){bz=bx.node.childNodes[bx.offset];bA=0}else{bz=bx.node;bA=by?bu(bx.node):bx.offset+1}}return{node:bz,offset:bA}};var bp=function(bx,by){return bx.node===by.node&&bx.offset===by.offset};var aM=function(bx){if(a8(bx.node)||!am(bx.node)||av(bx.node)){return true}var bz=bx.node.childNodes[bx.offset-1];var by=bx.node.childNodes[bx.offset];if((!bz||bq(bz))&&(!by||bq(by))){return true}return false};var aZ=function(bx,by){while(bx){if(by(bx)){return bx}bx=ax(bx)}return null};var aK=function(bx,by){while(bx){if(by(bx)){return bx}bx=aV(bx)}return null};var bf=function(bx){if(!a8(bx.node)){return false}var by=bx.node.nodeValue.charAt(bx.offset-1);return by&&(by!==" "&&by!==al)};var a4=function(bC,bz,bA,by){var bx=bC;while(bx){bA(bx);if(bp(bx,bz)){break}var bB=by&&bC.node!==bx.node&&bz.node!==bx.node;bx=aV(bx,bB)}};var a1=function(bx,bz){var by=aL(bz,y.eq(bx));return by.map(bg).reverse()};var br=function(bz,bA){var bB=bz;for(var by=0,bx=bA.length;by<bx;by++){if(bB.childNodes.length<=bA[by]){bB=bB.childNodes[bB.childNodes.length-1]}else{bB=bB.childNodes[bA[by]]}}return bB};var ay=function(bx,bz){var bB=bz&&bz.isSkipPaddingBlankHTML;var by=bz&&bz.isNotSplitEdgePoint;if(bi(bx)&&(a8(bx.node)||by)){if(bs(bx)){return bx.node}else{if(bd(bx)){return bx.node.nextSibling}}}if(a8(bx.node)){return bx.node.splitText(bx.offset)}else{var bA=bx.node.childNodes[bx.offset];var bC=aH(bx.node.cloneNode(false),bx.node);aT(bC,a2(bA));if(!bB){bw(bx.node);bw(bC)}return bC}};var aq=function(by,bx,bz){var bA=aL(bx.node,y.eq(by));if(!bA.length){return null}else{if(bA.length===1){return ay(bx,bz)}}return bA.reduce(function(bC,bB){if(bC===bx.node){bC=ay(bx,bz)}return ay({node:bB,offset:bC?d.position(bC):bu(bB)},bz)})};var az=function(bx,bC){var bA=bC?bh:aI;var bB=aL(bx.node,bA);var bE=z.last(bB)||bx.node;var bD,bz;if(bA(bE)){bD=bB[bB.length-2];bz=bE}else{bD=bE;bz=bD.parentNode}var by=bD&&aq(bD,bx,{isSkipPaddingBlankHTML:bC,isNotSplitEdgePoint:bC});if(!by&&bz===bx.node){by=bx.node.childNodes[bx.offset]}return{rightNode:by,container:bz}};var aA=function(bx){return document.createElement(bx)};var a5=function(bx){return document.createTextNode(bx)};var aU=function(bB,bC){if(!bB||!bB.parentNode){return}if(bB.removeNode){return bB.removeNode(bC)}var bA=bB.parentNode;if(!bC){var by=[];var bz,bx;for(bz=0,bx=bB.childNodes.length;bz<bx;bz++){by.push(bB.childNodes[bz])}for(bz=0,bx=by.length;bz<bx;bz++){bA.insertBefore(by[bz],bB)}}bA.removeChild(bB)};var an=function(bz,bx){while(bz){if(bc(bz)||!bx(bz)){break}var by=bz.parentNode;aU(bz);bz=by}};var aY=function(by,bz){if(by.nodeName.toUpperCase()===bz.toUpperCase()){return by}var bx=aA(bz);if(by.style.cssText){bx.style.cssText=by.style.cssText}aT(bx,z.from(by.childNodes));aH(bx,by);aU(by);return bx};var aW=aX("TEXTAREA");var aQ=function(by,bx){var bz=aW(by[0])?by.val():by.html();if(bx){return bz.replace(/[\n\r]/g,"")}return bz};var bn=function(by,bz){var bx=aQ(by);if(bz){var bA=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;bx=bx.replace(bA,function(bC,bF,bB){bB=bB.toUpperCase();var bE=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(bB)&&!!bF;var bD=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(bB);return bC+((bE||bD)?"\n":"")});bx=M.trim(bx)}return bx};var a0=function(bz){var by=M(bz);var bA=by.offset();var bx=by.outerHeight(true);return{left:bA.left,top:bA.top+bx}};var bj=function(bx,by){Object.keys(by).forEach(function(bz){bx.on(bz,by[bz])})};var a3=function(bx,by){Object.keys(by).forEach(function(bz){bx.off(bz,by[bz])})};return{NBSP_CHAR:al,ZERO_WIDTH_NBSP_CHAR:X,blank:aS,emptyPara:"<p>"+aS+"</p>",makePredByNodeName:aX,isEditable:bc,isControlSizing:bt,isText:a8,isElement:a9,isVoid:bq,isPara:bh,isPurePara:ba,isHeading:aR,isInline:aN,isBlock:y.not(aN),isBodyInline:aO,isBody:ar,isParaInline:ao,isPre:bb,isList:aw,isTable:bm,isCell:aB,isBlockquote:bk,isBodyContainer:aI,isAnchor:a7,isDiv:aX("DIV"),isLi:aF,isBR:aX("BR"),isSpan:aX("SPAN"),isB:aX("B"),isU:aX("U"),isS:aX("S"),isI:aX("I"),isImg:aX("IMG"),isTextarea:aW,isEmpty:av,isEmptyAnchor:y.and(a7,av),isClosestSibling:be,withClosestSiblings:aP,nodeLength:bu,isLeftEdgePoint:bs,isRightEdgePoint:bd,isEdgePoint:bi,isLeftEdgeOf:at,isRightEdgeOf:au,isLeftEdgePointOf:bv,isRightEdgePointOf:aG,prevPoint:ax,nextPoint:aV,isSamePoint:bp,isVisiblePoint:aM,prevPointUntil:aZ,nextPointUntil:aK,isCharPoint:bf,walkPoint:a4,ancestor:bl,singleChildAncestor:aD,listAncestor:aL,lastAncestor:aE,listNext:a2,listPrev:aJ,listDescendant:ap,commonAncestor:a6,wrap:aC,insertAfter:aH,appendChildNodes:aT,position:bg,hasChildren:am,makeOffsetPath:a1,fromOffsetPath:br,splitTree:aq,splitPoint:az,create:aA,createText:a5,remove:aU,removeWhile:an,replace:aY,html:bn,value:aQ,posFromPlaceholder:a0,attachEvents:bj,detachEvents:a3}})();var ah=function(am,ao){var an=this;var ap=M.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=ao;this.initialize=function(){this.layoutInfo=ap.createLayout(am,ao);this._initialize();am.hide();return this};this.destroy=function(){this._destroy();am.removeData("summernote");ap.removeLayout(am,this.layoutInfo)};this.reset=function(){this.code(d.emptyPara);this._destroy();this._initialize()};this._initialize=function(){var ar=M.extend({},this.options.buttons);Object.keys(ar).forEach(function(at){an.memo("button."+at,ar[at])});var aq=M.extend({},this.options.modules,M.summernote.plugins||{});Object.keys(aq).forEach(function(at){an.module(at,aq[at],true)});Object.keys(this.modules).forEach(function(at){an.initializeModule(at)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(aq){an.removeModule(aq)});Object.keys(this.memos).forEach(function(aq){an.removeMemo(aq)})};this.code=function(ar){var aq=this.invoke("codeview.isActivated");if(ar===undefined){this.invoke("codeview.sync");return aq?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(aq){this.layoutInfo.codable.val(ar)}else{this.layoutInfo.editable.html(ar)}am.val(ar);this.triggerEvent("change",ar)}};this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true)};this.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true)};this.triggerEvent=function(){var ar=z.head(arguments);var aq=z.tail(z.from(arguments));var at=this.options.callbacks[y.namespaceToCamel(ar,"on")];if(at){at.apply(am[0],aq)}am.trigger("summernote."+ar,aq)};this.initializeModule=function(ar){var aq=this.modules[ar];aq.shouldInitialize=aq.shouldInitialize||y.ok;if(!aq.shouldInitialize()){return}if(aq.initialize){aq.initialize()}if(aq.events){d.attachEvents(am,aq.events)}};this.module=function(at,ar,aq){if(arguments.length===1){return this.modules[at]}this.modules[at]=new ar(this);if(!aq){this.initializeModule(at)}};this.removeModule=function(ar){var aq=this.modules[ar];if(aq.shouldInitialize()){if(aq.events){d.detachEvents(am,aq.events)}if(aq.destroy){aq.destroy()}}delete this.modules[ar]};this.memo=function(aq,ar){if(arguments.length===1){return this.memos[aq]}this.memos[aq]=ar};this.removeMemo=function(aq){if(this.memos[aq]&&this.memos[aq].destroy){this.memos[aq].destroy()}delete this.memos[aq]};this.createInvokeHandler=function(aq,ar){return function(at){at.preventDefault();an.invoke(aq,ar||M(at.target).closest("[data-value]").data("value"))}};this.invoke=function(){var av=z.head(arguments);var at=z.tail(z.from(arguments));var ax=av.split(".");var aw=ax.length>1;var ar=aw&&z.head(ax);var aq=aw?z.last(ax):z.head(ax);var au=this.modules[ar||"editor"];if(!ar&&this[aq]){return this[aq].apply(this,at)}else{if(au&&au[aq]&&au.shouldInitialize()){return au[aq].apply(au,at)}}};return this.initialize()};M.summernote=M.summernote||{lang:{}};M.fn.extend({summernote:function(){var ap=M.type(z.head(arguments));var ar=ap==="string";var aq=ap==="object";var an=aq?z.head(arguments):{};an=M.extend({},M.summernote.options,an);an.langInfo=M.extend(true,{},M.summernote.lang["en-US"],M.summernote.lang[an.lang]);this.each(function(at,aw){var au=M(aw);if(!au.data("summernote")){var av=new ah(au,an);au.data("summernote",av);au.data("summernote").triggerEvent("init",av.layoutInfo)}});var am=this.first();if(am.length){var ao=am.data("summernote");if(ar){return ao.invoke.apply(ao,z.from(arguments))}else{if(an.focus){ao.invoke("editor.focus")}}}return this}});var i=function(am,ao,an,ap){this.render=function(ar){var aq=M(am);if(an&&an.contents){aq.html(an.contents)}if(an&&an.className){aq.addClass(an.className)}if(an&&an.data){M.each(an.data,function(av,au){aq.attr("data-"+av,au)})}if(an&&an.click){aq.on("click",an.click)}if(ao){var at=aq.find(".note-children-container");ao.forEach(function(au){au.render(at.length?at:aq)})}if(ap){ap(aq,an)}if(an&&an.callback){an.callback(aq)}if(ar){ar.append(aq)}return aq}};var Q={create:function(am,an){return function(){var ap=M.isArray(arguments[0])?arguments[0]:[];var ao=typeof arguments[1]==="object"?arguments[1]:arguments[0];if(ao&&ao.children){ap=ao.children}return new i(am,ap,ao,an)}}};var b=Q.create('<div class="note-editor note-frame panel panel-default"/>');var v=Q.create('<div class="note-toolbar panel-heading"/>');var e=Q.create('<div class="note-editing-area"/>');var u=Q.create('<textarea class="note-codable"/>');var U=Q.create('<div class="note-editable panel-body" contentEditable="true"/>');var l=Q.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var r=Q.create('<div class="note-editor"/>');var a=Q.create('<div class="note-editable" contentEditable="true"/>');var aa=Q.create('<div class="note-btn-group btn-group">');var w=Q.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(am,an){if(an&&an.tooltip){am.attr({title:an.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}});var aj=Q.create('<div class="dropdown-menu">',function(an,ao){var am=M.isArray(ao.items)?ao.items.map(function(aq){var ar=(typeof aq==="string")?aq:(aq.value||"");var ap=ao.template?ao.template(aq):aq;return'<li><a href="#" data-value="'+ar+'">'+ap+"</a></li>"}).join(""):ao.items;an.html(am)});var ab=Q.create('<div class="dropdown-menu note-check">',function(an,ao){var am=M.isArray(ao.items)?ao.items.map(function(aq){var ar=(typeof aq==="string")?aq:(aq.value||"");var ap=ao.template?ao.template(aq):aq;return'<li><a href="#" data-value="'+ar+'">'+q(ao.checkClassName)+" "+ap+"</a></li>"}).join(""):ao.items;an.html(am)});var ag=Q.create('<div class="note-color-palette"/>',function(an,ax){var ap=[];for(var aw=0,av=ax.colors.length;aw<av;aw++){var ar=ax.eventName;var am=ax.colors[aw];var at=[];for(var ao=0,au=am.length;ao<au;ao++){var aq=am[ao];at.push(['<button type="button" class="note-color-btn"','style="background-color:',aq,'" ','data-event="',ar,'" ','data-value="',aq,'" ','title="',aq,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}ap.push('<div class="note-color-row">'+at.join("")+"</div>")}an.html(ap.join(""));an.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})});var ae=Q.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(am,an){if(an.fade){am.addClass("fade")}am.html(['<div class="modal-dialog">','  <div class="modal-content">',(an.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+an.title+"</h4>    </div>":""),'    <div class="modal-body">'+an.body+"</div>",(an.footer?'    <div class="modal-footer">'+an.footer+"</div>":""),"  </div>","</div>"].join(""))});var O=Q.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(am,an){var ao=typeof an.direction!=="undefined"?an.direction:"bottom";am.addClass(ao);if(an.hideArrow){am.find(".arrow").hide()}});var q=function(an,am){am=am||"i";return"<"+am+' class="'+an+'"/>'};var S={editor:b,toolbar:v,editingArea:e,codable:u,editable:U,statusbar:l,airEditor:r,airEditable:a,buttonGroup:aa,button:w,dropdown:aj,dropdownCheck:ab,palette:ag,dialog:ae,popover:O,icon:q,toggleBtn:function(an,am){an.toggleClass("disabled",!am);an.attr("disabled",!am)},toggleBtnActive:function(an,am){an.toggleClass("active",am)},onDialogShown:function(an,am){an.one("shown.bs.modal",am)},onDialogHidden:function(an,am){an.one("hidden.bs.modal",am)},showDialog:function(am){am.modal("show")},hideDialog:function(am){am.modal("hide")},createLayout:function(am,an){var ao=(an.airMode?S.airEditor([S.editingArea([S.airEditable()])]):S.editor([S.toolbar(),S.editingArea([S.codable(),S.editable()]),S.statusbar()])).render();ao.insertAfter(am);return{note:am,editor:ao,toolbar:ao.find(".note-toolbar"),editingArea:ao.find(".note-editing-area"),editable:ao.find(".note-editable"),codable:ao.find(".note-codable"),statusbar:ao.find(".note-statusbar")}},removeLayout:function(am,an){am.html(an.editable.html());an.editor.remove();am.show()}};M.extend(M.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var x=(function(){var am={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(an){return z.contains([am.BACKSPACE,am.TAB,am.ENTER,am.SPACe],an)},isMove:function(an){return z.contains([am.LEFT,am.UP,am.RIGHT,am.DOWN],an)},nameFromCode:y.invertObject(am),code:am}})();var n=(function(){var ao=function(aA,ap){var at=aA.parentElement(),av;var az=document.body.createTextRange(),ax;var ay=z.from(at.childNodes);for(av=0;av<ay.length;av++){if(d.isText(ay[av])){continue}az.moveToElementText(ay[av]);if(az.compareEndPoints("StartToStart",aA)>=0){break}ax=ay[av]}if(av!==0&&d.isText(ay[av-1])){var aB=document.body.createTextRange(),aw=null;aB.moveToElementText(ax||at);aB.collapse(!ax);aw=ax?ax.nextSibling:at.firstChild;var ar=aA.duplicate();ar.setEndPoint("StartToStart",aB);var aq=ar.text.replace(/[\r\n]/g,"").length;while(aq>aw.nodeValue.length&&aw.nextSibling){aq-=aw.nodeValue.length;aw=aw.nextSibling}var au=aw.nodeValue;if(ap&&aw.nextSibling&&d.isText(aw.nextSibling)&&aq===aw.nodeValue.length){aq-=aw.nodeValue.length;aw=aw.nextSibling}at=aw;av=aq}return{cont:at,offset:av}};var am=function(ap){var at=function(aw,az){var ay,av;if(d.isText(aw)){var au=d.listPrev(aw,y.not(d.isText));var ax=z.last(au).previousSibling;ay=ax||aw.parentNode;az+=z.sum(z.tail(au),d.nodeLength);av=!ax}else{ay=aw.childNodes[az]||aw;if(d.isText(ay)){return at(ay,0)}az=0;av=false}return{node:ay,collapseToStart:av,offset:az}};var aq=document.body.createTextRange();var ar=at(ap.node,ap.offset);aq.moveToElementText(ar.node);aq.collapse(ar.collapseToStart);aq.moveStart("character",ar.offset);return aq};var an=function(av,au,aq,ap){this.sc=av;this.so=au;this.ec=aq;this.eo=ap;var at=function(){if(ai.isW3CRangeSupport){var aw=document.createRange();aw.setStart(av,au);aw.setEnd(aq,ap);return aw}else{var ax=am({node:av,offset:au});ax.setEndPoint("EndToEnd",am({node:aq,offset:ap}));return ax}};this.getPoints=function(){return{sc:av,so:au,ec:aq,eo:ap}};this.getStartPoint=function(){return{node:av,offset:au}};this.getEndPoint=function(){return{node:aq,offset:ap}};this.select=function(){var ax=at();if(ai.isW3CRangeSupport){var aw=document.getSelection();if(aw.rangeCount>0){aw.removeAllRanges()}aw.addRange(ax)}else{ax.select()}return this};this.scrollIntoView=function(aw){if(aw[0].scrollTop+aw.height()<this.sc.offsetTop){aw[0].scrollTop+=Math.abs(aw[0].scrollTop+aw.height()-this.sc.offsetTop)}return this};this.normalize=function(){var ay=function(az,aA){if((d.isVisiblePoint(az)&&!d.isEdgePoint(az))||(d.isVisiblePoint(az)&&d.isRightEdgePoint(az)&&!aA)||(d.isVisiblePoint(az)&&d.isLeftEdgePoint(az)&&aA)||(d.isVisiblePoint(az)&&d.isBlock(az.node)&&d.isEmpty(az.node))){return az}var aC=d.ancestor(az.node,d.isBlock);if(((d.isLeftEdgePointOf(az,aC)||d.isVoid(d.prevPoint(az).node))&&!aA)||((d.isRightEdgePointOf(az,aC)||d.isVoid(d.nextPoint(az).node))&&aA)){if(d.isVisiblePoint(az)){return az}aA=!aA}var aB=aA?d.nextPointUntil(d.nextPoint(az),d.isVisiblePoint):d.prevPointUntil(d.prevPoint(az),d.isVisiblePoint);return aB||az};var aw=ay(this.getEndPoint(),false);var ax=this.isCollapsed()?aw:ay(this.getStartPoint(),true);return new an(ax.node,ax.offset,aw.node,aw.offset)};this.nodes=function(ay,az){ay=ay||y.ok;var aw=az&&az.includeAncestor;var aD=az&&az.fullyContains;var aB=this.getStartPoint();var aA=this.getEndPoint();var ax=[];var aC=[];d.walkPoint(aB,aA,function(aE){if(d.isEditable(aE.node)){return}var aF;if(aD){if(d.isLeftEdgePoint(aE)){aC.push(aE.node)}if(d.isRightEdgePoint(aE)&&z.contains(aC,aE.node)){aF=aE.node}}else{if(aw){aF=d.ancestor(aE.node,ay)}else{aF=aE.node}}if(aF&&ay(aF)){ax.push(aF)}},true);return z.unique(ax)};this.commonAncestor=function(){return d.commonAncestor(av,aq)};this.expand=function(aw){var ay=d.ancestor(av,aw);var az=d.ancestor(aq,aw);if(!ay&&!az){return new an(av,au,aq,ap)}var ax=this.getPoints();if(ay){ax.sc=ay;ax.so=0}if(az){ax.ec=az;ax.eo=d.nodeLength(az)}return new an(ax.sc,ax.so,ax.ec,ax.eo)};this.collapse=function(aw){if(aw){return new an(av,au,av,au)}else{return new an(aq,ap,aq,ap)}};this.splitText=function(){var aw=av===aq;var ax=this.getPoints();if(d.isText(aq)&&!d.isEdgePoint(this.getEndPoint())){aq.splitText(ap)}if(d.isText(av)&&!d.isEdgePoint(this.getStartPoint())){ax.sc=av.splitText(au);ax.so=0;if(aw){ax.ec=ax.sc;ax.eo=ap-au}}return new an(ax.sc,ax.so,ax.ec,ax.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var ax=this.splitText();var ay=ax.nodes(null,{fullyContains:true});var aw=d.prevPointUntil(ax.getStartPoint(),function(aA){return !z.contains(ay,aA.node)});var az=[];M.each(ay,function(aA,aC){var aB=aC.parentNode;if(aw.node!==aB&&d.nodeLength(aB)===1){az.push(aB)}d.remove(aC,false)});M.each(az,function(aA,aB){d.remove(aB,false)});return new an(aw.node,aw.offset,aw.node,aw.offset).normalize()};var ar=function(aw){return function(){var ax=d.ancestor(av,aw);return !!ax&&(ax===d.ancestor(aq,aw))}};this.isOnEditable=ar(d.isEditable);this.isOnList=ar(d.isList);this.isOnAnchor=ar(d.isAnchor);this.isOnCell=ar(d.isCell);this.isLeftEdgeOf=function(aw){if(!d.isLeftEdgePoint(this.getStartPoint())){return false}var ax=d.ancestor(this.sc,aw);return ax&&d.isLeftEdgeOf(this.sc,ax)};this.isCollapsed=function(){return av===aq&&au===ap};this.wrapBodyInlineWithPara=function(){if(d.isBodyContainer(av)&&d.isEmpty(av)){av.innerHTML=d.emptyPara;return new an(av.firstChild,0,av.firstChild,0)}var ax=this.normalize();if(d.isParaInline(av)||d.isPara(av)){return ax}var aA;if(d.isInline(ax.sc)){var ay=d.listAncestor(ax.sc,y.not(d.isInline));aA=z.last(ay);if(!d.isInline(aA)){aA=ay[ay.length-2]||ax.sc.childNodes[ax.so]}}else{aA=ax.sc.childNodes[ax.so>0?ax.so-1:0]}var az=d.listPrev(aA,d.isParaInline).reverse();az=az.concat(d.listNext(aA.nextSibling,d.isParaInline));if(az.length){var aw=d.wrap(z.head(az),"p");d.appendChildNodes(aw,z.tail(az))}return this.normalize()};this.insertNode=function(ax){var aw=this.wrapBodyInlineWithPara().deleteContents();var ay=d.splitPoint(aw.getStartPoint(),d.isInline(ax));if(ay.rightNode){ay.rightNode.parentNode.insertBefore(ax,ay.rightNode)}else{ay.container.appendChild(ax)}return ax};this.pasteHTML=function(ay){var ax=M("<div></div>").html(ay)[0];var az=z.from(ax.childNodes);var aw=this.wrapBodyInlineWithPara().deleteContents();return az.reverse().map(function(aA){return aw.insertNode(aA)}).reverse()};this.toString=function(){var aw=at();return ai.isW3CRangeSupport?aw.toString():aw.text};this.getWordRange=function(ay){var aw=this.getEndPoint();if(!d.isCharPoint(aw)){return this}var ax=d.prevPointUntil(aw,function(az){return !d.isCharPoint(az)});if(ay){aw=d.nextPointUntil(aw,function(az){return !d.isCharPoint(az)})}return new an(ax.node,ax.offset,aw.node,aw.offset)};this.bookmark=function(aw){return{s:{path:d.makeOffsetPath(aw,av),offset:au},e:{path:d.makeOffsetPath(aw,aq),offset:ap}}};this.paraBookmark=function(aw){return{s:{path:z.tail(d.makeOffsetPath(z.head(aw),av)),offset:au},e:{path:z.tail(d.makeOffsetPath(z.last(aw),aq)),offset:ap}}};this.getClientRects=function(){var aw=at();return aw.getClientRects()}};return{create:function(av,ar,au,ap){if(!arguments.length){if(ai.isW3CRangeSupport){var ay=document.getSelection();if(!ay||ay.rangeCount===0){return null}else{if(d.isBody(ay.anchorNode)){return null}}var ax=ay.getRangeAt(0);av=ax.startContainer;ar=ax.startOffset;au=ax.endContainer;ap=ax.endOffset}else{var aA=document.selection.createRange();var at=aA.duplicate();at.collapse(false);var az=aA;az.collapse(true);var aq=ao(az,true),aw=ao(at,false);if(d.isText(aq.node)&&d.isLeftEdgePoint(aq)&&d.isTextNode(aw.node)&&d.isRightEdgePoint(aw)&&aw.node.nextSibling===aq.node){aq=aw}av=aq.cont;ar=aq.offset;au=aw.cont;ap=aw.offset}}else{if(arguments.length===2){au=av;ap=ar}}return new an(av,ar,au,ap)},createFromNode:function(ar){var au=ar;var at=0;var aq=ar;var ap=d.nodeLength(aq);if(d.isVoid(au)){at=d.listPrev(au).length-1;au=au.parentNode}if(d.isBR(aq)){ap=d.listPrev(aq).length-1;aq=aq.parentNode}else{if(d.isVoid(aq)){ap=d.listPrev(aq).length;aq=aq.parentNode}}return this.create(au,at,aq,ap)},createFromNodeBefore:function(ap){return this.createFromNode(ap).collapse(true)},createFromNodeAfter:function(ap){return this.createFromNode(ap).collapse()},createFromBookmark:function(ar,at){var av=d.fromOffsetPath(ar,at.s.path);var au=at.s.offset;var aq=d.fromOffsetPath(ar,at.e.path);var ap=at.e.offset;return new an(av,au,aq,ap)},createFromParaBookmark:function(at,ar){var au=at.s.offset;var ap=at.e.offset;var av=d.fromOffsetPath(z.head(ar),at.s.path);var aq=d.fromOffsetPath(z.last(ar),at.e.path);return new an(av,au,aq,ap)}}})();var R=(function(){var am=function(ao){return M.Deferred(function(ap){M.extend(new FileReader(),{onload:function(aq){var ar=aq.target.result;ap.resolve(ar)},onerror:function(){ap.reject(this)}}).readAsDataURL(ao)}).promise()};var an=function(ao){return M.Deferred(function(ap){var aq=M("<img>");aq.one("load",function(){aq.off("error abort");ap.resolve(aq)}).one("error abort",function(){aq.off("load").detach();ap.reject(aq)}).css({display:"none"}).appendTo(document.body).attr("src",ao)}).promise()};return{readFileAsDataURL:am,createImage:an}})();var m=function(ap){var an=[],ao=-1;var aq=ap[0];var am=function(){var at=n.create();var au={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:ap.html(),bookmark:(at?at.bookmark(aq):au)}};var ar=function(at){if(at.contents!==null){ap.html(at.contents)}if(at.bookmark!==null){n.createFromBookmark(aq,at.bookmark).select()}};this.rewind=function(){if(ap.html()!==an[ao].contents){this.recordUndo()}ao=0;ar(an[ao])};this.reset=function(){an=[];ao=-1;ap.html("");this.recordUndo()};this.undo=function(){if(ap.html()!==an[ao].contents){this.recordUndo()}if(0<ao){ao--;ar(an[ao])}};this.redo=function(){if(an.length-1>ao){ao++;ar(an[ao])}};this.recordUndo=function(){ao++;if(an.length>ao){an=an.slice(0,ao)}an.push(am())}};var K=function(){var am=function(ap,ao){if(ai.jqueryVersion<1.9){var an={};M.each(ao,function(aq,ar){an[ar]=ap.css(ar)});return an}return ap.css.call(ap,ao)};this.fromNode=function(an){var ao=["font-family","font-size","text-align","list-style-type","line-height"];var ap=am(an,ao)||{};ap["font-size"]=parseInt(ap["font-size"],10);return ap};this.stylePara=function(an,ao){M.each(an.nodes(d.isPara,{includeAncestor:true}),function(aq,ap){M(ap).css(ao)})};this.styleNodes=function(an,ar){an=an.splitText();var av=ar&&ar.nodeName||"SPAN";var at=!!(ar&&ar.expandClosestSibling);var aq=!!(ar&&ar.onlyPartialContains);if(an.isCollapsed()){return[an.insertNode(d.create(av))]}var ap=d.makePredByNodeName(av);var ao=an.nodes(d.isText,{fullyContains:true}).map(function(aw){return d.singleChildAncestor(aw,ap)||d.wrap(aw,av)});if(at){if(aq){var au=an.nodes();ap=y.and(ap,function(aw){return z.contains(au,aw)})}return ao.map(function(ax){var az=d.withClosestSiblings(ax,ap);var aw=z.head(az);var ay=z.tail(az);M.each(ay,function(aA,aB){d.appendChildNodes(aw,aB.childNodes);d.remove(aB)});return z.head(az)})}else{return ao}};this.current=function(ao){var at=M(!d.isElement(ao.sc)?ao.sc.parentNode:ao.sc);var av=this.fromNode(at);try{av=M.extend(av,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(au){}if(!ao.isOnList()){av["list-style"]="none"}else{var ap=["circle","disc","disc-leading-zero","square"];var aq=M.inArray(av["list-style-type"],ap)>-1;av["list-style"]=aq?"unordered":"ordered"}var an=d.ancestor(ao.sc,d.isPara);if(an&&an.style["line-height"]){av["line-height"]=an.style.lineHeight}else{var ar=parseInt(av["line-height"],10)/parseInt(av["font-size"],10);av["line-height"]=ar.toFixed(1)}av.anchor=ao.isOnAnchor()&&d.ancestor(ao.sc,d.isAnchor);av.ancestors=d.listAncestor(ao.sc,d.isEditable);av.range=ao;return av}};var P=function(){this.insertOrderedList=function(){this.toggleList("OL")};this.insertUnorderedList=function(){this.toggleList("UL")};this.indent=function(){var an=this;var am=n.create().wrapBodyInlineWithPara();var ao=am.nodes(d.isPara,{includeAncestor:true});var ap=z.clusterBy(ao,y.peq2("parentNode"));M.each(ap,function(aq,ar){var at=z.head(ar);if(d.isLi(at)){an.wrapList(ar,at.parentNode.nodeName)}else{M.each(ar,function(av,au){M(au).css("marginLeft",function(aw,ax){return(parseInt(ax,10)||0)+25})})}});am.select()};this.outdent=function(){var an=this;var am=n.create().wrapBodyInlineWithPara();var ao=am.nodes(d.isPara,{includeAncestor:true});var ap=z.clusterBy(ao,y.peq2("parentNode"));M.each(ap,function(aq,ar){var at=z.head(ar);if(d.isLi(at)){an.releaseList([ar])}else{M.each(ar,function(av,au){M(au).css("marginLeft",function(aw,ax){ax=(parseInt(ax,10)||0);return ax>25?ax-25:""})})}});am.select()};this.toggleList=function(aq){var an=this;var am=n.create().wrapBodyInlineWithPara();var ap=am.nodes(d.isPara,{includeAncestor:true});var ar=am.paraBookmark(ap);var au=z.clusterBy(ap,y.peq2("parentNode"));if(z.find(ap,d.isPurePara)){var ao=[];M.each(au,function(av,aw){ao=ao.concat(an.wrapList(aw,aq))});ap=ao}else{var at=am.nodes(d.isList,{includeAncestor:true}).filter(function(av){return !M.nodeName(av,aq)});if(at.length){M.each(at,function(av,aw){d.replace(aw,aq)})}else{ap=this.releaseList(au,true)}}n.createFromParaBookmark(ar,ap).select()};this.wrapList=function(ap,ao){var aq=z.head(ap);var at=z.last(ap);var an=d.isList(aq.previousSibling)&&aq.previousSibling;var am=d.isList(at.nextSibling)&&at.nextSibling;var ar=an||d.insertAfter(d.create(ao||"UL"),at);ap=ap.map(function(au){return d.isPurePara(au)?d.replace(au,"LI"):au});d.appendChildNodes(ar,ap);if(am){d.appendChildNodes(ar,z.from(am.childNodes));d.remove(am)}return ap};this.releaseList=function(ao,am){var an=[];M.each(ao,function(ap,aq){var ar=z.head(aq);var at=z.last(aq);var aw=am?d.lastAncestor(ar,d.isList):ar.parentNode;var av=aw.childNodes.length>1?d.splitTree(aw,{node:at.parentNode,offset:d.position(at)+1},{isSkipPaddingBlankHTML:true}):null;var au=d.splitTree(aw,{node:ar.parentNode,offset:d.position(ar)},{isSkipPaddingBlankHTML:true});aq=am?d.listDescendant(au,d.isLi):z.from(au.childNodes).filter(d.isLi);if(am||!d.isList(aw.parentNode)){aq=aq.map(function(ay){return d.replace(ay,"P")})}M.each(z.from(aq).reverse(),function(az,ay){d.insertAfter(ay,aw)});var ax=z.compact([aw,au,av]);M.each(ax,function(ay,az){var aA=[az].concat(d.listDescendant(az,d.isList));M.each(aA.reverse(),function(aB,aC){if(!d.nodeLength(aC)){d.remove(aC,true)}})});an=an.concat(aq)});return an}};var g=function(){var am=new P();this.insertTab=function(ap,ao,an){var aq=d.createText(new Array(an+1).join(d.NBSP_CHAR));ao=ao.deleteContents();ao.insertNode(aq,true);ao=n.create(aq,an);ao.select()};this.insertParagraph=function(ap){var ao=n.create();ao=ao.deleteContents();ao=ao.wrapBodyInlineWithPara();var at=d.ancestor(ao.sc,d.isPara);var ar;if(at){if(d.isEmpty(at)&&d.isLi(at)){am.toggleList(at.parentNode.nodeName);return}else{if(d.isEmpty(at)&&d.isPara(at)&&d.isBlockquote(at.parentNode)){d.insertAfter(at,at.parentNode);ar=at}else{ar=d.splitTree(at,ao.getStartPoint());var an=d.listDescendant(at,d.isEmptyAnchor);an=an.concat(d.listDescendant(ar,d.isEmptyAnchor));M.each(an,function(au,av){d.remove(av)});if((d.isHeading(ar)||d.isPre(ar))&&d.isEmpty(ar)){ar=d.replace(ar,"p")}}}}else{var aq=ao.sc.childNodes[ao.so];ar=M(d.emptyPara)[0];if(aq){ao.sc.insertBefore(ar,aq)}else{ao.sc.appendChild(ar)}}n.create(ar,0).normalize().select().scrollIntoView(ap)}};var k=function(){this.tab=function(an,ap){var am=d.ancestor(an.commonAncestor(),d.isCell);var ar=d.ancestor(am,d.isTable);var ao=d.listDescendant(ar,d.isCell);var aq=z[ap?"prev":"next"](ao,am);if(aq){n.create(aq,0).select()}};this.createTable=function(au,at,aw){var ap=[],ao;for(var aq=0;aq<au;aq++){ap.push("<td>"+d.blank+"</td>")}ao=ap.join("");var ar=[],am;for(var an=0;an<at;an++){ar.push("<tr>"+ao+"</tr>")}am=ar.join("");var av=M("<table>"+am+"</table>");if(aw&&aw.tableClassName){av.addClass(aw.tableClassName)}return av[0]}};var h="bogus";var D=function(ap){var aB=this;var au=ap.layoutInfo.note;var ao=ap.layoutInfo.editor;var ay=ap.layoutInfo.editable;var aD=ap.options;var ar=aD.langInfo;var an=new K();var aA=new k();var az=new g();var am=new P();var av=new m(ay);this.initialize=function(){ay.on("keydown",function(aF){if(aF.keyCode===x.code.ENTER){ap.triggerEvent("enter",aF)}ap.triggerEvent("keydown",aF);if(aD.shortcuts&&!aF.isDefaultPrevented()){aB.handleKeyMap(aF)}}).on("keyup",function(aF){ap.triggerEvent("keyup",aF)}).on("focus",function(aF){ap.triggerEvent("focus",aF)}).on("blur",function(aF){ap.triggerEvent("blur",aF)}).on("mousedown",function(aF){ap.triggerEvent("mousedown",aF)}).on("mouseup",function(aF){ap.triggerEvent("mouseup",aF)}).on("scroll",function(aF){ap.triggerEvent("scroll",aF)}).on("paste",function(aF){ap.triggerEvent("paste",aF)});var aE=ai.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";ay.on(aE,function(){ap.triggerEvent("change",ay.html())});ao.on("focusin",function(aF){ap.triggerEvent("focusin",aF)}).on("focusout",function(aF){ap.triggerEvent("focusout",aF)});if(!aD.airMode&&aD.height){ay.outerHeight(aD.height)}if(!aD.airMode&&aD.maxHeight){ay.css("max-height",aD.maxHeight)}if(!aD.airMode&&aD.minHeight){ay.css("min-height",aD.minHeight)}ay.html(d.html(au)||d.emptyPara);av.recordUndo()};this.destroy=function(){ay.off()};this.handleKeyMap=function(aH){var aI=aD.keyMap[ai.isMac?"mac":"pc"];var aG=[];if(aH.metaKey){aG.push("CMD")}if(aH.ctrlKey&&!aH.altKey){aG.push("CTRL")}if(aH.shiftKey){aG.push("SHIFT")}var aF=x.nameFromCode[aH.keyCode];if(aF){aG.push(aF)}var aE=aI[aG.join("+")];if(aE){aH.preventDefault();ap.invoke(aE)}else{if(x.isEdit(aH.keyCode)){this.afterCommand()}}};this.createRange=function(){this.focus();return n.create()};this.saveRange=function(aE){this.focus();ay.data("range",n.create());if(aE){n.create().collapse().select()}};this.restoreRange=function(){var aE=ay.data("range");if(aE){aE.select();this.focus()}};this.saveTarget=function(aE){ay.data("target",aE)};this.clearTarget=function(){ay.removeData("target")};this.restoreTarget=function(){return ay.data("target")};this.currentStyle=function(){var aE=n.create();if(aE){aE=aE.normalize()}return aE?an.current(aE):an.fromNode(ay)};this.styleFromNode=function(aE){return an.fromNode(aE)};this.undo=function(){ap.triggerEvent("before.command",ay.html());av.undo();ap.triggerEvent("change",ay.html())};ap.memo("help.undo",ar.help.undo);this.redo=function(){ap.triggerEvent("before.command",ay.html());av.redo();ap.triggerEvent("change",ay.html())};ap.memo("help.redo",ar.help.redo);var ax=this.beforeCommand=function(){ap.triggerEvent("before.command",ay.html());aB.focus()};var aC=this.afterCommand=function(aE){av.recordUndo();if(!aE){ap.triggerEvent("change",ay.html())}};var aq=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var aw=0,at=aq.length;aw<at;aw++){this[aq[aw]]=(function(aE){return function(aF){ax();document.execCommand(aE,false,aF);aC(true)}})(aq[aw]);ap.memo("help."+aq[aw],ar.help[aq[aw]])}this.tab=function(){var aE=this.createRange();if(aE.isCollapsed()&&aE.isOnCell()){aA.tab(aE)}else{ax();az.insertTab(ay,aE,aD.tabSize);aC()}};ap.memo("help.tab",ar.help.tab);this.untab=function(){var aE=this.createRange();if(aE.isCollapsed()&&aE.isOnCell()){aA.tab(aE,true)}};ap.memo("help.untab",ar.help.untab);this.wrapCommand=function(aE){return function(){ax();aE.apply(aB,arguments);aC()}};this.insertParagraph=this.wrapCommand(function(){az.insertParagraph(ay)});ap.memo("help.insertParagraph",ar.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){am.insertOrderedList(ay)});ap.memo("help.insertOrderedList",ar.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){am.insertUnorderedList(ay)});ap.memo("help.insertUnorderedList",ar.help.insertUnorderedList);this.indent=this.wrapCommand(function(){am.indent(ay)});ap.memo("help.indent",ar.help.indent);this.outdent=this.wrapCommand(function(){am.outdent(ay)});ap.memo("help.outdent",ar.help.outdent);this.insertImage=function(aF,aE){return R.createImage(aF,aE).then(function(aG){ax();if(typeof aE==="function"){aE(aG)}else{if(typeof aE==="string"){aG.attr("data-filename",aE)}aG.css("width",Math.min(ay.width(),aG.width()))}aG.show();n.create().insertNode(aG[0]);n.createFromNodeAfter(aG[0]).select();aC()}).fail(function(){ap.triggerEvent("image.upload.error")})};this.insertImages=function(aE){M.each(aE,function(aF,aH){var aG=aH.name;if(aD.maximumImageFileSize&&aD.maximumImageFileSize<aH.size){ap.triggerEvent("image.upload.error",ar.image.maximumFileSizeError)}else{R.readFileAsDataURL(aH).then(function(aI){return aB.insertImage(aI,aG)}).fail(function(){ap.triggerEvent("image.upload.error")})}})};this.insertImagesOrCallback=function(aF){var aE=aD.callbacks;if(aE.onImageUpload){ap.triggerEvent("image.upload",aF)}else{this.insertImages(aF)}};this.insertNode=this.wrapCommand(function(aE){n.create().insertNode(aE);n.createFromNodeAfter(aE).select()});this.insertText=this.wrapCommand(function(aF){var aE=n.create().insertNode(d.createText(aF));n.create(aE,d.nodeLength(aE)).select()});this.getSelectedText=function(){var aE=this.createRange();if(aE.isOnAnchor()){aE=n.createFromNode(d.ancestor(aE.sc,d.isAnchor))}return aE.toString()};this.pasteHTML=this.wrapCommand(function(aE){var aF=n.create().pasteHTML(aE);n.createFromNodeAfter(z.last(aF)).select()});this.formatBlock=this.wrapCommand(function(aE){aE=ai.isMSIE?"<"+aE+">":aE;document.execCommand("FormatBlock",false,aE)});this.formatPara=function(){this.formatBlock("P")};ap.memo("help.formatPara",ar.help.formatPara);for(var aw=1;aw<=6;aw++){this["formatH"+aw]=function(aE){return function(){this.formatBlock("H"+aE)}}(aw);ap.memo("help.formatH"+aw,ar.help["formatH"+aw])}this.fontSize=function(aH){this.focus();var aE=n.create();if(aE&&aE.isCollapsed()){var aF=an.styleNodes(aE);var aG=z.head(aF);M(aF).css({"font-size":aH+"px"});if(aG&&!d.nodeLength(aG)){aG.innerHTML=d.ZERO_WIDTH_NBSP_CHAR;n.createFromNodeAfter(aG.firstChild).select();ay.data(h,aG)}}else{ax();M(an.styleNodes(aE)).css({"font-size":aH+"px"});aC()}};this.insertHorizontalRule=this.wrapCommand(function(){var aE=n.create();var aF=aE.insertNode(M("<HR/>")[0]);if(aF.nextSibling){n.create(aF.nextSibling,0).normalize().select()}});ap.memo("help.insertHorizontalRule",ar.help.insertHorizontalRule);this.removeBogus=function(){var aF=ay.data(h);if(!aF){return}var aG=z.find(z.from(aF.childNodes),d.isText);var aE=aG.nodeValue.indexOf(d.ZERO_WIDTH_NBSP_CHAR);if(aE!==-1){aG.deleteData(aE,1)}if(d.isEmpty(aF)){d.remove(aF)}ay.removeData(h)};this.lineHeight=this.wrapCommand(function(aE){an.stylePara(n.create(),{lineHeight:aE})});this.unlink=function(){var aE=this.createRange();if(aE.isOnAnchor()){var aF=d.ancestor(aE.sc,d.isAnchor);aE=n.createFromNode(aF);aE.select();ax();document.execCommand("unlink");aC()}};this.createLink=this.wrapCommand(function(aK){var aL=aK.url;var aH=aK.text;var aO=aK.isNewWindow;var aE=aK.range||this.createRange();var aP=aE.toString()!==aH;if(aD.onCreateLink){aL=aD.onCreateLink(aL)}var aF=[];if(aP){var aJ=aE.insertNode(M("<A>"+aH+"</A>")[0]);aF.push(aJ)}else{aF=an.styleNodes(aE,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}M.each(aF,function(aQ,aR){M(aR).attr("href",aL);if(aO){M(aR).attr("target","_blank")}else{M(aR).removeAttr("target")}});var aN=n.createFromNodeBefore(z.head(aF));var aG=aN.getStartPoint();var aI=n.createFromNodeAfter(z.last(aF));var aM=aI.getEndPoint();n.create(aG.node,aG.offset,aM.node,aM.offset).select()});this.getLinkInfo=function(){this.focus();var aE=n.create().expand(d.isAnchor);var aF=M(z.head(aE.nodes(d.isAnchor)));return{range:aE,text:aE.toString(),isNewWindow:aF.length?aF.attr("target")==="_blank":false,url:aF.length?aF.attr("href"):""}};this.color=this.wrapCommand(function(aF){var aG=aF.foreColor;var aE=aF.backColor;if(aG){document.execCommand("foreColor",false,aG)}if(aE){document.execCommand("backColor",false,aE)}});this.insertTable=this.wrapCommand(function(aE){var aG=aE.split("x");var aF=n.create().deleteContents();aF.insertNode(aA.createTable(aG[0],aG[1],aD))});this.floatMe=this.wrapCommand(function(aF){var aE=M(this.restoreTarget());aE.css("float",aF)});this.resize=this.wrapCommand(function(aF){var aE=M(this.restoreTarget());aE.css({width:aF*100+"%",height:""})});this.resizeTo=function(aJ,aE,aF){var aI;if(aF){var aH=aJ.y/aJ.x;var aG=aE.data("ratio");aI={width:aG>aH?aJ.x:aJ.y/aG,height:aG>aH?aJ.x*aG:aJ.y}}else{aI={width:aJ.x,height:aJ.y}}aE.css(aI)};this.removeMedia=this.wrapCommand(function(){var aE=M(this.restoreTarget()).detach();ap.triggerEvent("media.delete",aE,ay)});this.hasFocus=function(){return ay.is(":focus")};this.focus=function(){if(!this.hasFocus()){ay.focus();if(!this.hasFocus()&&ai.isFF){n.createFromNode(ay[0]).normalize().collapse().select()}}};this.isEmpty=function(){return d.isEmpty(ay[0])||d.emptyPara===ay.html()};this.empty=function(){ap.invoke("code",d.emptyPara)}};var t=function(ao){var an=this;var am=ao.layoutInfo.editable;this.events={"summernote.keydown":function(ap,aq){if(an.needKeydownHook()){if((aq.ctrlKey||aq.metaKey)&&aq.keyCode===x.code.V){ao.invoke("editor.saveRange");an.$paste.focus();setTimeout(function(){an.pasteByHook()},0)}}}};this.needKeydownHook=function(){return(ai.isMSIE&&ai.browserVersion>10)||ai.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=M("<div />").attr("contenteditable",true).css({position:"absolute",left:-100000,opacity:0});am.before(this.$paste);this.$paste.on("paste",function(ap){ao.triggerEvent("paste",ap)})}else{am.on("paste",this.pasteByEvent)}};this.destroy=function(){if(this.needKeydownHook()){this.$paste.remove();this.$paste=null}};this.pasteByHook=function(){var av=this.$paste[0].firstChild;if(d.isImg(av)){var ap=av.src;var at=atob(ap.split(",")[1]);var aw=new Uint8Array(at.length);for(var ar=0;ar<at.length;ar++){aw[ar]=at.charCodeAt(ar)}var aq=new Blob([aw],{type:"image/png"});aq.name="clipboard.png";ao.invoke("editor.restoreRange");ao.invoke("editor.focus");ao.invoke("editor.insertImagesOrCallback",[aq])}else{var au=M("<div />").html(this.$paste.html()).html();ao.invoke("editor.restoreRange");ao.invoke("editor.focus");if(au){ao.invoke("editor.pasteHTML",au)}}this.$paste.empty()};this.pasteByEvent=function(aq){var ar=aq.originalEvent.clipboardData;if(ar&&ar.items&&ar.items.length){var ap=z.head(ar.items);if(ap.kind==="file"&&ap.type.indexOf("image/")!==-1){ao.invoke("editor.insertImagesOrCallback",[ap.getAsFile()])}ao.invoke("editor.afterCommand")}}};var F=function(ao){var ar=M(document);var ap=ao.layoutInfo.editor;var am=ao.layoutInfo.editable;var an=ao.options;var aq=an.langInfo;var at=M(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(ap);this.initialize=function(){if(an.disableDragAndDrop){ar.on("drop",function(au){au.preventDefault()})}else{this.attachDragAndDropEvent()}};this.attachDragAndDropEvent=function(){var av=M(),au=at.find(".note-dropzone-message");ar.on("dragenter",function(ay){var ax=ao.invoke("codeview.isActivated");var aw=ap.width()>0&&ap.height()>0;if(!ax&&!av.length&&aw){ap.addClass("dragover");at.width(ap.width());at.height(ap.height());au.text(aq.image.dragImageHere)}av=av.add(ay.target)}).on("dragleave",function(aw){av=av.not(aw.target);if(!av.length){ap.removeClass("dragover")}}).on("drop",function(){av=M();ap.removeClass("dragover")});at.on("dragenter",function(){at.addClass("hover");au.text(aq.image.dropImage)}).on("dragleave",function(){at.removeClass("hover");au.text(aq.image.dragImageHere)});at.on("drop",function(aw){var ax=aw.originalEvent.dataTransfer;if(ax&&ax.files&&ax.files.length){aw.preventDefault();am.focus();ao.invoke("editor.insertImagesOrCallback",ax.files)}else{M.each(ax.types,function(ay,az){var aA=ax.getData(az);if(az.toLowerCase().indexOf("text")>-1){ao.invoke("editor.pasteHTML",aA)}else{M(aA).each(function(){ao.invoke("editor.insertNode",this)})}})}}).on("dragover",false)}};var C;if(ai.hasCodeMirror){if(ai.isSupportAmd){require(["codemirror"],function(am){C=am})}else{C=window.CodeMirror}}var J=function(ap){var aq=ap.layoutInfo.editor;var an=ap.layoutInfo.editable;var am=ap.layoutInfo.codable;var ao=ap.options;this.sync=function(){var ar=this.isActivated();if(ar&&ai.hasCodeMirror){am.data("cmEditor").save()}};this.isActivated=function(){return aq.hasClass("codeview")};this.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}ap.triggerEvent("codeview.toggled")};this.activate=function(){am.val(d.html(an,ao.prettifyHtml));am.height(an.height());ap.invoke("toolbar.updateCodeview",true);aq.addClass("codeview");am.focus();if(ai.hasCodeMirror){var at=C.fromTextArea(am[0],ao.codemirror);if(ao.codemirror.tern){var ar=new C.TernServer(ao.codemirror.tern);at.ternServer=ar;at.on("cursorActivity",function(au){ar.updateArgHints(au)})}at.setSize(null,an.outerHeight());am.data("cmEditor",at)}};this.deactivate=function(){if(ai.hasCodeMirror){var au=am.data("cmEditor");am.val(au.getValue());au.toTextArea()}var at=d.value(am,ao.prettifyHtml)||d.emptyPara;var ar=an.html()!==at;an.html(at);an.height(ao.height?am.height():"auto");aq.removeClass("codeview");if(ar){ap.triggerEvent("change",an.html(),an)}an.focus();ap.invoke("toolbar.updateCodeview",false)};this.destroy=function(){if(this.isActivated()){this.deactivate()}}};var ac=24;var I=function(ap){var aq=M(document);var am=ap.layoutInfo.statusbar;var an=ap.layoutInfo.editable;var ao=ap.options;this.initialize=function(){if(ao.airMode||ao.disableResizeEditor){return}am.on("mousedown",function(at){at.preventDefault();at.stopPropagation();var ar=an.offset().top-aq.scrollTop();aq.on("mousemove",function(av){var au=av.clientY-(ar+ac);au=(ao.minheight>0)?Math.max(au,ao.minheight):au;au=(ao.maxHeight>0)?Math.min(au,ao.maxHeight):au;an.height(au)}).one("mouseup",function(){aq.off("mousemove")})})};this.destroy=function(){am.off()}};var s=function(ap){var ar=ap.layoutInfo.editor;var ao=ap.layoutInfo.toolbar;var an=ap.layoutInfo.editable;var am=ap.layoutInfo.codable;var at=M(window);var aq=M("html, body");this.toggle=function(){var au=function(aw){an.css("height",aw.h);am.css("height",aw.h);if(am.data("cmeditor")){am.data("cmeditor").setsize(null,aw.h)}};ar.toggleClass("fullscreen");var av=ar.hasClass("fullscreen");if(av){an.data("orgHeight",an.css("height"));at.on("resize",function(){au({h:at.height()-ao.outerHeight()})}).trigger("resize");aq.css("overflow","hidden")}else{at.off("resize");au({h:an.data("orgHeight")});aq.css("overflow","visible")}ap.invoke("toolbar.updateFullscreen",av)}};var af=function(ao){var am=this;var aq=M(document);var ap=ao.layoutInfo.editingArea;var an=ao.options;this.events={"summernote.mousedown":function(ar,at){if(am.update(at.target)){at.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){am.update()}};this.initialize=function(){this.$handle=M(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',(an.disableResizeImage?"note-control-holder":"note-control-sizing"),' note-control-se"></div>',(an.disableResizeImage?"":'<div class="note-control-selection-info"></div>'),"</div>","</div>"].join("")).prependTo(ap);this.$handle.on("mousedown",function(at){if(d.isControlSizing(at.target)){at.preventDefault();at.stopPropagation();var ar=am.$handle.find(".note-control-selection").data("target"),av=ar.offset(),au=aq.scrollTop();aq.on("mousemove",function(aw){ao.invoke("editor.resizeTo",{x:aw.clientX-av.left,y:aw.clientY-(av.top-au)},ar,!aw.shiftKey);am.update(ar[0])}).one("mouseup",function(aw){aw.preventDefault();aq.off("mousemove");ao.invoke("editor.afterCommand")});if(!ar.data("ratio")){ar.data("ratio",ar.height()/ar.width())}}})};this.destroy=function(){this.$handle.remove()};this.update=function(av){var ay=d.isImg(av);var ar=this.$handle.find(".note-control-selection");ao.invoke("imagePopover.update",av);if(ay){var at=M(av);var ax=at.position();var au={w:at.outerWidth(true),h:at.outerHeight(true)};ar.css({display:"block",left:ax.left,top:ax.top,width:au.w,height:au.h}).data("target",at);var aw=au.w+"x"+au.h;ar.find(".note-control-selection-info").text(aw);ao.invoke("editor.saveTarget",av)}else{this.hide()}return ay};this.hide=function(){ao.invoke("editor.clearTarget");this.$handle.children().hide()}};var ad=function(ao){var am=this;var ap="http://";var an=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(aq,ar){if(!ar.isDefaultPrevented()){am.handleKeyup(ar)}},"summernote.keydown":function(aq,ar){am.handleKeydown(ar)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(!this.lastWordRange){return}var aq=this.lastWordRange.toString();var ar=aq.match(an);if(ar&&(ar[1]||ar[2])){var au=ar[1]?aq:ap+aq;var at=M("<a />").html(aq).attr("href",au)[0];this.lastWordRange.insertNode(at);this.lastWordRange=null;ao.invoke("editor.focus")}};this.handleKeydown=function(aq){if(z.contains([x.code.ENTER,x.code.SPACE],aq.keyCode)){var ar=ao.invoke("editor.createRange").getWordRange();this.lastWordRange=ar}};this.handleKeyup=function(aq){if(z.contains([x.code.ENTER,x.code.SPACE],aq.keyCode)){this.replace()}}};var ak=function(an){var am=an.layoutInfo.note;this.events={"summernote.change":function(){am.val(an.invoke("code"))}};this.shouldInitialize=function(){return d.isTextarea(am[0])}};var L=function(ao){var am=this;var ap=ao.layoutInfo.editingArea;var an=ao.options;this.events={"summernote.init summernote.change":function(){am.update()},"summernote.codeview.toggled":function(){am.update()}};this.shouldInitialize=function(){return !!an.placeholder};this.initialize=function(){this.$placeholder=M('<div class="note-placeholder">');this.$placeholder.on("click",function(){ao.invoke("focus")}).text(an.placeholder).prependTo(ap)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var aq=!ao.invoke("codeview.isActivated")&&ao.invoke("editor.isEmpty");this.$placeholder.toggle(aq)}};var B=function(ap){var am=this;var ar=M.summernote.ui;var ao=ap.layoutInfo.toolbar;var an=ap.options;var au=an.langInfo;var at=y.invertObject(an.keyMap[ai.isMac?"mac":"pc"]);var aq=this.representShortcut=function(aw){var av=at[aw];if(ai.isMac){av=av.replace("CMD","").replace("SHIFT","")}av=av.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+av+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons()};this.addToolbarButtons=function(){ap.memo("button.style",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.magic)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.style.style,data:{toggle:"dropdown"}}),ar.dropdown({className:"dropdown-style",items:ap.options.styleTags,template:function(aE){if(typeof aE==="string"){aE={tag:aE,title:aE}}var aB=aE.tag;var aF=aE.title;var aD=aE.style?' style="'+aE.style+'" ':"";var aC=aE.className?' className="'+aE.className+'"':"";return"<"+aB+aD+aC+">"+aF+"</"+aB+">"},click:ap.createInvokeHandler("editor.formatBlock")})]).render()});ap.memo("button.bold",function(){return ar.button({className:"note-btn-bold",contents:ar.icon(an.icons.bold),tooltip:au.font.bold+aq("bold"),click:ap.createInvokeHandler("editor.bold")}).render()});ap.memo("button.italic",function(){return ar.button({className:"note-btn-italic",contents:ar.icon(an.icons.italic),tooltip:au.font.italic+aq("italic"),click:ap.createInvokeHandler("editor.italic")}).render()});ap.memo("button.underline",function(){return ar.button({className:"note-btn-underline",contents:ar.icon(an.icons.underline),tooltip:au.font.underline+aq("underline"),click:ap.createInvokeHandler("editor.underline")}).render()});ap.memo("button.clear",function(){return ar.button({contents:ar.icon(an.icons.eraser),tooltip:au.font.clear+aq("removeFormat"),click:ap.createInvokeHandler("editor.removeFormat")}).render()});ap.memo("button.strikethrough",function(){return ar.button({className:"note-btn-strikethrough",contents:ar.icon(an.icons.strikethrough),tooltip:au.font.strikethrough+aq("strikethrough"),click:ap.createInvokeHandler("editor.strikethrough")}).render()});ap.memo("button.superscript",function(){return ar.button({className:"note-btn-superscript",contents:ar.icon(an.icons.superscript),tooltip:au.font.superscript,click:ap.createInvokeHandler("editor.superscript")}).render()});ap.memo("button.subscript",function(){return ar.button({className:"note-btn-subscript",contents:ar.icon(an.icons.subscript),tooltip:au.font.subscript,click:ap.createInvokeHandler("editor.subscript")}).render()});ap.memo("button.fontname",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+ar.icon(an.icons.caret,"span"),tooltip:au.font.name,data:{toggle:"dropdown"}}),ar.dropdownCheck({className:"dropdown-fontname",checkClassName:an.icons.menuCheck,items:an.fontNames.filter(function(aB){return ai.isFontInstalled(aB)||z.contains(an.fontNamesIgnoreCheck,aB)}),template:function(aB){return'<span style="font-family:'+aB+'">'+aB+"</span>"},click:ap.createInvokeHandler("editor.fontName")})]).render()});ap.memo("button.fontsize",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+ar.icon(an.icons.caret,"span"),tooltip:au.font.size,data:{toggle:"dropdown"}}),ar.dropdownCheck({className:"dropdown-fontsize",checkClassName:an.icons.menuCheck,items:an.fontSizes,click:ap.createInvokeHandler("editor.fontSize")})]).render()});ap.memo("button.color",function(){return ar.buttonGroup({className:"note-color",children:[ar.button({className:"note-current-color-button",contents:ar.icon(an.icons.font+" note-recent-color"),tooltip:au.color.recent,click:ap.createInvokeHandler("editor.color"),callback:function(aC){var aB=aC.find(".note-recent-color");aB.css({"background-color":"yellow"});aC.data("value",{backColor:"yellow"})}}),ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.caret,"span"),tooltip:au.color.more,data:{toggle:"dropdown"}}),ar.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+au.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',au.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+au.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',au.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(aB){aB.find(".note-holder").each(function(){var aC=M(this);aC.append(ar.palette({colors:an.colors,eventName:aC.data("event")}).render())})},click:function(aE){var aG=M(aE.target);var aB=aG.data("event");var aF=aG.data("value");if(aB&&aF){var aC=aB==="backColor"?"background-color":"color";var aI=aG.closest(".note-color").find(".note-recent-color");var aH=aG.closest(".note-color").find(".note-current-color-button");var aD=aH.data("value");aD[aB]=aF;aI.css(aC,aF);aH.data("value",aD);ap.invoke("editor."+aB,aF)}}})]}).render()});ap.memo("button.ol",function(){return ar.button({contents:ar.icon(an.icons.unorderedlist),tooltip:au.lists.unordered+aq("insertUnorderedList"),click:ap.createInvokeHandler("editor.insertUnorderedList")}).render()});ap.memo("button.ul",function(){return ar.button({contents:ar.icon(an.icons.orderedlist),tooltip:au.lists.ordered+aq("insertOrderedList"),click:ap.createInvokeHandler("editor.insertOrderedList")}).render()});var aA=ar.button({contents:ar.icon(an.icons.alignLeft),tooltip:au.paragraph.left+aq("justifyLeft"),click:ap.createInvokeHandler("editor.justifyLeft")});var aw=ar.button({contents:ar.icon(an.icons.alignCenter),tooltip:au.paragraph.center+aq("justifyCenter"),click:ap.createInvokeHandler("editor.justifyCenter")});var ax=ar.button({contents:ar.icon(an.icons.alignRight),tooltip:au.paragraph.right+aq("justifyRight"),click:ap.createInvokeHandler("editor.justifyRight")});var ay=ar.button({contents:ar.icon(an.icons.alignJustify),tooltip:au.paragraph.justify+aq("justifyFull"),click:ap.createInvokeHandler("editor.justifyFull")});var az=ar.button({contents:ar.icon(an.icons.outdent),tooltip:au.paragraph.outdent+aq("outdent"),click:ap.createInvokeHandler("editor.outdent")});var av=ar.button({contents:ar.icon(an.icons.indent),tooltip:au.paragraph.indent+aq("indent"),click:ap.createInvokeHandler("editor.indent")});ap.memo("button.justifyLeft",y.invoke(aA,"render"));ap.memo("button.justifyCenter",y.invoke(aw,"render"));ap.memo("button.justifyRight",y.invoke(ax,"render"));ap.memo("button.justifyFull",y.invoke(ay,"render"));ap.memo("button.outdent",y.invoke(az,"render"));ap.memo("button.indent",y.invoke(av,"render"));ap.memo("button.paragraph",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.align)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.paragraph.paragraph,data:{toggle:"dropdown"}}),ar.dropdown([ar.buttonGroup({className:"note-align",children:[aA,aw,ax,ay]}),ar.buttonGroup({className:"note-list",children:[az,av]})])]).render()});ap.memo("button.height",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.textHeight)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.font.height,data:{toggle:"dropdown"}}),ar.dropdownCheck({items:an.lineHeights,checkClassName:an.icons.menuCheck,className:"dropdown-line-height",click:ap.createInvokeHandler("editor.lineHeight")})]).render()});ap.memo("button.table",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.table)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.table.table,data:{toggle:"dropdown"}}),ar.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(aB){var aC=aB.find(".note-dimension-picker-mousecatcher");aC.css({width:an.insertTableMaxSize.col+"em",height:an.insertTableMaxSize.row+"em"}).mousedown(ap.createInvokeHandler("editor.insertTable")).on("mousemove",am.tableMoveHandler)}}).render()});ap.memo("button.link",function(){return ar.button({contents:ar.icon(an.icons.link),tooltip:au.link.link,click:ap.createInvokeHandler("linkDialog.show")}).render()});ap.memo("button.picture",function(){return ar.button({contents:ar.icon(an.icons.picture),tooltip:au.image.image,click:ap.createInvokeHandler("imageDialog.show")}).render()});ap.memo("button.video",function(){return ar.button({contents:ar.icon(an.icons.video),tooltip:au.video.video,click:ap.createInvokeHandler("videoDialog.show")}).render()});ap.memo("button.hr",function(){return ar.button({contents:ar.icon(an.icons.minus),tooltip:au.hr.insert+aq("insertHorizontalRule"),click:ap.createInvokeHandler("editor.insertHorizontalRule")}).render()});ap.memo("button.fullscreen",function(){return ar.button({className:"btn-fullscreen",contents:ar.icon(an.icons.arrowsAlt),tooltip:au.options.fullscreen,click:ap.createInvokeHandler("fullscreen.toggle")}).render()});ap.memo("button.codeview",function(){return ar.button({className:"btn-codeview",contents:ar.icon(an.icons.code),tooltip:au.options.codeview,click:ap.createInvokeHandler("codeview.toggle")}).render()});ap.memo("button.redo",function(){return ar.button({contents:ar.icon(an.icons.redo),tooltip:au.history.redo+aq("redo"),click:ap.createInvokeHandler("editor.redo")}).render()});ap.memo("button.undo",function(){return ar.button({contents:ar.icon(an.icons.undo),tooltip:au.history.undo+aq("undo"),click:ap.createInvokeHandler("editor.undo")}).render()});ap.memo("button.help",function(){return ar.button({contents:ar.icon(an.icons.question),tooltip:au.options.help,click:ap.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){ap.memo("button.imageSize100",function(){return ar.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:au.image.resizeFull,click:ap.createInvokeHandler("editor.resize","1")}).render()});ap.memo("button.imageSize50",function(){return ar.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:au.image.resizeHalf,click:ap.createInvokeHandler("editor.resize","0.5")}).render()});ap.memo("button.imageSize25",function(){return ar.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:au.image.resizeQuarter,click:ap.createInvokeHandler("editor.resize","0.25")}).render()});ap.memo("button.floatLeft",function(){return ar.button({contents:ar.icon(an.icons.alignLeft),tooltip:au.image.floatLeft,click:ap.createInvokeHandler("editor.floatMe","left")}).render()});ap.memo("button.floatRight",function(){return ar.button({contents:ar.icon(an.icons.alignRight),tooltip:au.image.floatRight,click:ap.createInvokeHandler("editor.floatMe","right")}).render()});ap.memo("button.floatNone",function(){return ar.button({contents:ar.icon(an.icons.alignJustify),tooltip:au.image.floatNone,click:ap.createInvokeHandler("editor.floatMe","none")}).render()});ap.memo("button.removeMedia",function(){return ar.button({contents:ar.icon(an.icons.trash),tooltip:au.image.remove,click:ap.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){ap.memo("button.linkDialogShow",function(){return ar.button({contents:ar.icon(an.icons.link),tooltip:au.link.edit,click:ap.createInvokeHandler("linkDialog.show")}).render()});ap.memo("button.unlink",function(){return ar.button({contents:ar.icon(an.icons.unlink),tooltip:au.link.unlink,click:ap.createInvokeHandler("editor.unlink")}).render()})};this.build=function(aE,av){for(var aF=0,ay=av.length;aF<ay;aF++){var aC=av[aF];var aD=aC[0];var az=aC[1];var aB=ar.buttonGroup({className:"note-"+aD}).render();for(var aA=0,ax=az.length;aA<ax;aA++){var aw=ap.memo("button."+az[aA]);if(aw){aB.append(typeof aw==="function"?aw():aw)}}aB.appendTo(aE)}};this.updateCurrentStyle=function(){var az=ap.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return az["font-bold"]==="bold"},".note-btn-italic":function(){return az["font-italic"]==="italic"},".note-btn-underline":function(){return az["font-underline"]==="underline"},".note-btn-subscript":function(){return az["font-subscript"]==="subscript"},".note-btn-superscript":function(){return az["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return az["font-strikethrough"]==="strikethrough"}});if(az["font-family"]){var av=az["font-family"].split(",").map(function(aA){return aA.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var ax=z.find(av,function(aA){return ai.isFontInstalled(aA)||z.contains(an.fontNamesIgnoreCheck,aA)});ao.find(".dropdown-fontname li a").each(function(){var aA=(M(this).data("value")+"")===(ax+"");this.className=aA?"checked":""});ao.find(".note-current-fontname").text(ax)}if(az["font-size"]){var ay=az["font-size"];ao.find(".dropdown-fontsize li a").each(function(){var aA=(M(this).data("value")+"")===(ay+"");this.className=aA?"checked":""});ao.find(".note-current-fontsize").text(ay)}if(az["line-height"]){var aw=az["line-height"];ao.find(".dropdown-line-height li a").each(function(){var aA=(M(this).data("value")+"")===(aw+"");this.className=aA?"checked":""})}};this.updateBtnStates=function(av){M.each(av,function(aw,ax){ar.toggleBtnActive(ao.find(aw),ax())})};this.tableMoveHandler=function(aw){var aE=18;var ay=M(aw.target.parentNode);var ax=ay.next();var aD=ay.find(".note-dimension-picker-mousecatcher");var az=ay.find(".note-dimension-picker-highlighted");var aA=ay.find(".note-dimension-picker-unhighlighted");var aC;if(aw.offsetX===undefined){var av=M(aw.target).offset();aC={x:aw.pageX-av.left,y:aw.pageY-av.top}}else{aC={x:aw.offsetX,y:aw.offsetY}}var aB={c:Math.ceil(aC.x/aE)||1,r:Math.ceil(aC.y/aE)||1};az.css({width:aB.c+"em",height:aB.r+"em"});aD.data("value",aB.c+"x"+aB.r);if(3<aB.c&&aB.c<an.insertTableMaxSize.col){aA.css({width:aB.c+1+"em"})}if(3<aB.r&&aB.r<an.insertTableMaxSize.row){aA.css({height:aB.r+1+"em"})}ax.html(aB.c+" x "+aB.r)}};var p=function(ap){var aq=M.summernote.ui;var am=ap.layoutInfo.note;var ao=ap.layoutInfo.toolbar;var an=ap.options;this.shouldInitialize=function(){return !an.airMode};this.initialize=function(){an.toolbar=an.toolbar||[];if(!an.toolbar.length){ao.hide()}else{ap.invoke("buttons.build",ao,an.toolbar)}if(an.toolbarContainer){ao.appendTo(an.toolbarContainer)}am.on("summernote.keyup summernote.mouseup summernote.change",function(){ap.invoke("buttons.updateCurrentStyle")});ap.invoke("buttons.updateCurrentStyle")};this.destroy=function(){ao.children().remove()};this.updateFullscreen=function(ar){aq.toggleBtnActive(ao.find(".btn-fullscreen"),ar)};this.updateCodeview=function(ar){aq.toggleBtnActive(ao.find(".btn-codeview"),ar);if(ar){this.deactivate()}else{this.activate()}};this.activate=function(ar){var at=ao.find("button");if(!ar){at=at.not(".btn-codeview")}aq.toggleBtn(at,true)};this.deactivate=function(ar){var at=ao.find("button");if(!ar){at=at.not(".btn-codeview")}aq.toggleBtn(at,false)}};var V=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.initialize=function(){var au=an.dialogsInBody?M(document.body):aq;var at='<div class="form-group"><label>'+ar.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+ar.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(!an.disableLinkTarget?'<div class="checkbox"><label><input type="checkbox" checked> '+ar.link.openInNewWindow+"</label></div>":"");var av='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+ar.link.insert+"</button>";this.$dialog=ap.dialog({className:"link-dialog",title:ar.link.insert,fade:an.dialogsFade,body:at,footer:av}).render().appendTo(au)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(au,at){au.on("keypress",function(av){if(av.keyCode===x.code.ENTER){at.trigger("click")}})};this.showLinkDialog=function(at){return M.Deferred(function(ax){var aw=am.$dialog.find(".note-link-text"),ay=am.$dialog.find(".note-link-url"),av=am.$dialog.find(".note-link-btn"),au=am.$dialog.find("input[type=checkbox]");ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");aw.val(at.text);aw.on("input",function(){ap.toggleBtn(av,aw.val()&&ay.val());at.text=aw.val()});if(!at.url){at.url=at.text||"http://";ap.toggleBtn(av,at.text)}ay.on("input",function(){ap.toggleBtn(av,aw.val()&&ay.val())}).val(at.url).trigger("focus");am.bindEnterKey(ay,av);am.bindEnterKey(aw,av);au.prop("checked",at.isNewWindow);av.one("click",function(az){az.preventDefault();ax.resolve({range:at.range,url:ay.val(),text:aw.val(),isNewWindow:au.is(":checked")});am.$dialog.modal("hide")})});ap.onDialogHidden(am.$dialog,function(){aw.off("input keypress");ay.off("input keypress");av.off("click");if(ax.state()==="pending"){ax.reject()}});ap.showDialog(am.$dialog)}).promise()};this.show=function(){var at=ao.invoke("editor.getLinkInfo");ao.invoke("editor.saveRange");this.showLinkDialog(at).then(function(au){ao.invoke("editor.restoreRange");ao.invoke("editor.createLink",au)}).fail(function(){ao.invoke("editor.restoreRange")})};ao.memo("help.linkDialog.show",an.langInfo.help["linkDialog.show"])};var Y=function(ao){var am=this;var ap=M.summernote.ui;var an=ao.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){am.update()},"summernote.dialog.shown":function(){am.hide()}};this.shouldInitialize=function(){return !z.isEmpty(an.popover.link)};this.initialize=function(){this.$popover=ap.popover({className:"note-link-popover",callback:function(ar){var at=ar.find(".popover-content");at.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var aq=this.$popover.find(".popover-content");ao.invoke("buttons.build",aq,an.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(!ao.invoke("editor.hasFocus")){this.hide();return}var aq=ao.invoke("editor.createRange");if(aq.isCollapsed()&&aq.isOnAnchor()){var at=d.ancestor(aq.sc,d.isAnchor);var ar=M(at).attr("href");this.$popover.find("a").attr("href",ar).html(ar);var au=d.posFromPlaceholder(at);this.$popover.css({display:"block",left:au.left,top:au.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var G=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.initialize=function(){var ax=an.dialogsInBody?M(document.body):aq;var av="";if(an.maximumImageFileSize){var au=Math.floor(Math.log(an.maximumImageFileSize)/Math.log(1024));var aw=(an.maximumImageFileSize/Math.pow(1024,au)).toFixed(2)*1+"  KMGTP"[au]+"B";av="<small>"+ar.image.maximumFileSize+" : "+aw+"</small>"}var at='<div class="form-group note-group-select-from-files"><label>'+ar.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+av+'</div><div class="form-group" style="overflow:auto;"><label>'+ar.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>';var ay='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+ar.image.insert+"</button>";this.$dialog=ap.dialog({title:ar.image.insert,fade:an.dialogsFade,body:at,footer:ay}).render().appendTo(ax)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(au,at){au.on("keypress",function(av){if(av.keyCode===x.code.ENTER){at.trigger("click")}})};this.show=function(){ao.invoke("editor.saveRange");this.showImageDialog().then(function(at){ap.hideDialog(am.$dialog);ao.invoke("editor.restoreRange");if(typeof at==="string"){ao.invoke("editor.insertImage",at)}else{ao.invoke("editor.insertImagesOrCallback",at)}}).fail(function(){ao.invoke("editor.restoreRange")})};this.showImageDialog=function(){return M.Deferred(function(av){var aw=am.$dialog.find(".note-image-input"),at=am.$dialog.find(".note-image-url"),au=am.$dialog.find(".note-image-btn");ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");aw.replaceWith(aw.clone().on("change",function(){av.resolve(this.files||this.value)}).val(""));au.click(function(ax){ax.preventDefault();av.resolve(at.val())});at.on("keyup paste",function(){var ax=at.val();ap.toggleBtn(au,ax)}).val("").trigger("focus");am.bindEnterKey(at,au)});ap.onDialogHidden(am.$dialog,function(){aw.off("change");at.off("keyup paste keypress");au.off("click");if(av.state()==="pending"){av.reject()}});ap.showDialog(am.$dialog)})}};var A=function(an){var ao=M.summernote.ui;var am=an.options;this.shouldInitialize=function(){return !z.isEmpty(am.popover.image)};this.initialize=function(){this.$popover=ao.popover({className:"note-image-popover"}).render().appendTo("body");var ap=this.$popover.find(".popover-content");an.invoke("buttons.build",ap,am.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(ap){if(d.isImg(ap)){var aq=d.posFromPlaceholder(ap);this.$popover.css({display:"block",left:aq.left,top:aq.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var H=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.initialize=function(){var au=an.dialogsInBody?M(document.body):aq;var at='<div class="form-group row-fluid"><label>'+ar.video.url+' <small class="text-muted">'+ar.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>';var av='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+ar.video.insert+"</button>";this.$dialog=ap.dialog({title:ar.video.insert,fade:an.dialogsFade,body:at,footer:av}).render().appendTo(au)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(au,at){au.on("keypress",function(av){if(av.keyCode===x.code.ENTER){at.trigger("click")}})};this.createVideoNode=function(az){var aH=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var av=az.match(aH);var au=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/;var aM=az.match(au);var aF=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var aw=az.match(aF);var aB=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var aG=az.match(aB);var ax=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var at=az.match(ax);var aL=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var aJ=az.match(aL);var aI=/^.+.(mp4|m4v)$/;var aE=az.match(aI);var aD=/^.+.(ogg|ogv)$/;var aN=az.match(aD);var aK=/^.+.(webm)$/;var aA=az.match(aK);var aC;if(av&&av[1].length===11){var ay=av[1];aC=M("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+ay).attr("width","640").attr("height","360")}else{if(aM&&aM[0].length){aC=M("<iframe>").attr("frameborder",0).attr("src",aM[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else{if(aw&&aw[0].length){aC=M("<iframe>").attr("frameborder",0).attr("src",aw[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else{if(aG&&aG[3].length){aC=M("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+aG[3]).attr("width","640").attr("height","360")}else{if(at&&at[2].length){aC=M("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+at[2]).attr("width","640").attr("height","360")}else{if(aJ&&aJ[1].length){aC=M("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+aJ[1])}else{if(aE||aN||aA){aC=M("<video controls>").attr("src",az).attr("width","640").attr("height","360")}else{return false}}}}}}}aC.addClass("note-video-clip");return aC[0]};this.show=function(){var at=ao.invoke("editor.getSelectedText");ao.invoke("editor.saveRange");this.showVideoDialog(at).then(function(av){ap.hideDialog(am.$dialog);ao.invoke("editor.restoreRange");var au=am.createVideoNode(av);if(au){ao.invoke("editor.insertNode",au)}}).fail(function(){ao.invoke("editor.restoreRange")})};this.showVideoDialog=function(at){return M.Deferred(function(au){var av=am.$dialog.find(".note-video-url"),aw=am.$dialog.find(".note-video-btn");ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");av.val(at).on("input",function(){ap.toggleBtn(aw,av.val())}).trigger("focus");aw.click(function(ax){ax.preventDefault();au.resolve(av.val())});am.bindEnterKey(av,aw)});ap.onDialogHidden(am.$dialog,function(){av.off("input");aw.off("click");if(au.state()==="pending"){au.reject()}});ap.showDialog(am.$dialog)})}};var f=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.createShortCutList=function(){var at=an.keyMap[ai.isMac?"mac":"pc"];return Object.keys(at).map(function(av){var aw=at[av];var au=M('<div><div class="help-list-item"/></div>');au.append(M("<label><kbd>"+av+"</kdb></label>").css({width:180,"margin-right":10})).append(M("<span/>").html(ao.memo("help."+aw)||aw));return au.html()}).join("")};this.initialize=function(){var au=an.dialogsInBody?M(document.body):aq;var at=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.7.3</a>  ','<a href="//github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=ap.dialog({title:ar.options.help,fade:an.dialogsFade,body:this.createShortCutList(),footer:at,callback:function(av){av.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(au)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return M.Deferred(function(at){ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");at.resolve()});ap.showDialog(am.$dialog)}).promise()};this.show=function(){ao.invoke("editor.saveRange");this.showHelpDialog().then(function(){ao.invoke("editor.restoreRange")})}};var T=function(ap){var am=this;var aq=M.summernote.ui;var an=ap.options;var ao=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){am.update()},"summernote.change summernote.dialog.shown":function(){am.hide()},"summernote.focusout":function(ar,at){if(ai.isFF){return}if(!at.relatedTarget||!d.ancestor(at.relatedTarget,y.eq(am.$popover[0]))){am.hide()}}};this.shouldInitialize=function(){return an.airMode&&!z.isEmpty(an.popover.air)};this.initialize=function(){this.$popover=aq.popover({className:"note-air-popover"}).render().appendTo("body");var ar=this.$popover.find(".popover-content");ap.invoke("buttons.build",ar,an.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var au=ap.invoke("editor.currentStyle");if(au.range&&!au.range.isCollapsed()){var at=z.last(au.range.getClientRects());if(at){var ar=y.rect2bnd(at);this.$popover.css({display:"block",left:Math.max(ar.left+ar.width/2,0)-ao,top:ar.top+ar.height})}}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var W=function(an){var am=this;var aq=M.summernote.ui;var ao=5;var at=an.options.hint||[];var ar=an.options.hintDirection||"bottom";var ap=M.isArray(at)?at:[at];this.events={"summernote.keyup":function(au,av){if(!av.isDefaultPrevented()){am.handleKeyup(av)}},"summernote.keydown":function(au,av){am.handleKeydown(av)},"summernote.dialog.shown":function(){am.hide()}};this.shouldInitialize=function(){return ap.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=aq.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){am.$content.find(".active").removeClass("active");M(this).addClass("active");am.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(au){this.$content.find(".active").removeClass("active");au.addClass("active");this.$content[0].scrollTop=au[0].offsetTop-(this.$content.innerHeight()/2)};this.moveDown=function(){var aw=this.$content.find(".note-hint-item.active");var au=aw.next();if(au.length){this.selectItem(au)}else{var av=aw.parent().next();if(!av.length){av=this.$content.find(".note-hint-group").first()}this.selectItem(av.find(".note-hint-item").first())}};this.moveUp=function(){var av=this.$content.find(".note-hint-item.active");var au=av.prev();if(au.length){this.selectItem(au)}else{var aw=av.parent().prev();if(!aw.length){aw=this.$content.find(".note-hint-group").last()}this.selectItem(aw.find(".note-hint-item").last())}};this.replace=function(){var au=this.$content.find(".note-hint-item.active");if(au.length){var av=this.nodeFromItem(au);this.lastWordRange.insertNode(av);n.createFromNode(av).collapse().select();this.lastWordRange=null;this.hide();an.invoke("editor.focus")}};this.nodeFromItem=function(au){var ax=ap[au.data("index")];var aw=au.data("item");var av=ax.content?ax.content(aw):aw;if(typeof av==="string"){av=d.createText(av)}return av};this.createItemTemplates=function(av,au){var aw=ap[av];return au.map(function(az,ax){var ay=M('<div class="note-hint-item"/>');ay.append(aw.template?aw.template(az):az+"");ay.data({index:av,item:az});if(av===0&&ax===0){ay.addClass("active")}return ay})};this.handleKeydown=function(au){if(!this.$popover.is(":visible")){return}if(au.keyCode===x.code.ENTER){au.preventDefault();this.replace()}else{if(au.keyCode===x.code.UP){au.preventDefault();this.moveUp()}else{if(au.keyCode===x.code.DOWN){au.preventDefault();this.moveDown()}}}};this.searchKeyword=function(av,au,ay){var ax=ap[av];if(ax&&ax.match.test(au)&&ax.search){var aw=ax.match.exec(au);ax.search(aw[1],ay)}else{ay()}};this.createGroup=function(au,av){var aw=M('<div class="note-hint-group note-hint-group-'+au+'"/>');this.searchKeyword(au,av,function(ax){ax=ax||[];if(ax.length){aw.html(am.createItemTemplates(au,ax));am.show()}});return aw};this.handleKeyup=function(aw){if(z.contains([x.code.ENTER,x.code.UP,x.code.DOWN],aw.keyCode)){if(aw.keyCode===x.code.ENTER){if(this.$popover.is(":visible")){return}}}else{var ax=an.invoke("editor.createRange").getWordRange();var av=ax.toString();if(ap.length&&av){this.$content.empty();var au=y.rect2bnd(z.last(ax.getClientRects()));if(au){this.$popover.hide();this.lastWordRange=ax;ap.forEach(function(az,ay){if(az.match.test(av)){am.createGroup(ay,av).appendTo(am.$content)}});if(ar==="top"){this.$popover.css({left:au.left,top:au.top-this.$popover.outerHeight()-ao})}else{this.$popover.css({left:au.left,top:au.top+au.height+ao})}}}else{this.hide()}}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};M.summernote=M.extend(M.summernote,{version:"0.7.3",ui:S,plugins:{},options:{modules:{editor:D,clipboard:t,dropzone:F,codeview:J,statusbar:I,fullscreen:s,handle:af,hintPopover:W,autoLink:ad,autoSync:ak,placeholder:L,buttons:B,toolbar:p,linkDialog:V,linkPopover:Y,imageDialog:G,imagePopover:A,videoDialog:H,helpDialog:f,airPopover:T},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"fa fa-align-left",alignCenter:"fa fa-align-center",alignJustify:"fa fa-align-justify",alignLeft:"fa fa-align-left",alignRight:"fa fa-align-right",indent:"fa fa-indent",outdent:"fa fa-outdent",arrowsAlt:"fa fa-arrows-alt",bold:"fa fa-bold",caret:"caret",circle:"fa fa-circle",close:"fa fa-close",code:"fa fa-code",eraser:"fa fa-eraser",font:"fa fa-font",frame:"fa fa-frame",italic:"fa fa-italic",link:"fa fa-link",unlink:"fa fa-chain-broken",magic:"fa fa-magic",menuCheck:"fa fa-check",minus:"fa fa-minus",orderedlist:"fa fa-list-ol",pencil:"fa fa-pencil",picture:"fa fa-picture-o",question:"fa fa-question",redo:"fa fa-repeat",square:"fa fa-square",strikethrough:"fa fa-strikethrough",subscript:"fa fa-subscript",superscript:"fa fa-superscript",table:"fa fa-table",textHeight:"fa fa-text-height",trash:"fa fa-trash",underline:"fa fa-underline",undo:"fa fa-undo",unorderedlist:"fa fa-list-ul",video:"fa fa-youtube-play"}}})}));
(function(a){a.extend(a.summernote.lang,{"zh-CN":{font:{bold:"",italic:"",underline:"",clear:"",height:"",name:"",strikethrough:"",subscript:"",superscript:"",size:""},image:{image:"",insert:"",resizeFull:" 100%",resizeHalf:" 50%",resizeQuarter:" 25%",floatLeft:"",floatRight:"",floatNone:"",shapeRounded:": ",shapeCircle:": ",shapeThumbnail:": ",shapeNone:": ",dragImageHere:"",selectFromFiles:"",maximumFileSize:"",maximumFileSizeError:"",url:"",remove:""},video:{video:"",videoLink:"",insert:"",url:"",providers:"()"},link:{link:"",insert:"",unlink:"",edit:"",textToDisplay:"",url:"",openInNewWindow:""},table:{table:""},hr:{insert:""},style:{style:"",normal:"",blockquote:"",pre:"",h1:" 1",h2:" 2",h3:" 3",h4:" 4",h5:" 5",h6:" 6"},lists:{unordered:"",ordered:""},options:{help:"",fullscreen:"",codeview:""},paragraph:{paragraph:"",outdent:"",indent:"",left:"",center:"",right:"",justify:""},color:{recent:"",more:"",background:"",foreground:"",transparent:"",setTransparent:"",reset:"",resetToDefault:""},shortcut:{shortcuts:"",close:"",textFormatting:"",action:"",paragraphFormatting:"",documentStyle:"",extraKeys:""},history:{undo:"",redo:""}}})})(jQuery);
(function(a){a.cookie=function(g,f,k){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(f))||f===null||f===undefined)){k=a.extend({},k);if(f===null||f===undefined){k.expires=-1}if(typeof k.expires==="number"){var h=k.expires,j=k.expires=new Date();j.setDate(j.getDate()+h)}f=String(f);return(document.cookie=[encodeURIComponent(g),"=",k.raw?f:encodeURIComponent(f),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join(""))}k=f||{};var b=k.raw?function(i){return i}:decodeURIComponent;var c=document.cookie.split("; ");for(var e=0,d;d=c[e]&&c[e].split("=");e++){if(b(d[0])===g){return b(d[1]||"")}}return null}})(jQuery);
(function(a,b){if(typeof exports=="object"){module.exports=b()}else{if(typeof define=="function"&&define.amd){define(b)}else{a.Spinner=b()}}}(this,function(){var e=["webkit","Moz","ms","O"],o={},n;function g(p,s){var q=document.createElement(p||"div"),r;for(r in s){q[r]=s[r]}return q}function h(q){for(var p=1,r=arguments.length;p<r;p++){q.appendChild(arguments[p])}return q}var i=(function(){var p=g("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],p);return p.sheet||p.styleSheet}());function c(t,p,u,x){var q=["opacity",p,~~(t*100),u,x].join("-"),r=0.01+u/x*100,w=Math.max(1-(1-t)/p*(100-r),t),v=n.substring(0,n.indexOf("Animation")).toLowerCase(),s=v&&"-"+v+"-"||"";if(!o[q]){i.insertRule("@"+s+"keyframes "+q+"{0%{opacity:"+w+"}"+r+"%{opacity:"+t+"}"+(r+0.01)+"%{opacity:1}"+(r+p)%100+"%{opacity:"+t+"}100%{opacity:"+w+"}}",i.cssRules.length);o[q]=1}return q}function m(t,u){var r=t.style,p,q;if(r[u]!==undefined){return u}u=u.charAt(0).toUpperCase()+u.slice(1);for(q=0;q<e.length;q++){p=e[q]+u;if(r[p]!==undefined){return p}}}function f(p,r){for(var q in r){p.style[m(p,q)||q]=r[q]}return p}function k(r){for(var p=1;p<arguments.length;p++){var q=arguments[p];for(var s in q){if(r[s]===undefined){r[s]=q[s]}}}return r}function j(p){var q={x:p.offsetLeft,y:p.offsetTop};while((p=p.offsetParent)){q.x+=p.offsetLeft,q.y+=p.offsetTop}return q}var d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"};function b(p){if(typeof this=="undefined"){return new b(p)}this.opts=k(p||{},b.defaults,d)}b.defaults={};k(b.prototype,{spin:function(y){this.stop();var C=this,q=C.opts,r=C.el=f(g(0,{className:q.className}),{position:q.position,width:0,zIndex:q.zIndex}),B=q.radius+q.length+q.width,D,A;if(y){y.insertBefore(r,y.firstChild||null);A=j(y);D=j(r);f(r,{left:(q.left=="auto"?A.x-D.x+(y.offsetWidth>>1):parseInt(q.left,10)+B)+"px",top:(q.top=="auto"?A.y-D.y+(y.offsetHeight>>1):parseInt(q.top,10)+B)+"px"})}r.setAttribute("role","progressbar");C.lines(r,C.opts);if(!n){var v=0,p=(q.lines-1)*(1-q.direction)/2,u,s=q.fps,x=s/q.speed,w=(1-q.opacity)/(x*q.trail/100),z=x/q.lines;(function t(){v++;for(var E=0;E<q.lines;E++){u=Math.max(1-(v+(q.lines-E)*z)%x*w,q.opacity);C.opacity(r,E*q.direction+p,u,q)}C.timeout=C.el&&setTimeout(t,~~(1000/s))})()}return C},stop:function(){var p=this.el;if(p){clearTimeout(this.timeout);if(p.parentNode){p.parentNode.removeChild(p)}this.el=undefined}return this},lines:function(r,t){var q=0,u=(t.lines-1)*(1-t.direction)/2,p;function s(v,w){return f(g(),{position:"absolute",width:(t.length+t.width)+"px",height:t.width+"px",background:v,boxShadow:w,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*q+t.rotate)+"deg) translate("+t.radius+"px,0)",borderRadius:(t.corners*t.width>>1)+"px"})}for(;q<t.lines;q++){p=f(g(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&c(t.opacity,t.trail,u+q*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"});if(t.shadow){h(p,f(s("#000","0 0 4px #000"),{top:2+"px"}))}h(r,h(p,s(t.color,"0 0 1px rgba(0,0,0,.1)")))}return r},opacity:function(q,p,r){if(p<q.childNodes.length){q.childNodes[p].style.opacity=r}}});function l(){function p(r,q){return g("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',q)}i.addRule(".spin-vml","behavior:url(#default#VML)");b.prototype.lines=function(u,t){var q=t.length+t.width,A=2*q;function z(){return f(p("group",{coordsize:A+" "+A,coordorigin:-q+" "+-q}),{width:A,height:A})}var v=-(t.width+t.length)*2+"px",y=f(z(),{position:"absolute",top:v,left:v}),x;function w(s,r,B){h(y,h(f(z(),{rotation:360/t.lines*s+"deg",left:~~r}),h(f(p("roundrect",{arcsize:t.corners}),{width:q,height:t.width,left:t.radius,top:-t.width>>1,filter:B}),p("fill",{color:t.color,opacity:t.opacity}),p("stroke",{opacity:0}))))}if(t.shadow){for(x=1;x<=t.lines;x++){w(x,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(x=1;x<=t.lines;x++){w(x)}return h(u,y)};b.prototype.opacity=function(r,q,t,s){var u=r.firstChild;s=s.shadow&&s.lines||0;if(u&&q+s<u.childNodes.length){u=u.childNodes[q+s];u=u&&u.firstChild;u=u&&u.firstChild;if(u){u.opacity=t}}}}var a=f(g("group"),{behavior:"url(#default#VML)"});if(!m(a,"transform")&&a.adj){l()}else{n=m(a,"animation")}return b}));
(function(a,b){if(typeof exports==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define(["spin"],b)}else{a.Ladda=b(a.Spinner)}}}(this,function(d){var e=[];function c(i){if(typeof i==="undefined"){console.warn("Ladda button target must be defined.");return}if(!i.querySelector(".ladda-label")){i.innerHTML='<span class="ladda-label">'+i.innerHTML+"</span>"}var k=f(i);var j=document.createElement("span");j.className="ladda-spinner";i.appendChild(j);var l;var h={start:function(){i.setAttribute("disabled","");i.setAttribute("data-loading","");clearTimeout(l);k.spin(j);this.setProgress(0);return this},startAfter:function(m){clearTimeout(l);l=setTimeout(function(){h.start()},m);return this},stop:function(){i.removeAttribute("disabled");i.removeAttribute("data-loading");clearTimeout(l);l=setTimeout(function(){k.stop()},1000);return this},toggle:function(){if(this.isLoading()){this.stop()}else{this.start()}return this},setProgress:function(m){m=Math.max(Math.min(m,1),0);var n=i.querySelector(".ladda-progress");if(m===0&&n&&n.parentNode){n.parentNode.removeChild(n)}else{if(!n){n=document.createElement("div");n.className="ladda-progress";i.appendChild(n)}n.style.width=((m||0)*i.offsetWidth)+"px"}},enable:function(){this.stop();return this},disable:function(){this.stop();i.setAttribute("disabled","");return this},isLoading:function(){return i.hasAttribute("data-loading")}};e.push(h);return h}function g(m,k){k=k||{};var j=[];if(typeof m==="string"){j=a(document.querySelectorAll(m))}else{if(typeof m==="object"&&typeof m.nodeName==="string"){j=[m]}}for(var l=0,h=j.length;l<h;l++){(function(){var n=j[l];if(typeof n.addEventListener==="function"){var i=c(n);var o=-1;n.addEventListener("click",function(){i.startAfter(1);if(typeof k.timeout==="number"){clearTimeout(o);o=setTimeout(i.stop,k.timeout)}if(typeof k.callback==="function"){k.callback.apply(null,[i])}},false)}})()}}function b(){for(var j=0,h=e.length;j<h;j++){e[j].stop()}}function f(k){var i=k.offsetHeight,n;if(i>32){i*=0.8}if(k.hasAttribute("data-spinner-size")){i=parseInt(k.getAttribute("data-spinner-size"),10)}if(k.hasAttribute("data-spinner-color")){n=k.getAttribute("data-spinner-color")}var j=12,h=i*0.2,m=h*0.6,l=h<7?2:3;return new d({color:n||"#fff",lines:j,radius:h,length:m,width:l,zIndex:"auto",top:"auto",left:"auto",className:""})}function a(j){var h=[];for(var k=0;k<j.length;k++){h.push(j[k])}return h}return{bind:g,create:c,stopAll:b}}));
$(function(){$.material.init()});jQuery.gblog=function(b){if(window.console){console.log(b)}else{}};jQuery.gberror=function(b){if(window.console){console.error(b)}else{}};function handleThisCallsErrors(c,b){alert("");$.gberror(""+c)}dwr.engine.setErrorHandler(handleThisCallsErrors);String.prototype.trunc=function(b){return this.substr(0,b-1)+(this.length>b?"...":"")};function displaydate(b){var c=moment(),d=moment(b);if(c.diff(d,"days")>=1){return d.format("YYYYMMD HH:mm:ss")}else{return d.fromNow()}}function replacelinks(c){var e=/(\b(https?|ftp):\/\/[-A-Z0-9+\u0026@#\/%?=~_|!:,.;]*[-A-Z0-9+\u0026@#\/%=~_|])/gi,b="\u003c",d="\u003e";return c.replace(e,b+'a target="_blank" class="biggest" href=\'$1\''+d+"$1"+b+"/a"+d)}(function(b){var c=b({});b.each({trigger:"publish",on:"subscribe",off:"unsubscribe"},function(d,e){jQuery[e]=function(){c[d].apply(c,arguments)}})})(jQuery);$(function(){Handlebars.registerHelper("roleClass",function(b){if(b!==0){return"mdi-daren"}else{return""}});Handlebars.registerHelper("demoLinks",function(c){var e=c.demourl.split("#"),d=$("<div></div>");for(var b=0;b<e.length;b++){if(e[b]!==null&&e[b]!==""){if(e[b]!==null&&e[b].lastIndexOf("zip")<0){var f=e[b].substring(e[b].lastIndexOf("uploads/")+8);filename=f.substring(f.indexOf("/")+1);filename=filename.replace(/\//g,"|");zipfile=f.substring(0,f.indexOf("/"));if(zipfile===""){d.append('<li><a class="iconbefore gbdemobutton ui-state-hover" target="_blank" href="'+global_contextPath+"/demoviewer/"+c.pid+"/empty/"+filename+'.htm">'+b+"</a><li>&nbsp;")}else{d.append('<li><a class="iconbefore gbdemobutton ui-state-hover" target="_blank" href="'+global_contextPath+"/demoviewer/"+c.pid+"/"+zipfile+"/"+filename+'.htm">'+b+"</a><li>&nbsp;")}}else{d.append('<li><a class="iconbefore gbdownloadbutton ui-state-hover" target="_blank" href="'+global_contextPath+"/ajaxdownload.htm?filename="+e[b].substring(e[b].lastIndexOf("/")+1)+'"><span class="ui-icon ui-icon-circle-arrow-s"></span></a><li>&nbsp;')}}}return d.html()});Handlebars.registerHelper("functionTagName",function(d){var i=d.usertagids.split(","),e=d.tags.split(","),h=d.usertagdaren.split(","),j=d.usertagfunctionflag.split(","),f="",b=d.avatar!==""?d.avatar:"avatar.jpg",c=0;if(d.uid===global_onlineuser.uid){c=1}for(var g=0;g<e.length;g++){if(j[g]==="1"){if(e[g]==="#"){f+='<a class="btn btn-xs btn-material-grey" role="button" href="'+global_contextPath+"/mobileusertag/"+i[g]+'.htm"><img class="hidden tagavatar '+(h[g]==="1"?"daren":"")+'" src="'+global_contextPath+"/networks/avatars/30x30"+b+'" /><span class="glyphicon glyphicon-thumbs-up"></span>'+e[g]+"</a>"}else{if(e[g]==="#"){f+='<a class="btn btn-xs btn-material-grey" role="button" href="'+global_contextPath+"/mobileusertag/"+i[g]+'.htm"><img class="hidden tagavatar '+(h[g]==="1"?"daren":"")+'" src="'+global_contextPath+"/networks/avatars/30x30"+b+'" /><span class="glyphicon glyphicon-link"></span>'+e[g]+"</a>"}else{if(e[g]==="#"){f+='<a class="btn btn-xs btn-material-grey" role="button" href="'+global_contextPath+"/mobileusertag/"+i[g]+'.htm"><img class="hidden tagavatar '+(h[g]==="1"?"daren":"")+'" src="'+global_contextPath+"/networks/avatars/30x30"+b+'" /><span class="glyphicon glyphicon-question-sign"></span>'+e[g]+"</a>"}else{f+='<a class="btn btn-xs btn-material-grey" role="button" href="'+global_contextPath+"/mobileusertag/"+i[g]+'.htm"><img class="hidden tagavatar '+(h[g]==="1"?"daren":"")+'" src="'+global_contextPath+"/networks/avatars/30x30"+b+'" /><span class="glyphicon glyphicon-edit"></span>'+e[g]+"</a>"}}}break}}return f});Handlebars.registerHelper("tagList",function(d){var i=d.usertagids.split(","),e=d.tags.split(","),h=d.usertagdaren.split(","),j=d.usertagfunctionflag.split(","),f="",b=d.avatar!==""?d.avatar:"avatar.jpg",c=0;if(d.uid==global_onlineuser.uid){c=1}for(var g=0;g<e.length;g++){if(e[g]!==null&&e[g]!==""){if(j[g]!="1"){f+='<a class="btn btn-xs btn-material-grey" target="_blank" href="'+global_contextPath+"/mobileusertag/"+i[g]+'.htm"><span class="avatar"></span>'+e[g]+"</a>"}}}return f});Handlebars.registerHelper("shortenPostBody",function(b){var c=$("<div/>").append(b).text().trunc(120);return c});Handlebars.registerHelper("transformUrl",function(b){return replacelinks(b)});Handlebars.registerHelper("fetchDomainInUrl",function(b){return fetch_domain_of_url(b)});Handlebars.registerHelper("stripTags",function(c){var b=$("<div/>").append(c).text();if(b.length){b="&nbsp;-&nbsp;"+b}return b});Handlebars.registerHelper("taglistString",function(c){var b=c.tags.split(","),d="";for(a=0;a<b.length;a++){if(b[a]!==null&&b[a]!==""){if(a===b.length-1){d+=b[a]}else{d+=b[a]+" "}}}return d});Handlebars.registerHelper("functionTagFlagClass",function(d){var b=d.tags.split(","),f=d.usertagfunctionflag.split(","),e="gbshare";for(var c=0;c<b.length;c++){if(f[c]==="1"){if(b[c]==="#"){e="gboriginal"}else{if(b[c]==="#"){e="gbarticle"}else{if(b[c]==="#"){e="gbquestion"}else{if(b[c]==="#"){e="gbfreebie"}else{if(b[c]==="#"){e="gbdebug"}}}}}break}}return e});Handlebars.registerHelper("ifCanDelete",function(d){var f="";var b=d.tags.split(","),g=d.usertagfunctionflag.split(","),e="";for(var c=0;c<b.length;c++){if(g[c]==="1"){if(b[c]==="#"){e="editpost"}else{if(b[c]==="#"){e="editpost"}else{if(b[c]==="#"){e="editlink"}else{if(b[c]==="#"){e="editquestion"}else{if(b[c]==="#"){e="editfreebie"}else{if(b[c]==="#"){e="editgbdebug"}}}}}}break}}if(d.uid==global_onlineuser.uid){f='<a style="cursor:pointer" rel="'+d.pid+'" class="postdelete iconbefore"><span class="ui-icon ui-icon-trash"></span></a>'}if(d.uid==global_onlineuser.uid||global_onlineuser.roleid<0){f=f+'<a target="_blank" href="'+global_contextPath+"/"+e+".htm?postid="+d.pid+'" class="iconbefore"><span class="ui-icon ui-icon-pencil"></span></a>'}return f});Handlebars.registerHelper("ifCanFollow",function(c){var d="",b=c.tags.split(",");if(global_onlineuser.uid!==0&&c.uid!==global_onlineuser.uid){d='<a style="cursor:pointer" rel="'+c.pid+'" class="postfollow iconbefore" title=""><span class="ui-icon ui-icon-tag"></span> '+b.length+" </a>"}return d});Handlebars.registerHelper("fromNow",function(d){var c=moment(d),b=moment();if(b.diff(c,"days")>=1){return c.format("YYYYMMD HH:mm:ss")}else{return c.fromNow()}});Handlebars.registerHelper("gbtagsTitle",function(b){return b.title[0]});Handlebars.registerHelper("if_even",function(c,b){if((c%2)==0){return b.fn(this)}else{return b.inverse(this)}});Handlebars.registerHelper("shortenTextBy280",function(b){return b.trunc(150)});Handlebars.registerHelper("compare",function(c,f,e){if(arguments.length<3){throw new Error("Handlerbars Helper 'compare' ")}operator=e.hash.operator||"==";var d={"==":function(g,h){return g==h},"===":function(g,h){return g===h},"!=":function(g,h){return g!=h},"<":function(g,h){return g<h},">":function(g,h){return g>h},"<=":function(g,h){return g<=h},">=":function(g,h){return g>=h},"typeof":function(g,h){return typeof g==h}};if(!d[operator]){throw new Error("Handlerbars Helper 'compare'  "+operator)}var b=d[operator](c,f);if(b){return e.fn(this)}else{return e.inverse(this)}})});
/*
 * 
 */
 
var gbmobile_gblogon = {
	logon: function(){
		$("#loginform").validationEngine('attach',{promptPosition : "topLeft", scroll: false, autoHidePrompt:true, autoHideDelay:2000});
		
		$("#password").keypress(function(event) {
		  if ( event.which == 13 ) {
		     event.preventDefault();
			 $("#logonbtn").trigger('click');	
		  }
		});
		
		$("#logonbtn").click(function(check){
			if(!$("#loginform").validationEngine('validate')){
				return;
			}
			var mailval=$('#email').val();
			var pwdval=$(':password').val()||$('#password').val();//fix the bug login failed for ie6/7/8
			
	 		var l = Ladda.create(this);
	 		l.start();

			identityService.PasswordEncryption(pwdval,{
					async:false,
					callback:function(data){
					   pwdval=data;
					}

			});		
			$.getJSON('ajaxlogin.htm?fixie=' + new Date().getMilliseconds(), {cache:false,mail:mailval,password:pwdval}, function(data) {
				if(data.uid!=="0"){
					/* save cookie for autologin */
					if($('#autolog').data('autosave')){
						$.cookie("gb.mail",mailval,{expires: 30, path: '/'});
						$.cookie("gb.password",pwdval,{expires: 30, path: '/'});
					}
					
					var hash = window.location.hash.substring(1);
					
					if(hash.length>0){
						window.location.href= hash;
					}else{
						window.location.href= global_contextPath + '/index.htm';
					}
					
					$('#logalert').removeClass("alert-danger").addClass("alert-success").removeClass('hidden')
						.find('span').first().addClass('glyphicon-ok-sign').removeClass('glyphicon-exclamation-sign');
					$('#loginfo').html('...');
				}else{
					$('#logalert').addClass("alert-danger").removeClass("alert-success").removeClass('hidden')
					.find('span').first().addClass('glyphicon-exclamation-sign').removeClass('glyphicon-ok-sign');
				}
				l.stop();
			});
			
			check.preventDefault();//  
		});
		
		$('#autolog').click(function(){
			var $this = $(this), autologflag = $this.data('autosave');
			if(autologflag){
				$this.data('autosave',0);
			}else{
				$this.data('autosave',1);
			}
			$this.toggleClass('btn-default').toggleClass('btn-warning').find('.glyphicon').toggleClass('glyphicon-check').toggleClass('glyphicon-unchecked');
		});
		
		if($.cookie("gb.mail")&&$.cookie("gb.password")){
			$('#autolog').removeClass('btn-default').addClass('btn-warning');
		};
	}
}

$(function(){
	gbmobile_gblogon.logon();
});

