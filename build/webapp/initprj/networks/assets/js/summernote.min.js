(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(window.jQuery)}}}(function(M){var y=(function(){var aA=function(aB){return function(aC){return aB===aC}};var av=function(aC,aB){return aC===aB};var ao=function(aB){return function(aD,aC){return aD[aB]===aC[aB]}};var ax=function(){return true};var aq=function(){return false};var ap=function(aB){return function(){return !aB.apply(aB,arguments)}};var au=function(aC,aB){return function(aD){return aC(aD)&&aB(aD)}};var az=function(aB){return aB};var ar=function(aB,aC){return function(){return aB[aC].apply(aB,arguments)}};var an=0;var aw=function(aB){var aC=++an+"";return aB?aB+aC:aC};var am=function(aB){var aC=M(document);return{top:aB.top+aC.scrollTop(),left:aB.left+aC.scrollLeft(),width:aB.right-aB.left,height:aB.bottom-aB.top}};var at=function(aD){var aB={};for(var aC in aD){if(aD.hasOwnProperty(aC)){aB[aD[aC]]=aC}}return aB};var ay=function(aB,aC){aC=aC||"";return aC+aB.split(".").map(function(aD){return aD.substring(0,1).toUpperCase()+aD.substring(1)}).join("")};return{eq:aA,eq2:av,peq2:ao,ok:ax,fail:aq,self:az,not:ap,and:au,invoke:ar,uniqueId:aw,rect2bnd:am,invertObject:at,namespaceToCamel:ay}})();var z=(function(){var az=function(aD){return aD[0]};var aC=function(aD){return aD[aD.length-1]};var av=function(aD){return aD.slice(0,aD.length-1)};var aw=function(aD){return aD.slice(1)};var au=function(aH,aF){for(var aE=0,aD=aH.length;aE<aD;aE++){var aG=aH[aE];if(aF(aG)){return aG}}};var aB=function(aG,aF){for(var aE=0,aD=aG.length;aE<aD;aE++){if(!aF(aG[aE])){return false}}return true};var ay=function(aE,aD){return M.inArray(aD,aE)};var an=function(aE,aD){return ay(aE,aD)!==-1};var at=function(aE,aD){aD=aD||y.self;return aE.reduce(function(aG,aF){return aG+aD(aF)},0)};var aA=function(aG){var aE=[],aD=-1,aF=aG.length;while(++aD<aF){aE[aD]=aG[aD]}return aE};var aq=function(aD){return !aD||!aD.length};var ap=function(aF,aD){if(!aF.length){return[]}var aE=aw(aF);return aE.reduce(function(aI,aH){var aG=aC(aI);if(aD(aC(aG),aH)){aG[aG.length]=aH}else{aI[aI.length]=[aH]}return aI},[[az(aF)]])};var ax=function(aG){var aF=[];for(var aE=0,aD=aG.length;aE<aD;aE++){if(aG[aE]){aF.push(aG[aE])}}return aF};var ao=function(aG){var aF=[];for(var aE=0,aD=aG.length;aE<aD;aE++){if(!an(aF,aG[aE])){aF.push(aG[aE])}}return aF};var ar=function(aF,aE){var aD=ay(aF,aE);if(aD===-1){return null}return aF[aD+1]};var am=function(aF,aE){var aD=ay(aF,aE);if(aD===-1){return null}return aF[aD-1]};return{head:az,last:aC,initial:av,tail:aw,prev:am,next:ar,find:au,contains:an,all:aB,sum:at,from:aA,isEmpty:aq,clusterBy:ap,compact:ax,unique:ao}})();var E=typeof define==="function"&&define.amd;var o=function(ao){var aq=ao==="Comic Sans MS"?"Courier New":"Comic Sans MS";var am=M("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var ap=am.css("fontFamily",aq).width();var an=am.css("fontFamily",ao+","+aq).width();am.remove();return ap!==an};var N=navigator.userAgent;var j=/MSIE|Trident/i.test(N);var Z;if(j){var c=/MSIE (\d+[.]\d+)/.exec(N);if(c){Z=parseFloat(c[1])}c=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N);if(c){Z=parseFloat(c[1])}}var ai={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:j,isFF:/firefox/i.test(N),isWebkit:/webkit/i.test(N),isSafari:/safari/i.test(N),browserVersion:Z,jqueryVersion:parseFloat(M.fn.jquery),isSupportAmd:E,hasCodeMirror:E?require.specified("codemirror"):!!window.CodeMirror,isFontInstalled:o,isW3CRangeSupport:!!document.createRange};var al=String.fromCharCode(160);var X="\ufeff";var d=(function(){var bc=function(bx){return bx&&M(bx).hasClass("note-editable")};var bt=function(bx){return bx&&M(bx).hasClass("note-control-sizing")};var aX=function(bx){bx=bx.toUpperCase();return function(by){return by&&by.nodeName.toUpperCase()===bx}};var a8=function(bx){return bx&&bx.nodeType===3};var a9=function(bx){return bx&&bx.nodeType===1};var bq=function(bx){return bx&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(bx.nodeName.toUpperCase())};var bh=function(bx){if(bc(bx)){return false}return bx&&/^DIV|^P|^LI|^H[1-7]/.test(bx.nodeName.toUpperCase())};var aR=function(bx){return bx&&/^H[1-7]/.test(bx.nodeName.toUpperCase())};var bb=aX("PRE");var aF=aX("LI");var ba=function(bx){return bh(bx)&&!aF(bx)};var bm=aX("TABLE");var aN=function(bx){return !aI(bx)&&!aw(bx)&&!bo(bx)&&!bh(bx)&&!bm(bx)&&!bk(bx)};var aw=function(bx){return bx&&/^UL|^OL/.test(bx.nodeName.toUpperCase())};var bo=aX("HR");var aB=function(bx){return bx&&/^TD|^TH/.test(bx.nodeName.toUpperCase())};var bk=aX("BLOCKQUOTE");var aI=function(bx){return aB(bx)||bk(bx)||bc(bx)};var a7=aX("A");var ao=function(bx){return aN(bx)&&!!bl(bx,bh)};var aO=function(bx){return aN(bx)&&!bl(bx,bh)};var ar=aX("BODY");var be=function(by,bx){return by.nextSibling===bx||by.previousSibling===bx};var aP=function(by,bx){bx=bx||y.ok;var bz=[];if(by.previousSibling&&bx(by.previousSibling)){bz.push(by.previousSibling)}bz.push(by);if(by.nextSibling&&bx(by.nextSibling)){bz.push(by.nextSibling)}return bz};var aS=ai.isMSIE&&ai.browserVersion<11?"&nbsp;":"<br>";var bu=function(bx){if(a8(bx)){return bx.nodeValue.length}return bx.childNodes.length};var av=function(by){var bx=bu(by);if(bx===0){return true}else{if(!a8(by)&&bx===1&&by.innerHTML===aS){return true}else{if(z.all(by.childNodes,a8)&&by.innerHTML===""){return true}}}return false};var bw=function(bx){if(!bq(bx)&&!bu(bx)){bx.innerHTML=aS}};var bl=function(by,bx){while(by){if(bx(by)){return by}if(bc(by)){break}by=by.parentNode}return null};var aD=function(by,bx){by=by.parentNode;while(by){if(bu(by)!==1){break}if(bx(by)){return by}if(bc(by)){break}by=by.parentNode}return null};var aL=function(bz,bx){bx=bx||y.fail;var by=[];bl(bz,function(bA){if(!bc(bA)){by.push(bA)}return bx(bA)});return by};var aE=function(bz,bx){var by=aL(bz);return z.last(by.filter(bx))};var a6=function(bz,by){var bx=aL(bz);for(var bA=by;bA;bA=bA.parentNode){if(M.inArray(bA,bx)>-1){return bA}}return null};var aJ=function(bz,by){by=by||y.fail;var bx=[];while(bz){if(by(bz)){break}bx.push(bz);bz=bz.previousSibling}return bx};var a2=function(bz,by){by=by||y.fail;var bx=[];while(bz){if(by(bz)){break}bx.push(bz);bz=bz.nextSibling}return bx};var ap=function(by,bx){var bA=[];bx=bx||y.ok;(function bz(bD){if(by!==bD&&bx(bD)){bA.push(bD)}for(var bC=0,bB=bD.childNodes.length;bC<bB;bC++){bz(bD.childNodes[bC])}})(by);return bA};var aC=function(bz,by){var bx=bz.parentNode;var bA=M("<"+by+">")[0];bx.insertBefore(bA,bz);bA.appendChild(bz);return bA};var aH=function(bA,bz){var by=bz.nextSibling,bx=bz.parentNode;if(by){bx.insertBefore(bA,by)}else{bx.appendChild(bA)}return bA};var aT=function(bx,by){M.each(by,function(bz,bA){bx.appendChild(bA)});return bx};var bs=function(bx){return bx.offset===0};var bd=function(bx){return bx.offset===bu(bx.node)};var bi=function(bx){return bs(bx)||bd(bx)};var at=function(by,bx){while(by&&by!==bx){if(bg(by)!==0){return false}by=by.parentNode}return true};var au=function(by,bx){while(by&&by!==bx){if(bg(by)!==bu(by.parentNode)-1){return false}by=by.parentNode}return true};var bv=function(bx,by){return bs(bx)&&at(bx.node,by)};var aG=function(bx,by){return bd(bx)&&au(bx.node,by)};var bg=function(bx){var by=0;while((bx=bx.previousSibling)){by+=1}return by};var am=function(bx){return !!(bx&&bx.childNodes&&bx.childNodes.length)};var ax=function(bx,by){var bz,bA;if(bx.offset===0){if(bc(bx.node)){return null}bz=bx.node.parentNode;bA=bg(bx.node)}else{if(am(bx.node)){bz=bx.node.childNodes[bx.offset-1];bA=bu(bz)}else{bz=bx.node;bA=by?0:bx.offset-1}}return{node:bz,offset:bA}};var aV=function(bx,by){var bz,bA;if(bu(bx.node)===bx.offset){if(bc(bx.node)){return null}bz=bx.node.parentNode;bA=bg(bx.node)+1}else{if(am(bx.node)){bz=bx.node.childNodes[bx.offset];bA=0}else{bz=bx.node;bA=by?bu(bx.node):bx.offset+1}}return{node:bz,offset:bA}};var bp=function(bx,by){return bx.node===by.node&&bx.offset===by.offset};var aM=function(bx){if(a8(bx.node)||!am(bx.node)||av(bx.node)){return true}var bz=bx.node.childNodes[bx.offset-1];var by=bx.node.childNodes[bx.offset];if((!bz||bq(bz))&&(!by||bq(by))){return true}return false};var aZ=function(bx,by){while(bx){if(by(bx)){return bx}bx=ax(bx)}return null};var aK=function(bx,by){while(bx){if(by(bx)){return bx}bx=aV(bx)}return null};var bf=function(bx){if(!a8(bx.node)){return false}var by=bx.node.nodeValue.charAt(bx.offset-1);return by&&(by!==" "&&by!==al)};var a4=function(bC,bz,bA,by){var bx=bC;while(bx){bA(bx);if(bp(bx,bz)){break}var bB=by&&bC.node!==bx.node&&bz.node!==bx.node;bx=aV(bx,bB)}};var a1=function(bx,bz){var by=aL(bz,y.eq(bx));return by.map(bg).reverse()};var br=function(bz,bA){var bB=bz;for(var by=0,bx=bA.length;by<bx;by++){if(bB.childNodes.length<=bA[by]){bB=bB.childNodes[bB.childNodes.length-1]}else{bB=bB.childNodes[bA[by]]}}return bB};var ay=function(bx,bz){var bB=bz&&bz.isSkipPaddingBlankHTML;var by=bz&&bz.isNotSplitEdgePoint;if(bi(bx)&&(a8(bx.node)||by)){if(bs(bx)){return bx.node}else{if(bd(bx)){return bx.node.nextSibling}}}if(a8(bx.node)){return bx.node.splitText(bx.offset)}else{var bA=bx.node.childNodes[bx.offset];var bC=aH(bx.node.cloneNode(false),bx.node);aT(bC,a2(bA));if(!bB){bw(bx.node);bw(bC)}return bC}};var aq=function(by,bx,bz){var bA=aL(bx.node,y.eq(by));if(!bA.length){return null}else{if(bA.length===1){return ay(bx,bz)}}return bA.reduce(function(bC,bB){if(bC===bx.node){bC=ay(bx,bz)}return ay({node:bB,offset:bC?d.position(bC):bu(bB)},bz)})};var az=function(bx,bC){var bA=bC?bh:aI;var bB=aL(bx.node,bA);var bE=z.last(bB)||bx.node;var bD,bz;if(bA(bE)){bD=bB[bB.length-2];bz=bE}else{bD=bE;bz=bD.parentNode}var by=bD&&aq(bD,bx,{isSkipPaddingBlankHTML:bC,isNotSplitEdgePoint:bC});if(!by&&bz===bx.node){by=bx.node.childNodes[bx.offset]}return{rightNode:by,container:bz}};var aA=function(bx){return document.createElement(bx)};var a5=function(bx){return document.createTextNode(bx)};var aU=function(bB,bC){if(!bB||!bB.parentNode){return}if(bB.removeNode){return bB.removeNode(bC)}var bA=bB.parentNode;if(!bC){var by=[];var bz,bx;for(bz=0,bx=bB.childNodes.length;bz<bx;bz++){by.push(bB.childNodes[bz])}for(bz=0,bx=by.length;bz<bx;bz++){bA.insertBefore(by[bz],bB)}}bA.removeChild(bB)};var an=function(bz,bx){while(bz){if(bc(bz)||!bx(bz)){break}var by=bz.parentNode;aU(bz);bz=by}};var aY=function(by,bz){if(by.nodeName.toUpperCase()===bz.toUpperCase()){return by}var bx=aA(bz);if(by.style.cssText){bx.style.cssText=by.style.cssText}aT(bx,z.from(by.childNodes));aH(bx,by);aU(by);return bx};var aW=aX("TEXTAREA");var aQ=function(by,bx){var bz=aW(by[0])?by.val():by.html();if(bx){return bz.replace(/[\n\r]/g,"")}return bz};var bn=function(by,bz){var bx=aQ(by);if(bz){var bA=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;bx=bx.replace(bA,function(bC,bF,bB){bB=bB.toUpperCase();var bE=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(bB)&&!!bF;var bD=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(bB);return bC+((bE||bD)?"\n":"")});bx=M.trim(bx)}return bx};var a0=function(bz){var by=M(bz);var bA=by.offset();var bx=by.outerHeight(true);return{left:bA.left,top:bA.top+bx}};var bj=function(bx,by){Object.keys(by).forEach(function(bz){bx.on(bz,by[bz])})};var a3=function(bx,by){Object.keys(by).forEach(function(bz){bx.off(bz,by[bz])})};return{NBSP_CHAR:al,ZERO_WIDTH_NBSP_CHAR:X,blank:aS,emptyPara:"<p>"+aS+"</p>",makePredByNodeName:aX,isEditable:bc,isControlSizing:bt,isText:a8,isElement:a9,isVoid:bq,isPara:bh,isPurePara:ba,isHeading:aR,isInline:aN,isBlock:y.not(aN),isBodyInline:aO,isBody:ar,isParaInline:ao,isPre:bb,isList:aw,isTable:bm,isCell:aB,isBlockquote:bk,isBodyContainer:aI,isAnchor:a7,isDiv:aX("DIV"),isLi:aF,isBR:aX("BR"),isSpan:aX("SPAN"),isB:aX("B"),isU:aX("U"),isS:aX("S"),isI:aX("I"),isImg:aX("IMG"),isTextarea:aW,isEmpty:av,isEmptyAnchor:y.and(a7,av),isClosestSibling:be,withClosestSiblings:aP,nodeLength:bu,isLeftEdgePoint:bs,isRightEdgePoint:bd,isEdgePoint:bi,isLeftEdgeOf:at,isRightEdgeOf:au,isLeftEdgePointOf:bv,isRightEdgePointOf:aG,prevPoint:ax,nextPoint:aV,isSamePoint:bp,isVisiblePoint:aM,prevPointUntil:aZ,nextPointUntil:aK,isCharPoint:bf,walkPoint:a4,ancestor:bl,singleChildAncestor:aD,listAncestor:aL,lastAncestor:aE,listNext:a2,listPrev:aJ,listDescendant:ap,commonAncestor:a6,wrap:aC,insertAfter:aH,appendChildNodes:aT,position:bg,hasChildren:am,makeOffsetPath:a1,fromOffsetPath:br,splitTree:aq,splitPoint:az,create:aA,createText:a5,remove:aU,removeWhile:an,replace:aY,html:bn,value:aQ,posFromPlaceholder:a0,attachEvents:bj,detachEvents:a3}})();var ah=function(am,ao){var an=this;var ap=M.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=ao;this.initialize=function(){this.layoutInfo=ap.createLayout(am,ao);this._initialize();am.hide();return this};this.destroy=function(){this._destroy();am.removeData("summernote");ap.removeLayout(am,this.layoutInfo)};this.reset=function(){this.code(d.emptyPara);this._destroy();this._initialize()};this._initialize=function(){var ar=M.extend({},this.options.buttons);Object.keys(ar).forEach(function(at){an.memo("button."+at,ar[at])});var aq=M.extend({},this.options.modules,M.summernote.plugins||{});Object.keys(aq).forEach(function(at){an.module(at,aq[at],true)});Object.keys(this.modules).forEach(function(at){an.initializeModule(at)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(aq){an.removeModule(aq)});Object.keys(this.memos).forEach(function(aq){an.removeMemo(aq)})};this.code=function(ar){var aq=this.invoke("codeview.isActivated");if(ar===undefined){this.invoke("codeview.sync");return aq?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(aq){this.layoutInfo.codable.val(ar)}else{this.layoutInfo.editable.html(ar)}am.val(ar);this.triggerEvent("change",ar)}};this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true)};this.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true)};this.triggerEvent=function(){var ar=z.head(arguments);var aq=z.tail(z.from(arguments));var at=this.options.callbacks[y.namespaceToCamel(ar,"on")];if(at){at.apply(am[0],aq)}am.trigger("summernote."+ar,aq)};this.initializeModule=function(ar){var aq=this.modules[ar];aq.shouldInitialize=aq.shouldInitialize||y.ok;if(!aq.shouldInitialize()){return}if(aq.initialize){aq.initialize()}if(aq.events){d.attachEvents(am,aq.events)}};this.module=function(at,ar,aq){if(arguments.length===1){return this.modules[at]}this.modules[at]=new ar(this);if(!aq){this.initializeModule(at)}};this.removeModule=function(ar){var aq=this.modules[ar];if(aq.shouldInitialize()){if(aq.events){d.detachEvents(am,aq.events)}if(aq.destroy){aq.destroy()}}delete this.modules[ar]};this.memo=function(aq,ar){if(arguments.length===1){return this.memos[aq]}this.memos[aq]=ar};this.removeMemo=function(aq){if(this.memos[aq]&&this.memos[aq].destroy){this.memos[aq].destroy()}delete this.memos[aq]};this.createInvokeHandler=function(aq,ar){return function(at){at.preventDefault();an.invoke(aq,ar||M(at.target).closest("[data-value]").data("value"))}};this.invoke=function(){var av=z.head(arguments);var at=z.tail(z.from(arguments));var ax=av.split(".");var aw=ax.length>1;var ar=aw&&z.head(ax);var aq=aw?z.last(ax):z.head(ax);var au=this.modules[ar||"editor"];if(!ar&&this[aq]){return this[aq].apply(this,at)}else{if(au&&au[aq]&&au.shouldInitialize()){return au[aq].apply(au,at)}}};return this.initialize()};M.summernote=M.summernote||{lang:{}};M.fn.extend({summernote:function(){var ap=M.type(z.head(arguments));var ar=ap==="string";var aq=ap==="object";var an=aq?z.head(arguments):{};an=M.extend({},M.summernote.options,an);an.langInfo=M.extend(true,{},M.summernote.lang["en-US"],M.summernote.lang[an.lang]);this.each(function(at,aw){var au=M(aw);if(!au.data("summernote")){var av=new ah(au,an);au.data("summernote",av);au.data("summernote").triggerEvent("init",av.layoutInfo)}});var am=this.first();if(am.length){var ao=am.data("summernote");if(ar){return ao.invoke.apply(ao,z.from(arguments))}else{if(an.focus){ao.invoke("editor.focus")}}}return this}});var i=function(am,ao,an,ap){this.render=function(ar){var aq=M(am);if(an&&an.contents){aq.html(an.contents)}if(an&&an.className){aq.addClass(an.className)}if(an&&an.data){M.each(an.data,function(av,au){aq.attr("data-"+av,au)})}if(an&&an.click){aq.on("click",an.click)}if(ao){var at=aq.find(".note-children-container");ao.forEach(function(au){au.render(at.length?at:aq)})}if(ap){ap(aq,an)}if(an&&an.callback){an.callback(aq)}if(ar){ar.append(aq)}return aq}};var Q={create:function(am,an){return function(){var ap=M.isArray(arguments[0])?arguments[0]:[];var ao=typeof arguments[1]==="object"?arguments[1]:arguments[0];if(ao&&ao.children){ap=ao.children}return new i(am,ap,ao,an)}}};var b=Q.create('<div class="note-editor note-frame panel panel-default"/>');var v=Q.create('<div class="note-toolbar panel-heading"/>');var e=Q.create('<div class="note-editing-area"/>');var u=Q.create('<textarea class="note-codable"/>');var U=Q.create('<div class="note-editable panel-body" contentEditable="true"/>');var l=Q.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var r=Q.create('<div class="note-editor"/>');var a=Q.create('<div class="note-editable" contentEditable="true"/>');var aa=Q.create('<div class="note-btn-group btn-group">');var w=Q.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(am,an){if(an&&an.tooltip){am.attr({title:an.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}});var aj=Q.create('<div class="dropdown-menu">',function(an,ao){var am=M.isArray(ao.items)?ao.items.map(function(aq){var ar=(typeof aq==="string")?aq:(aq.value||"");var ap=ao.template?ao.template(aq):aq;return'<li><a href="#" data-value="'+ar+'">'+ap+"</a></li>"}).join(""):ao.items;an.html(am)});var ab=Q.create('<div class="dropdown-menu note-check">',function(an,ao){var am=M.isArray(ao.items)?ao.items.map(function(aq){var ar=(typeof aq==="string")?aq:(aq.value||"");var ap=ao.template?ao.template(aq):aq;return'<li><a href="#" data-value="'+ar+'">'+q(ao.checkClassName)+" "+ap+"</a></li>"}).join(""):ao.items;an.html(am)});var ag=Q.create('<div class="note-color-palette"/>',function(an,ax){var ap=[];for(var aw=0,av=ax.colors.length;aw<av;aw++){var ar=ax.eventName;var am=ax.colors[aw];var at=[];for(var ao=0,au=am.length;ao<au;ao++){var aq=am[ao];at.push(['<button type="button" class="note-color-btn"','style="background-color:',aq,'" ','data-event="',ar,'" ','data-value="',aq,'" ','title="',aq,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}ap.push('<div class="note-color-row">'+at.join("")+"</div>")}an.html(ap.join(""));an.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})});var ae=Q.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(am,an){if(an.fade){am.addClass("fade")}am.html(['<div class="modal-dialog">','  <div class="modal-content">',(an.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+an.title+"</h4>    </div>":""),'    <div class="modal-body">'+an.body+"</div>",(an.footer?'    <div class="modal-footer">'+an.footer+"</div>":""),"  </div>","</div>"].join(""))});var O=Q.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(am,an){var ao=typeof an.direction!=="undefined"?an.direction:"bottom";am.addClass(ao);if(an.hideArrow){am.find(".arrow").hide()}});var q=function(an,am){am=am||"i";return"<"+am+' class="'+an+'"/>'};var S={editor:b,toolbar:v,editingArea:e,codable:u,editable:U,statusbar:l,airEditor:r,airEditable:a,buttonGroup:aa,button:w,dropdown:aj,dropdownCheck:ab,palette:ag,dialog:ae,popover:O,icon:q,toggleBtn:function(an,am){an.toggleClass("disabled",!am);an.attr("disabled",!am)},toggleBtnActive:function(an,am){an.toggleClass("active",am)},onDialogShown:function(an,am){an.one("shown.bs.modal",am)},onDialogHidden:function(an,am){an.one("hidden.bs.modal",am)},showDialog:function(am){am.modal("show")},hideDialog:function(am){am.modal("hide")},createLayout:function(am,an){var ao=(an.airMode?S.airEditor([S.editingArea([S.airEditable()])]):S.editor([S.toolbar(),S.editingArea([S.codable(),S.editable()]),S.statusbar()])).render();ao.insertAfter(am);return{note:am,editor:ao,toolbar:ao.find(".note-toolbar"),editingArea:ao.find(".note-editing-area"),editable:ao.find(".note-editable"),codable:ao.find(".note-codable"),statusbar:ao.find(".note-statusbar")}},removeLayout:function(am,an){am.html(an.editable.html());an.editor.remove();am.show()}};M.extend(M.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var x=(function(){var am={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(an){return z.contains([am.BACKSPACE,am.TAB,am.ENTER,am.SPACe],an)},isMove:function(an){return z.contains([am.LEFT,am.UP,am.RIGHT,am.DOWN],an)},nameFromCode:y.invertObject(am),code:am}})();var n=(function(){var ao=function(aA,ap){var at=aA.parentElement(),av;var az=document.body.createTextRange(),ax;var ay=z.from(at.childNodes);for(av=0;av<ay.length;av++){if(d.isText(ay[av])){continue}az.moveToElementText(ay[av]);if(az.compareEndPoints("StartToStart",aA)>=0){break}ax=ay[av]}if(av!==0&&d.isText(ay[av-1])){var aB=document.body.createTextRange(),aw=null;aB.moveToElementText(ax||at);aB.collapse(!ax);aw=ax?ax.nextSibling:at.firstChild;var ar=aA.duplicate();ar.setEndPoint("StartToStart",aB);var aq=ar.text.replace(/[\r\n]/g,"").length;while(aq>aw.nodeValue.length&&aw.nextSibling){aq-=aw.nodeValue.length;aw=aw.nextSibling}var au=aw.nodeValue;if(ap&&aw.nextSibling&&d.isText(aw.nextSibling)&&aq===aw.nodeValue.length){aq-=aw.nodeValue.length;aw=aw.nextSibling}at=aw;av=aq}return{cont:at,offset:av}};var am=function(ap){var at=function(aw,az){var ay,av;if(d.isText(aw)){var au=d.listPrev(aw,y.not(d.isText));var ax=z.last(au).previousSibling;ay=ax||aw.parentNode;az+=z.sum(z.tail(au),d.nodeLength);av=!ax}else{ay=aw.childNodes[az]||aw;if(d.isText(ay)){return at(ay,0)}az=0;av=false}return{node:ay,collapseToStart:av,offset:az}};var aq=document.body.createTextRange();var ar=at(ap.node,ap.offset);aq.moveToElementText(ar.node);aq.collapse(ar.collapseToStart);aq.moveStart("character",ar.offset);return aq};var an=function(av,au,aq,ap){this.sc=av;this.so=au;this.ec=aq;this.eo=ap;var at=function(){if(ai.isW3CRangeSupport){var aw=document.createRange();aw.setStart(av,au);aw.setEnd(aq,ap);return aw}else{var ax=am({node:av,offset:au});ax.setEndPoint("EndToEnd",am({node:aq,offset:ap}));return ax}};this.getPoints=function(){return{sc:av,so:au,ec:aq,eo:ap}};this.getStartPoint=function(){return{node:av,offset:au}};this.getEndPoint=function(){return{node:aq,offset:ap}};this.select=function(){var ax=at();if(ai.isW3CRangeSupport){var aw=document.getSelection();if(aw.rangeCount>0){aw.removeAllRanges()}aw.addRange(ax)}else{ax.select()}return this};this.scrollIntoView=function(aw){if(aw[0].scrollTop+aw.height()<this.sc.offsetTop){aw[0].scrollTop+=Math.abs(aw[0].scrollTop+aw.height()-this.sc.offsetTop)}return this};this.normalize=function(){var ay=function(az,aA){if((d.isVisiblePoint(az)&&!d.isEdgePoint(az))||(d.isVisiblePoint(az)&&d.isRightEdgePoint(az)&&!aA)||(d.isVisiblePoint(az)&&d.isLeftEdgePoint(az)&&aA)||(d.isVisiblePoint(az)&&d.isBlock(az.node)&&d.isEmpty(az.node))){return az}var aC=d.ancestor(az.node,d.isBlock);if(((d.isLeftEdgePointOf(az,aC)||d.isVoid(d.prevPoint(az).node))&&!aA)||((d.isRightEdgePointOf(az,aC)||d.isVoid(d.nextPoint(az).node))&&aA)){if(d.isVisiblePoint(az)){return az}aA=!aA}var aB=aA?d.nextPointUntil(d.nextPoint(az),d.isVisiblePoint):d.prevPointUntil(d.prevPoint(az),d.isVisiblePoint);return aB||az};var aw=ay(this.getEndPoint(),false);var ax=this.isCollapsed()?aw:ay(this.getStartPoint(),true);return new an(ax.node,ax.offset,aw.node,aw.offset)};this.nodes=function(ay,az){ay=ay||y.ok;var aw=az&&az.includeAncestor;var aD=az&&az.fullyContains;var aB=this.getStartPoint();var aA=this.getEndPoint();var ax=[];var aC=[];d.walkPoint(aB,aA,function(aE){if(d.isEditable(aE.node)){return}var aF;if(aD){if(d.isLeftEdgePoint(aE)){aC.push(aE.node)}if(d.isRightEdgePoint(aE)&&z.contains(aC,aE.node)){aF=aE.node}}else{if(aw){aF=d.ancestor(aE.node,ay)}else{aF=aE.node}}if(aF&&ay(aF)){ax.push(aF)}},true);return z.unique(ax)};this.commonAncestor=function(){return d.commonAncestor(av,aq)};this.expand=function(aw){var ay=d.ancestor(av,aw);var az=d.ancestor(aq,aw);if(!ay&&!az){return new an(av,au,aq,ap)}var ax=this.getPoints();if(ay){ax.sc=ay;ax.so=0}if(az){ax.ec=az;ax.eo=d.nodeLength(az)}return new an(ax.sc,ax.so,ax.ec,ax.eo)};this.collapse=function(aw){if(aw){return new an(av,au,av,au)}else{return new an(aq,ap,aq,ap)}};this.splitText=function(){var aw=av===aq;var ax=this.getPoints();if(d.isText(aq)&&!d.isEdgePoint(this.getEndPoint())){aq.splitText(ap)}if(d.isText(av)&&!d.isEdgePoint(this.getStartPoint())){ax.sc=av.splitText(au);ax.so=0;if(aw){ax.ec=ax.sc;ax.eo=ap-au}}return new an(ax.sc,ax.so,ax.ec,ax.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var ax=this.splitText();var ay=ax.nodes(null,{fullyContains:true});var aw=d.prevPointUntil(ax.getStartPoint(),function(aA){return !z.contains(ay,aA.node)});var az=[];M.each(ay,function(aA,aC){var aB=aC.parentNode;if(aw.node!==aB&&d.nodeLength(aB)===1){az.push(aB)}d.remove(aC,false)});M.each(az,function(aA,aB){d.remove(aB,false)});return new an(aw.node,aw.offset,aw.node,aw.offset).normalize()};var ar=function(aw){return function(){var ax=d.ancestor(av,aw);return !!ax&&(ax===d.ancestor(aq,aw))}};this.isOnEditable=ar(d.isEditable);this.isOnList=ar(d.isList);this.isOnAnchor=ar(d.isAnchor);this.isOnCell=ar(d.isCell);this.isLeftEdgeOf=function(aw){if(!d.isLeftEdgePoint(this.getStartPoint())){return false}var ax=d.ancestor(this.sc,aw);return ax&&d.isLeftEdgeOf(this.sc,ax)};this.isCollapsed=function(){return av===aq&&au===ap};this.wrapBodyInlineWithPara=function(){if(d.isBodyContainer(av)&&d.isEmpty(av)){av.innerHTML=d.emptyPara;return new an(av.firstChild,0,av.firstChild,0)}var ax=this.normalize();if(d.isParaInline(av)||d.isPara(av)){return ax}var aA;if(d.isInline(ax.sc)){var ay=d.listAncestor(ax.sc,y.not(d.isInline));aA=z.last(ay);if(!d.isInline(aA)){aA=ay[ay.length-2]||ax.sc.childNodes[ax.so]}}else{aA=ax.sc.childNodes[ax.so>0?ax.so-1:0]}var az=d.listPrev(aA,d.isParaInline).reverse();az=az.concat(d.listNext(aA.nextSibling,d.isParaInline));if(az.length){var aw=d.wrap(z.head(az),"p");d.appendChildNodes(aw,z.tail(az))}return this.normalize()};this.insertNode=function(ax){var aw=this.wrapBodyInlineWithPara().deleteContents();var ay=d.splitPoint(aw.getStartPoint(),d.isInline(ax));if(ay.rightNode){ay.rightNode.parentNode.insertBefore(ax,ay.rightNode)}else{ay.container.appendChild(ax)}return ax};this.pasteHTML=function(ay){var ax=M("<div></div>").html(ay)[0];var az=z.from(ax.childNodes);var aw=this.wrapBodyInlineWithPara().deleteContents();return az.reverse().map(function(aA){return aw.insertNode(aA)}).reverse()};this.toString=function(){var aw=at();return ai.isW3CRangeSupport?aw.toString():aw.text};this.getWordRange=function(ay){var aw=this.getEndPoint();if(!d.isCharPoint(aw)){return this}var ax=d.prevPointUntil(aw,function(az){return !d.isCharPoint(az)});if(ay){aw=d.nextPointUntil(aw,function(az){return !d.isCharPoint(az)})}return new an(ax.node,ax.offset,aw.node,aw.offset)};this.bookmark=function(aw){return{s:{path:d.makeOffsetPath(aw,av),offset:au},e:{path:d.makeOffsetPath(aw,aq),offset:ap}}};this.paraBookmark=function(aw){return{s:{path:z.tail(d.makeOffsetPath(z.head(aw),av)),offset:au},e:{path:z.tail(d.makeOffsetPath(z.last(aw),aq)),offset:ap}}};this.getClientRects=function(){var aw=at();return aw.getClientRects()}};return{create:function(av,ar,au,ap){if(!arguments.length){if(ai.isW3CRangeSupport){var ay=document.getSelection();if(!ay||ay.rangeCount===0){return null}else{if(d.isBody(ay.anchorNode)){return null}}var ax=ay.getRangeAt(0);av=ax.startContainer;ar=ax.startOffset;au=ax.endContainer;ap=ax.endOffset}else{var aA=document.selection.createRange();var at=aA.duplicate();at.collapse(false);var az=aA;az.collapse(true);var aq=ao(az,true),aw=ao(at,false);if(d.isText(aq.node)&&d.isLeftEdgePoint(aq)&&d.isTextNode(aw.node)&&d.isRightEdgePoint(aw)&&aw.node.nextSibling===aq.node){aq=aw}av=aq.cont;ar=aq.offset;au=aw.cont;ap=aw.offset}}else{if(arguments.length===2){au=av;ap=ar}}return new an(av,ar,au,ap)},createFromNode:function(ar){var au=ar;var at=0;var aq=ar;var ap=d.nodeLength(aq);if(d.isVoid(au)){at=d.listPrev(au).length-1;au=au.parentNode}if(d.isBR(aq)){ap=d.listPrev(aq).length-1;aq=aq.parentNode}else{if(d.isVoid(aq)){ap=d.listPrev(aq).length;aq=aq.parentNode}}return this.create(au,at,aq,ap)},createFromNodeBefore:function(ap){return this.createFromNode(ap).collapse(true)},createFromNodeAfter:function(ap){return this.createFromNode(ap).collapse()},createFromBookmark:function(ar,at){var av=d.fromOffsetPath(ar,at.s.path);var au=at.s.offset;var aq=d.fromOffsetPath(ar,at.e.path);var ap=at.e.offset;return new an(av,au,aq,ap)},createFromParaBookmark:function(at,ar){var au=at.s.offset;var ap=at.e.offset;var av=d.fromOffsetPath(z.head(ar),at.s.path);var aq=d.fromOffsetPath(z.last(ar),at.e.path);return new an(av,au,aq,ap)}}})();var R=(function(){var am=function(ao){return M.Deferred(function(ap){M.extend(new FileReader(),{onload:function(aq){var ar=aq.target.result;ap.resolve(ar)},onerror:function(){ap.reject(this)}}).readAsDataURL(ao)}).promise()};var an=function(ao){return M.Deferred(function(ap){var aq=M("<img>");aq.one("load",function(){aq.off("error abort");ap.resolve(aq)}).one("error abort",function(){aq.off("load").detach();ap.reject(aq)}).css({display:"none"}).appendTo(document.body).attr("src",ao)}).promise()};return{readFileAsDataURL:am,createImage:an}})();var m=function(ap){var an=[],ao=-1;var aq=ap[0];var am=function(){var at=n.create();var au={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:ap.html(),bookmark:(at?at.bookmark(aq):au)}};var ar=function(at){if(at.contents!==null){ap.html(at.contents)}if(at.bookmark!==null){n.createFromBookmark(aq,at.bookmark).select()}};this.rewind=function(){if(ap.html()!==an[ao].contents){this.recordUndo()}ao=0;ar(an[ao])};this.reset=function(){an=[];ao=-1;ap.html("");this.recordUndo()};this.undo=function(){if(ap.html()!==an[ao].contents){this.recordUndo()}if(0<ao){ao--;ar(an[ao])}};this.redo=function(){if(an.length-1>ao){ao++;ar(an[ao])}};this.recordUndo=function(){ao++;if(an.length>ao){an=an.slice(0,ao)}an.push(am())}};var K=function(){var am=function(ap,ao){if(ai.jqueryVersion<1.9){var an={};M.each(ao,function(aq,ar){an[ar]=ap.css(ar)});return an}return ap.css.call(ap,ao)};this.fromNode=function(an){var ao=["font-family","font-size","text-align","list-style-type","line-height"];var ap=am(an,ao)||{};ap["font-size"]=parseInt(ap["font-size"],10);return ap};this.stylePara=function(an,ao){M.each(an.nodes(d.isPara,{includeAncestor:true}),function(aq,ap){M(ap).css(ao)})};this.styleNodes=function(an,ar){an=an.splitText();var av=ar&&ar.nodeName||"SPAN";var at=!!(ar&&ar.expandClosestSibling);var aq=!!(ar&&ar.onlyPartialContains);if(an.isCollapsed()){return[an.insertNode(d.create(av))]}var ap=d.makePredByNodeName(av);var ao=an.nodes(d.isText,{fullyContains:true}).map(function(aw){return d.singleChildAncestor(aw,ap)||d.wrap(aw,av)});if(at){if(aq){var au=an.nodes();ap=y.and(ap,function(aw){return z.contains(au,aw)})}return ao.map(function(ax){var az=d.withClosestSiblings(ax,ap);var aw=z.head(az);var ay=z.tail(az);M.each(ay,function(aA,aB){d.appendChildNodes(aw,aB.childNodes);d.remove(aB)});return z.head(az)})}else{return ao}};this.current=function(ao){var at=M(!d.isElement(ao.sc)?ao.sc.parentNode:ao.sc);var av=this.fromNode(at);try{av=M.extend(av,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(au){}if(!ao.isOnList()){av["list-style"]="none"}else{var ap=["circle","disc","disc-leading-zero","square"];var aq=M.inArray(av["list-style-type"],ap)>-1;av["list-style"]=aq?"unordered":"ordered"}var an=d.ancestor(ao.sc,d.isPara);if(an&&an.style["line-height"]){av["line-height"]=an.style.lineHeight}else{var ar=parseInt(av["line-height"],10)/parseInt(av["font-size"],10);av["line-height"]=ar.toFixed(1)}av.anchor=ao.isOnAnchor()&&d.ancestor(ao.sc,d.isAnchor);av.ancestors=d.listAncestor(ao.sc,d.isEditable);av.range=ao;return av}};var P=function(){this.insertOrderedList=function(){this.toggleList("OL")};this.insertUnorderedList=function(){this.toggleList("UL")};this.indent=function(){var an=this;var am=n.create().wrapBodyInlineWithPara();var ao=am.nodes(d.isPara,{includeAncestor:true});var ap=z.clusterBy(ao,y.peq2("parentNode"));M.each(ap,function(aq,ar){var at=z.head(ar);if(d.isLi(at)){an.wrapList(ar,at.parentNode.nodeName)}else{M.each(ar,function(av,au){M(au).css("marginLeft",function(aw,ax){return(parseInt(ax,10)||0)+25})})}});am.select()};this.outdent=function(){var an=this;var am=n.create().wrapBodyInlineWithPara();var ao=am.nodes(d.isPara,{includeAncestor:true});var ap=z.clusterBy(ao,y.peq2("parentNode"));M.each(ap,function(aq,ar){var at=z.head(ar);if(d.isLi(at)){an.releaseList([ar])}else{M.each(ar,function(av,au){M(au).css("marginLeft",function(aw,ax){ax=(parseInt(ax,10)||0);return ax>25?ax-25:""})})}});am.select()};this.toggleList=function(aq){var an=this;var am=n.create().wrapBodyInlineWithPara();var ap=am.nodes(d.isPara,{includeAncestor:true});var ar=am.paraBookmark(ap);var au=z.clusterBy(ap,y.peq2("parentNode"));if(z.find(ap,d.isPurePara)){var ao=[];M.each(au,function(av,aw){ao=ao.concat(an.wrapList(aw,aq))});ap=ao}else{var at=am.nodes(d.isList,{includeAncestor:true}).filter(function(av){return !M.nodeName(av,aq)});if(at.length){M.each(at,function(av,aw){d.replace(aw,aq)})}else{ap=this.releaseList(au,true)}}n.createFromParaBookmark(ar,ap).select()};this.wrapList=function(ap,ao){var aq=z.head(ap);var at=z.last(ap);var an=d.isList(aq.previousSibling)&&aq.previousSibling;var am=d.isList(at.nextSibling)&&at.nextSibling;var ar=an||d.insertAfter(d.create(ao||"UL"),at);ap=ap.map(function(au){return d.isPurePara(au)?d.replace(au,"LI"):au});d.appendChildNodes(ar,ap);if(am){d.appendChildNodes(ar,z.from(am.childNodes));d.remove(am)}return ap};this.releaseList=function(ao,am){var an=[];M.each(ao,function(ap,aq){var ar=z.head(aq);var at=z.last(aq);var aw=am?d.lastAncestor(ar,d.isList):ar.parentNode;var av=aw.childNodes.length>1?d.splitTree(aw,{node:at.parentNode,offset:d.position(at)+1},{isSkipPaddingBlankHTML:true}):null;var au=d.splitTree(aw,{node:ar.parentNode,offset:d.position(ar)},{isSkipPaddingBlankHTML:true});aq=am?d.listDescendant(au,d.isLi):z.from(au.childNodes).filter(d.isLi);if(am||!d.isList(aw.parentNode)){aq=aq.map(function(ay){return d.replace(ay,"P")})}M.each(z.from(aq).reverse(),function(az,ay){d.insertAfter(ay,aw)});var ax=z.compact([aw,au,av]);M.each(ax,function(ay,az){var aA=[az].concat(d.listDescendant(az,d.isList));M.each(aA.reverse(),function(aB,aC){if(!d.nodeLength(aC)){d.remove(aC,true)}})});an=an.concat(aq)});return an}};var g=function(){var am=new P();this.insertTab=function(ap,ao,an){var aq=d.createText(new Array(an+1).join(d.NBSP_CHAR));ao=ao.deleteContents();ao.insertNode(aq,true);ao=n.create(aq,an);ao.select()};this.insertParagraph=function(ap){var ao=n.create();ao=ao.deleteContents();ao=ao.wrapBodyInlineWithPara();var at=d.ancestor(ao.sc,d.isPara);var ar;if(at){if(d.isEmpty(at)&&d.isLi(at)){am.toggleList(at.parentNode.nodeName);return}else{if(d.isEmpty(at)&&d.isPara(at)&&d.isBlockquote(at.parentNode)){d.insertAfter(at,at.parentNode);ar=at}else{ar=d.splitTree(at,ao.getStartPoint());var an=d.listDescendant(at,d.isEmptyAnchor);an=an.concat(d.listDescendant(ar,d.isEmptyAnchor));M.each(an,function(au,av){d.remove(av)});if((d.isHeading(ar)||d.isPre(ar))&&d.isEmpty(ar)){ar=d.replace(ar,"p")}}}}else{var aq=ao.sc.childNodes[ao.so];ar=M(d.emptyPara)[0];if(aq){ao.sc.insertBefore(ar,aq)}else{ao.sc.appendChild(ar)}}n.create(ar,0).normalize().select().scrollIntoView(ap)}};var k=function(){this.tab=function(an,ap){var am=d.ancestor(an.commonAncestor(),d.isCell);var ar=d.ancestor(am,d.isTable);var ao=d.listDescendant(ar,d.isCell);var aq=z[ap?"prev":"next"](ao,am);if(aq){n.create(aq,0).select()}};this.createTable=function(au,at,aw){var ap=[],ao;for(var aq=0;aq<au;aq++){ap.push("<td>"+d.blank+"</td>")}ao=ap.join("");var ar=[],am;for(var an=0;an<at;an++){ar.push("<tr>"+ao+"</tr>")}am=ar.join("");var av=M("<table>"+am+"</table>");if(aw&&aw.tableClassName){av.addClass(aw.tableClassName)}return av[0]}};var h="bogus";var D=function(ap){var aB=this;var au=ap.layoutInfo.note;var ao=ap.layoutInfo.editor;var ay=ap.layoutInfo.editable;var aD=ap.options;var ar=aD.langInfo;var an=new K();var aA=new k();var az=new g();var am=new P();var av=new m(ay);this.initialize=function(){ay.on("keydown",function(aF){if(aF.keyCode===x.code.ENTER){ap.triggerEvent("enter",aF)}ap.triggerEvent("keydown",aF);if(aD.shortcuts&&!aF.isDefaultPrevented()){aB.handleKeyMap(aF)}}).on("keyup",function(aF){ap.triggerEvent("keyup",aF)}).on("focus",function(aF){ap.triggerEvent("focus",aF)}).on("blur",function(aF){ap.triggerEvent("blur",aF)}).on("mousedown",function(aF){ap.triggerEvent("mousedown",aF)}).on("mouseup",function(aF){ap.triggerEvent("mouseup",aF)}).on("scroll",function(aF){ap.triggerEvent("scroll",aF)}).on("paste",function(aF){ap.triggerEvent("paste",aF)});var aE=ai.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";ay.on(aE,function(){ap.triggerEvent("change",ay.html())});ao.on("focusin",function(aF){ap.triggerEvent("focusin",aF)}).on("focusout",function(aF){ap.triggerEvent("focusout",aF)});if(!aD.airMode&&aD.height){ay.outerHeight(aD.height)}if(!aD.airMode&&aD.maxHeight){ay.css("max-height",aD.maxHeight)}if(!aD.airMode&&aD.minHeight){ay.css("min-height",aD.minHeight)}ay.html(d.html(au)||d.emptyPara);av.recordUndo()};this.destroy=function(){ay.off()};this.handleKeyMap=function(aH){var aI=aD.keyMap[ai.isMac?"mac":"pc"];var aG=[];if(aH.metaKey){aG.push("CMD")}if(aH.ctrlKey&&!aH.altKey){aG.push("CTRL")}if(aH.shiftKey){aG.push("SHIFT")}var aF=x.nameFromCode[aH.keyCode];if(aF){aG.push(aF)}var aE=aI[aG.join("+")];if(aE){aH.preventDefault();ap.invoke(aE)}else{if(x.isEdit(aH.keyCode)){this.afterCommand()}}};this.createRange=function(){this.focus();return n.create()};this.saveRange=function(aE){this.focus();ay.data("range",n.create());if(aE){n.create().collapse().select()}};this.restoreRange=function(){var aE=ay.data("range");if(aE){aE.select();this.focus()}};this.saveTarget=function(aE){ay.data("target",aE)};this.clearTarget=function(){ay.removeData("target")};this.restoreTarget=function(){return ay.data("target")};this.currentStyle=function(){var aE=n.create();if(aE){aE=aE.normalize()}return aE?an.current(aE):an.fromNode(ay)};this.styleFromNode=function(aE){return an.fromNode(aE)};this.undo=function(){ap.triggerEvent("before.command",ay.html());av.undo();ap.triggerEvent("change",ay.html())};ap.memo("help.undo",ar.help.undo);this.redo=function(){ap.triggerEvent("before.command",ay.html());av.redo();ap.triggerEvent("change",ay.html())};ap.memo("help.redo",ar.help.redo);var ax=this.beforeCommand=function(){ap.triggerEvent("before.command",ay.html());aB.focus()};var aC=this.afterCommand=function(aE){av.recordUndo();if(!aE){ap.triggerEvent("change",ay.html())}};var aq=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var aw=0,at=aq.length;aw<at;aw++){this[aq[aw]]=(function(aE){return function(aF){ax();document.execCommand(aE,false,aF);aC(true)}})(aq[aw]);ap.memo("help."+aq[aw],ar.help[aq[aw]])}this.tab=function(){var aE=this.createRange();if(aE.isCollapsed()&&aE.isOnCell()){aA.tab(aE)}else{ax();az.insertTab(ay,aE,aD.tabSize);aC()}};ap.memo("help.tab",ar.help.tab);this.untab=function(){var aE=this.createRange();if(aE.isCollapsed()&&aE.isOnCell()){aA.tab(aE,true)}};ap.memo("help.untab",ar.help.untab);this.wrapCommand=function(aE){return function(){ax();aE.apply(aB,arguments);aC()}};this.insertParagraph=this.wrapCommand(function(){az.insertParagraph(ay)});ap.memo("help.insertParagraph",ar.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){am.insertOrderedList(ay)});ap.memo("help.insertOrderedList",ar.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){am.insertUnorderedList(ay)});ap.memo("help.insertUnorderedList",ar.help.insertUnorderedList);this.indent=this.wrapCommand(function(){am.indent(ay)});ap.memo("help.indent",ar.help.indent);this.outdent=this.wrapCommand(function(){am.outdent(ay)});ap.memo("help.outdent",ar.help.outdent);this.insertImage=function(aF,aE){return R.createImage(aF,aE).then(function(aG){ax();if(typeof aE==="function"){aE(aG)}else{if(typeof aE==="string"){aG.attr("data-filename",aE)}aG.css("width",Math.min(ay.width(),aG.width()))}aG.show();n.create().insertNode(aG[0]);n.createFromNodeAfter(aG[0]).select();aC()}).fail(function(){ap.triggerEvent("image.upload.error")})};this.insertImages=function(aE){M.each(aE,function(aF,aH){var aG=aH.name;if(aD.maximumImageFileSize&&aD.maximumImageFileSize<aH.size){ap.triggerEvent("image.upload.error",ar.image.maximumFileSizeError)}else{R.readFileAsDataURL(aH).then(function(aI){return aB.insertImage(aI,aG)}).fail(function(){ap.triggerEvent("image.upload.error")})}})};this.insertImagesOrCallback=function(aF){var aE=aD.callbacks;if(aE.onImageUpload){ap.triggerEvent("image.upload",aF)}else{this.insertImages(aF)}};this.insertNode=this.wrapCommand(function(aE){n.create().insertNode(aE);n.createFromNodeAfter(aE).select()});this.insertText=this.wrapCommand(function(aF){var aE=n.create().insertNode(d.createText(aF));n.create(aE,d.nodeLength(aE)).select()});this.getSelectedText=function(){var aE=this.createRange();if(aE.isOnAnchor()){aE=n.createFromNode(d.ancestor(aE.sc,d.isAnchor))}return aE.toString()};this.pasteHTML=this.wrapCommand(function(aE){var aF=n.create().pasteHTML(aE);n.createFromNodeAfter(z.last(aF)).select()});this.formatBlock=this.wrapCommand(function(aE){aE=ai.isMSIE?"<"+aE+">":aE;document.execCommand("FormatBlock",false,aE)});this.formatPara=function(){this.formatBlock("P")};ap.memo("help.formatPara",ar.help.formatPara);for(var aw=1;aw<=6;aw++){this["formatH"+aw]=function(aE){return function(){this.formatBlock("H"+aE)}}(aw);ap.memo("help.formatH"+aw,ar.help["formatH"+aw])}this.fontSize=function(aH){this.focus();var aE=n.create();if(aE&&aE.isCollapsed()){var aF=an.styleNodes(aE);var aG=z.head(aF);M(aF).css({"font-size":aH+"px"});if(aG&&!d.nodeLength(aG)){aG.innerHTML=d.ZERO_WIDTH_NBSP_CHAR;n.createFromNodeAfter(aG.firstChild).select();ay.data(h,aG)}}else{ax();M(an.styleNodes(aE)).css({"font-size":aH+"px"});aC()}};this.insertHorizontalRule=this.wrapCommand(function(){var aE=n.create();var aF=aE.insertNode(M("<HR/>")[0]);if(aF.nextSibling){n.create(aF.nextSibling,0).normalize().select()}});ap.memo("help.insertHorizontalRule",ar.help.insertHorizontalRule);this.removeBogus=function(){var aF=ay.data(h);if(!aF){return}var aG=z.find(z.from(aF.childNodes),d.isText);var aE=aG.nodeValue.indexOf(d.ZERO_WIDTH_NBSP_CHAR);if(aE!==-1){aG.deleteData(aE,1)}if(d.isEmpty(aF)){d.remove(aF)}ay.removeData(h)};this.lineHeight=this.wrapCommand(function(aE){an.stylePara(n.create(),{lineHeight:aE})});this.unlink=function(){var aE=this.createRange();if(aE.isOnAnchor()){var aF=d.ancestor(aE.sc,d.isAnchor);aE=n.createFromNode(aF);aE.select();ax();document.execCommand("unlink");aC()}};this.createLink=this.wrapCommand(function(aK){var aL=aK.url;var aH=aK.text;var aO=aK.isNewWindow;var aE=aK.range||this.createRange();var aP=aE.toString()!==aH;if(aD.onCreateLink){aL=aD.onCreateLink(aL)}var aF=[];if(aP){var aJ=aE.insertNode(M("<A>"+aH+"</A>")[0]);aF.push(aJ)}else{aF=an.styleNodes(aE,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}M.each(aF,function(aQ,aR){M(aR).attr("href",aL);if(aO){M(aR).attr("target","_blank")}else{M(aR).removeAttr("target")}});var aN=n.createFromNodeBefore(z.head(aF));var aG=aN.getStartPoint();var aI=n.createFromNodeAfter(z.last(aF));var aM=aI.getEndPoint();n.create(aG.node,aG.offset,aM.node,aM.offset).select()});this.getLinkInfo=function(){this.focus();var aE=n.create().expand(d.isAnchor);var aF=M(z.head(aE.nodes(d.isAnchor)));return{range:aE,text:aE.toString(),isNewWindow:aF.length?aF.attr("target")==="_blank":false,url:aF.length?aF.attr("href"):""}};this.color=this.wrapCommand(function(aF){var aG=aF.foreColor;var aE=aF.backColor;if(aG){document.execCommand("foreColor",false,aG)}if(aE){document.execCommand("backColor",false,aE)}});this.insertTable=this.wrapCommand(function(aE){var aG=aE.split("x");var aF=n.create().deleteContents();aF.insertNode(aA.createTable(aG[0],aG[1],aD))});this.floatMe=this.wrapCommand(function(aF){var aE=M(this.restoreTarget());aE.css("float",aF)});this.resize=this.wrapCommand(function(aF){var aE=M(this.restoreTarget());aE.css({width:aF*100+"%",height:""})});this.resizeTo=function(aJ,aE,aF){var aI;if(aF){var aH=aJ.y/aJ.x;var aG=aE.data("ratio");aI={width:aG>aH?aJ.x:aJ.y/aG,height:aG>aH?aJ.x*aG:aJ.y}}else{aI={width:aJ.x,height:aJ.y}}aE.css(aI)};this.removeMedia=this.wrapCommand(function(){var aE=M(this.restoreTarget()).detach();ap.triggerEvent("media.delete",aE,ay)});this.hasFocus=function(){return ay.is(":focus")};this.focus=function(){if(!this.hasFocus()){ay.focus();if(!this.hasFocus()&&ai.isFF){n.createFromNode(ay[0]).normalize().collapse().select()}}};this.isEmpty=function(){return d.isEmpty(ay[0])||d.emptyPara===ay.html()};this.empty=function(){ap.invoke("code",d.emptyPara)}};var t=function(ao){var an=this;var am=ao.layoutInfo.editable;this.events={"summernote.keydown":function(ap,aq){if(an.needKeydownHook()){if((aq.ctrlKey||aq.metaKey)&&aq.keyCode===x.code.V){ao.invoke("editor.saveRange");an.$paste.focus();setTimeout(function(){an.pasteByHook()},0)}}}};this.needKeydownHook=function(){return(ai.isMSIE&&ai.browserVersion>10)||ai.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=M("<div />").attr("contenteditable",true).css({position:"absolute",left:-100000,opacity:0});am.before(this.$paste);this.$paste.on("paste",function(ap){ao.triggerEvent("paste",ap)})}else{am.on("paste",this.pasteByEvent)}};this.destroy=function(){if(this.needKeydownHook()){this.$paste.remove();this.$paste=null}};this.pasteByHook=function(){var av=this.$paste[0].firstChild;if(d.isImg(av)){var ap=av.src;var at=atob(ap.split(",")[1]);var aw=new Uint8Array(at.length);for(var ar=0;ar<at.length;ar++){aw[ar]=at.charCodeAt(ar)}var aq=new Blob([aw],{type:"image/png"});aq.name="clipboard.png";ao.invoke("editor.restoreRange");ao.invoke("editor.focus");ao.invoke("editor.insertImagesOrCallback",[aq])}else{var au=M("<div />").html(this.$paste.html()).html();ao.invoke("editor.restoreRange");ao.invoke("editor.focus");if(au){ao.invoke("editor.pasteHTML",au)}}this.$paste.empty()};this.pasteByEvent=function(aq){var ar=aq.originalEvent.clipboardData;if(ar&&ar.items&&ar.items.length){var ap=z.head(ar.items);if(ap.kind==="file"&&ap.type.indexOf("image/")!==-1){ao.invoke("editor.insertImagesOrCallback",[ap.getAsFile()])}ao.invoke("editor.afterCommand")}}};var F=function(ao){var ar=M(document);var ap=ao.layoutInfo.editor;var am=ao.layoutInfo.editable;var an=ao.options;var aq=an.langInfo;var at=M(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(ap);this.initialize=function(){if(an.disableDragAndDrop){ar.on("drop",function(au){au.preventDefault()})}else{this.attachDragAndDropEvent()}};this.attachDragAndDropEvent=function(){var av=M(),au=at.find(".note-dropzone-message");ar.on("dragenter",function(ay){var ax=ao.invoke("codeview.isActivated");var aw=ap.width()>0&&ap.height()>0;if(!ax&&!av.length&&aw){ap.addClass("dragover");at.width(ap.width());at.height(ap.height());au.text(aq.image.dragImageHere)}av=av.add(ay.target)}).on("dragleave",function(aw){av=av.not(aw.target);if(!av.length){ap.removeClass("dragover")}}).on("drop",function(){av=M();ap.removeClass("dragover")});at.on("dragenter",function(){at.addClass("hover");au.text(aq.image.dropImage)}).on("dragleave",function(){at.removeClass("hover");au.text(aq.image.dragImageHere)});at.on("drop",function(aw){var ax=aw.originalEvent.dataTransfer;if(ax&&ax.files&&ax.files.length){aw.preventDefault();am.focus();ao.invoke("editor.insertImagesOrCallback",ax.files)}else{M.each(ax.types,function(ay,az){var aA=ax.getData(az);if(az.toLowerCase().indexOf("text")>-1){ao.invoke("editor.pasteHTML",aA)}else{M(aA).each(function(){ao.invoke("editor.insertNode",this)})}})}}).on("dragover",false)}};var C;if(ai.hasCodeMirror){if(ai.isSupportAmd){require(["codemirror"],function(am){C=am})}else{C=window.CodeMirror}}var J=function(ap){var aq=ap.layoutInfo.editor;var an=ap.layoutInfo.editable;var am=ap.layoutInfo.codable;var ao=ap.options;this.sync=function(){var ar=this.isActivated();if(ar&&ai.hasCodeMirror){am.data("cmEditor").save()}};this.isActivated=function(){return aq.hasClass("codeview")};this.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}ap.triggerEvent("codeview.toggled")};this.activate=function(){am.val(d.html(an,ao.prettifyHtml));am.height(an.height());ap.invoke("toolbar.updateCodeview",true);aq.addClass("codeview");am.focus();if(ai.hasCodeMirror){var at=C.fromTextArea(am[0],ao.codemirror);if(ao.codemirror.tern){var ar=new C.TernServer(ao.codemirror.tern);at.ternServer=ar;at.on("cursorActivity",function(au){ar.updateArgHints(au)})}at.setSize(null,an.outerHeight());am.data("cmEditor",at)}};this.deactivate=function(){if(ai.hasCodeMirror){var au=am.data("cmEditor");am.val(au.getValue());au.toTextArea()}var at=d.value(am,ao.prettifyHtml)||d.emptyPara;var ar=an.html()!==at;an.html(at);an.height(ao.height?am.height():"auto");aq.removeClass("codeview");if(ar){ap.triggerEvent("change",an.html(),an)}an.focus();ap.invoke("toolbar.updateCodeview",false)};this.destroy=function(){if(this.isActivated()){this.deactivate()}}};var ac=24;var I=function(ap){var aq=M(document);var am=ap.layoutInfo.statusbar;var an=ap.layoutInfo.editable;var ao=ap.options;this.initialize=function(){if(ao.airMode||ao.disableResizeEditor){return}am.on("mousedown",function(at){at.preventDefault();at.stopPropagation();var ar=an.offset().top-aq.scrollTop();aq.on("mousemove",function(av){var au=av.clientY-(ar+ac);au=(ao.minheight>0)?Math.max(au,ao.minheight):au;au=(ao.maxHeight>0)?Math.min(au,ao.maxHeight):au;an.height(au)}).one("mouseup",function(){aq.off("mousemove")})})};this.destroy=function(){am.off()}};var s=function(ap){var ar=ap.layoutInfo.editor;var ao=ap.layoutInfo.toolbar;var an=ap.layoutInfo.editable;var am=ap.layoutInfo.codable;var at=M(window);var aq=M("html, body");this.toggle=function(){var au=function(aw){an.css("height",aw.h);am.css("height",aw.h);if(am.data("cmeditor")){am.data("cmeditor").setsize(null,aw.h)}};ar.toggleClass("fullscreen");var av=ar.hasClass("fullscreen");if(av){an.data("orgHeight",an.css("height"));at.on("resize",function(){au({h:at.height()-ao.outerHeight()})}).trigger("resize");aq.css("overflow","hidden")}else{at.off("resize");au({h:an.data("orgHeight")});aq.css("overflow","visible")}ap.invoke("toolbar.updateFullscreen",av)}};var af=function(ao){var am=this;var aq=M(document);var ap=ao.layoutInfo.editingArea;var an=ao.options;this.events={"summernote.mousedown":function(ar,at){if(am.update(at.target)){at.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){am.update()}};this.initialize=function(){this.$handle=M(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',(an.disableResizeImage?"note-control-holder":"note-control-sizing"),' note-control-se"></div>',(an.disableResizeImage?"":'<div class="note-control-selection-info"></div>'),"</div>","</div>"].join("")).prependTo(ap);this.$handle.on("mousedown",function(at){if(d.isControlSizing(at.target)){at.preventDefault();at.stopPropagation();var ar=am.$handle.find(".note-control-selection").data("target"),av=ar.offset(),au=aq.scrollTop();aq.on("mousemove",function(aw){ao.invoke("editor.resizeTo",{x:aw.clientX-av.left,y:aw.clientY-(av.top-au)},ar,!aw.shiftKey);am.update(ar[0])}).one("mouseup",function(aw){aw.preventDefault();aq.off("mousemove");ao.invoke("editor.afterCommand")});if(!ar.data("ratio")){ar.data("ratio",ar.height()/ar.width())}}})};this.destroy=function(){this.$handle.remove()};this.update=function(av){var ay=d.isImg(av);var ar=this.$handle.find(".note-control-selection");ao.invoke("imagePopover.update",av);if(ay){var at=M(av);var ax=at.position();var au={w:at.outerWidth(true),h:at.outerHeight(true)};ar.css({display:"block",left:ax.left,top:ax.top,width:au.w,height:au.h}).data("target",at);var aw=au.w+"x"+au.h;ar.find(".note-control-selection-info").text(aw);ao.invoke("editor.saveTarget",av)}else{this.hide()}return ay};this.hide=function(){ao.invoke("editor.clearTarget");this.$handle.children().hide()}};var ad=function(ao){var am=this;var ap="http://";var an=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(aq,ar){if(!ar.isDefaultPrevented()){am.handleKeyup(ar)}},"summernote.keydown":function(aq,ar){am.handleKeydown(ar)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(!this.lastWordRange){return}var aq=this.lastWordRange.toString();var ar=aq.match(an);if(ar&&(ar[1]||ar[2])){var au=ar[1]?aq:ap+aq;var at=M("<a />").html(aq).attr("href",au)[0];this.lastWordRange.insertNode(at);this.lastWordRange=null;ao.invoke("editor.focus")}};this.handleKeydown=function(aq){if(z.contains([x.code.ENTER,x.code.SPACE],aq.keyCode)){var ar=ao.invoke("editor.createRange").getWordRange();this.lastWordRange=ar}};this.handleKeyup=function(aq){if(z.contains([x.code.ENTER,x.code.SPACE],aq.keyCode)){this.replace()}}};var ak=function(an){var am=an.layoutInfo.note;this.events={"summernote.change":function(){am.val(an.invoke("code"))}};this.shouldInitialize=function(){return d.isTextarea(am[0])}};var L=function(ao){var am=this;var ap=ao.layoutInfo.editingArea;var an=ao.options;this.events={"summernote.init summernote.change":function(){am.update()},"summernote.codeview.toggled":function(){am.update()}};this.shouldInitialize=function(){return !!an.placeholder};this.initialize=function(){this.$placeholder=M('<div class="note-placeholder">');this.$placeholder.on("click",function(){ao.invoke("focus")}).text(an.placeholder).prependTo(ap)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var aq=!ao.invoke("codeview.isActivated")&&ao.invoke("editor.isEmpty");this.$placeholder.toggle(aq)}};var B=function(ap){var am=this;var ar=M.summernote.ui;var ao=ap.layoutInfo.toolbar;var an=ap.options;var au=an.langInfo;var at=y.invertObject(an.keyMap[ai.isMac?"mac":"pc"]);var aq=this.representShortcut=function(aw){var av=at[aw];if(ai.isMac){av=av.replace("CMD","⌘").replace("SHIFT","⇧")}av=av.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+av+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons()};this.addToolbarButtons=function(){ap.memo("button.style",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.magic)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.style.style,data:{toggle:"dropdown"}}),ar.dropdown({className:"dropdown-style",items:ap.options.styleTags,template:function(aE){if(typeof aE==="string"){aE={tag:aE,title:aE}}var aB=aE.tag;var aF=aE.title;var aD=aE.style?' style="'+aE.style+'" ':"";var aC=aE.className?' className="'+aE.className+'"':"";return"<"+aB+aD+aC+">"+aF+"</"+aB+">"},click:ap.createInvokeHandler("editor.formatBlock")})]).render()});ap.memo("button.bold",function(){return ar.button({className:"note-btn-bold",contents:ar.icon(an.icons.bold),tooltip:au.font.bold+aq("bold"),click:ap.createInvokeHandler("editor.bold")}).render()});ap.memo("button.italic",function(){return ar.button({className:"note-btn-italic",contents:ar.icon(an.icons.italic),tooltip:au.font.italic+aq("italic"),click:ap.createInvokeHandler("editor.italic")}).render()});ap.memo("button.underline",function(){return ar.button({className:"note-btn-underline",contents:ar.icon(an.icons.underline),tooltip:au.font.underline+aq("underline"),click:ap.createInvokeHandler("editor.underline")}).render()});ap.memo("button.clear",function(){return ar.button({contents:ar.icon(an.icons.eraser),tooltip:au.font.clear+aq("removeFormat"),click:ap.createInvokeHandler("editor.removeFormat")}).render()});ap.memo("button.strikethrough",function(){return ar.button({className:"note-btn-strikethrough",contents:ar.icon(an.icons.strikethrough),tooltip:au.font.strikethrough+aq("strikethrough"),click:ap.createInvokeHandler("editor.strikethrough")}).render()});ap.memo("button.superscript",function(){return ar.button({className:"note-btn-superscript",contents:ar.icon(an.icons.superscript),tooltip:au.font.superscript,click:ap.createInvokeHandler("editor.superscript")}).render()});ap.memo("button.subscript",function(){return ar.button({className:"note-btn-subscript",contents:ar.icon(an.icons.subscript),tooltip:au.font.subscript,click:ap.createInvokeHandler("editor.subscript")}).render()});ap.memo("button.fontname",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+ar.icon(an.icons.caret,"span"),tooltip:au.font.name,data:{toggle:"dropdown"}}),ar.dropdownCheck({className:"dropdown-fontname",checkClassName:an.icons.menuCheck,items:an.fontNames.filter(function(aB){return ai.isFontInstalled(aB)||z.contains(an.fontNamesIgnoreCheck,aB)}),template:function(aB){return'<span style="font-family:'+aB+'">'+aB+"</span>"},click:ap.createInvokeHandler("editor.fontName")})]).render()});ap.memo("button.fontsize",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+ar.icon(an.icons.caret,"span"),tooltip:au.font.size,data:{toggle:"dropdown"}}),ar.dropdownCheck({className:"dropdown-fontsize",checkClassName:an.icons.menuCheck,items:an.fontSizes,click:ap.createInvokeHandler("editor.fontSize")})]).render()});ap.memo("button.color",function(){return ar.buttonGroup({className:"note-color",children:[ar.button({className:"note-current-color-button",contents:ar.icon(an.icons.font+" note-recent-color"),tooltip:au.color.recent,click:ap.createInvokeHandler("editor.color"),callback:function(aC){var aB=aC.find(".note-recent-color");aB.css({"background-color":"yellow"});aC.data("value",{backColor:"yellow"})}}),ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.caret,"span"),tooltip:au.color.more,data:{toggle:"dropdown"}}),ar.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+au.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',au.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+au.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',au.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(aB){aB.find(".note-holder").each(function(){var aC=M(this);aC.append(ar.palette({colors:an.colors,eventName:aC.data("event")}).render())})},click:function(aE){var aG=M(aE.target);var aB=aG.data("event");var aF=aG.data("value");if(aB&&aF){var aC=aB==="backColor"?"background-color":"color";var aI=aG.closest(".note-color").find(".note-recent-color");var aH=aG.closest(".note-color").find(".note-current-color-button");var aD=aH.data("value");aD[aB]=aF;aI.css(aC,aF);aH.data("value",aD);ap.invoke("editor."+aB,aF)}}})]}).render()});ap.memo("button.ol",function(){return ar.button({contents:ar.icon(an.icons.unorderedlist),tooltip:au.lists.unordered+aq("insertUnorderedList"),click:ap.createInvokeHandler("editor.insertUnorderedList")}).render()});ap.memo("button.ul",function(){return ar.button({contents:ar.icon(an.icons.orderedlist),tooltip:au.lists.ordered+aq("insertOrderedList"),click:ap.createInvokeHandler("editor.insertOrderedList")}).render()});var aA=ar.button({contents:ar.icon(an.icons.alignLeft),tooltip:au.paragraph.left+aq("justifyLeft"),click:ap.createInvokeHandler("editor.justifyLeft")});var aw=ar.button({contents:ar.icon(an.icons.alignCenter),tooltip:au.paragraph.center+aq("justifyCenter"),click:ap.createInvokeHandler("editor.justifyCenter")});var ax=ar.button({contents:ar.icon(an.icons.alignRight),tooltip:au.paragraph.right+aq("justifyRight"),click:ap.createInvokeHandler("editor.justifyRight")});var ay=ar.button({contents:ar.icon(an.icons.alignJustify),tooltip:au.paragraph.justify+aq("justifyFull"),click:ap.createInvokeHandler("editor.justifyFull")});var az=ar.button({contents:ar.icon(an.icons.outdent),tooltip:au.paragraph.outdent+aq("outdent"),click:ap.createInvokeHandler("editor.outdent")});var av=ar.button({contents:ar.icon(an.icons.indent),tooltip:au.paragraph.indent+aq("indent"),click:ap.createInvokeHandler("editor.indent")});ap.memo("button.justifyLeft",y.invoke(aA,"render"));ap.memo("button.justifyCenter",y.invoke(aw,"render"));ap.memo("button.justifyRight",y.invoke(ax,"render"));ap.memo("button.justifyFull",y.invoke(ay,"render"));ap.memo("button.outdent",y.invoke(az,"render"));ap.memo("button.indent",y.invoke(av,"render"));ap.memo("button.paragraph",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.align)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.paragraph.paragraph,data:{toggle:"dropdown"}}),ar.dropdown([ar.buttonGroup({className:"note-align",children:[aA,aw,ax,ay]}),ar.buttonGroup({className:"note-list",children:[az,av]})])]).render()});ap.memo("button.height",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.textHeight)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.font.height,data:{toggle:"dropdown"}}),ar.dropdownCheck({items:an.lineHeights,checkClassName:an.icons.menuCheck,className:"dropdown-line-height",click:ap.createInvokeHandler("editor.lineHeight")})]).render()});ap.memo("button.table",function(){return ar.buttonGroup([ar.button({className:"dropdown-toggle",contents:ar.icon(an.icons.table)+" "+ar.icon(an.icons.caret,"span"),tooltip:au.table.table,data:{toggle:"dropdown"}}),ar.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(aB){var aC=aB.find(".note-dimension-picker-mousecatcher");aC.css({width:an.insertTableMaxSize.col+"em",height:an.insertTableMaxSize.row+"em"}).mousedown(ap.createInvokeHandler("editor.insertTable")).on("mousemove",am.tableMoveHandler)}}).render()});ap.memo("button.link",function(){return ar.button({contents:ar.icon(an.icons.link),tooltip:au.link.link,click:ap.createInvokeHandler("linkDialog.show")}).render()});ap.memo("button.picture",function(){return ar.button({contents:ar.icon(an.icons.picture),tooltip:au.image.image,click:ap.createInvokeHandler("imageDialog.show")}).render()});ap.memo("button.video",function(){return ar.button({contents:ar.icon(an.icons.video),tooltip:au.video.video,click:ap.createInvokeHandler("videoDialog.show")}).render()});ap.memo("button.hr",function(){return ar.button({contents:ar.icon(an.icons.minus),tooltip:au.hr.insert+aq("insertHorizontalRule"),click:ap.createInvokeHandler("editor.insertHorizontalRule")}).render()});ap.memo("button.fullscreen",function(){return ar.button({className:"btn-fullscreen",contents:ar.icon(an.icons.arrowsAlt),tooltip:au.options.fullscreen,click:ap.createInvokeHandler("fullscreen.toggle")}).render()});ap.memo("button.codeview",function(){return ar.button({className:"btn-codeview",contents:ar.icon(an.icons.code),tooltip:au.options.codeview,click:ap.createInvokeHandler("codeview.toggle")}).render()});ap.memo("button.redo",function(){return ar.button({contents:ar.icon(an.icons.redo),tooltip:au.history.redo+aq("redo"),click:ap.createInvokeHandler("editor.redo")}).render()});ap.memo("button.undo",function(){return ar.button({contents:ar.icon(an.icons.undo),tooltip:au.history.undo+aq("undo"),click:ap.createInvokeHandler("editor.undo")}).render()});ap.memo("button.help",function(){return ar.button({contents:ar.icon(an.icons.question),tooltip:au.options.help,click:ap.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){ap.memo("button.imageSize100",function(){return ar.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:au.image.resizeFull,click:ap.createInvokeHandler("editor.resize","1")}).render()});ap.memo("button.imageSize50",function(){return ar.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:au.image.resizeHalf,click:ap.createInvokeHandler("editor.resize","0.5")}).render()});ap.memo("button.imageSize25",function(){return ar.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:au.image.resizeQuarter,click:ap.createInvokeHandler("editor.resize","0.25")}).render()});ap.memo("button.floatLeft",function(){return ar.button({contents:ar.icon(an.icons.alignLeft),tooltip:au.image.floatLeft,click:ap.createInvokeHandler("editor.floatMe","left")}).render()});ap.memo("button.floatRight",function(){return ar.button({contents:ar.icon(an.icons.alignRight),tooltip:au.image.floatRight,click:ap.createInvokeHandler("editor.floatMe","right")}).render()});ap.memo("button.floatNone",function(){return ar.button({contents:ar.icon(an.icons.alignJustify),tooltip:au.image.floatNone,click:ap.createInvokeHandler("editor.floatMe","none")}).render()});ap.memo("button.removeMedia",function(){return ar.button({contents:ar.icon(an.icons.trash),tooltip:au.image.remove,click:ap.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){ap.memo("button.linkDialogShow",function(){return ar.button({contents:ar.icon(an.icons.link),tooltip:au.link.edit,click:ap.createInvokeHandler("linkDialog.show")}).render()});ap.memo("button.unlink",function(){return ar.button({contents:ar.icon(an.icons.unlink),tooltip:au.link.unlink,click:ap.createInvokeHandler("editor.unlink")}).render()})};this.build=function(aE,av){for(var aF=0,ay=av.length;aF<ay;aF++){var aC=av[aF];var aD=aC[0];var az=aC[1];var aB=ar.buttonGroup({className:"note-"+aD}).render();for(var aA=0,ax=az.length;aA<ax;aA++){var aw=ap.memo("button."+az[aA]);if(aw){aB.append(typeof aw==="function"?aw():aw)}}aB.appendTo(aE)}};this.updateCurrentStyle=function(){var az=ap.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return az["font-bold"]==="bold"},".note-btn-italic":function(){return az["font-italic"]==="italic"},".note-btn-underline":function(){return az["font-underline"]==="underline"},".note-btn-subscript":function(){return az["font-subscript"]==="subscript"},".note-btn-superscript":function(){return az["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return az["font-strikethrough"]==="strikethrough"}});if(az["font-family"]){var av=az["font-family"].split(",").map(function(aA){return aA.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var ax=z.find(av,function(aA){return ai.isFontInstalled(aA)||z.contains(an.fontNamesIgnoreCheck,aA)});ao.find(".dropdown-fontname li a").each(function(){var aA=(M(this).data("value")+"")===(ax+"");this.className=aA?"checked":""});ao.find(".note-current-fontname").text(ax)}if(az["font-size"]){var ay=az["font-size"];ao.find(".dropdown-fontsize li a").each(function(){var aA=(M(this).data("value")+"")===(ay+"");this.className=aA?"checked":""});ao.find(".note-current-fontsize").text(ay)}if(az["line-height"]){var aw=az["line-height"];ao.find(".dropdown-line-height li a").each(function(){var aA=(M(this).data("value")+"")===(aw+"");this.className=aA?"checked":""})}};this.updateBtnStates=function(av){M.each(av,function(aw,ax){ar.toggleBtnActive(ao.find(aw),ax())})};this.tableMoveHandler=function(aw){var aE=18;var ay=M(aw.target.parentNode);var ax=ay.next();var aD=ay.find(".note-dimension-picker-mousecatcher");var az=ay.find(".note-dimension-picker-highlighted");var aA=ay.find(".note-dimension-picker-unhighlighted");var aC;if(aw.offsetX===undefined){var av=M(aw.target).offset();aC={x:aw.pageX-av.left,y:aw.pageY-av.top}}else{aC={x:aw.offsetX,y:aw.offsetY}}var aB={c:Math.ceil(aC.x/aE)||1,r:Math.ceil(aC.y/aE)||1};az.css({width:aB.c+"em",height:aB.r+"em"});aD.data("value",aB.c+"x"+aB.r);if(3<aB.c&&aB.c<an.insertTableMaxSize.col){aA.css({width:aB.c+1+"em"})}if(3<aB.r&&aB.r<an.insertTableMaxSize.row){aA.css({height:aB.r+1+"em"})}ax.html(aB.c+" x "+aB.r)}};var p=function(ap){var aq=M.summernote.ui;var am=ap.layoutInfo.note;var ao=ap.layoutInfo.toolbar;var an=ap.options;this.shouldInitialize=function(){return !an.airMode};this.initialize=function(){an.toolbar=an.toolbar||[];if(!an.toolbar.length){ao.hide()}else{ap.invoke("buttons.build",ao,an.toolbar)}if(an.toolbarContainer){ao.appendTo(an.toolbarContainer)}am.on("summernote.keyup summernote.mouseup summernote.change",function(){ap.invoke("buttons.updateCurrentStyle")});ap.invoke("buttons.updateCurrentStyle")};this.destroy=function(){ao.children().remove()};this.updateFullscreen=function(ar){aq.toggleBtnActive(ao.find(".btn-fullscreen"),ar)};this.updateCodeview=function(ar){aq.toggleBtnActive(ao.find(".btn-codeview"),ar);if(ar){this.deactivate()}else{this.activate()}};this.activate=function(ar){var at=ao.find("button");if(!ar){at=at.not(".btn-codeview")}aq.toggleBtn(at,true)};this.deactivate=function(ar){var at=ao.find("button");if(!ar){at=at.not(".btn-codeview")}aq.toggleBtn(at,false)}};var V=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.initialize=function(){var au=an.dialogsInBody?M(document.body):aq;var at='<div class="form-group"><label>'+ar.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+ar.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(!an.disableLinkTarget?'<div class="checkbox"><label><input type="checkbox" checked> '+ar.link.openInNewWindow+"</label></div>":"");var av='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+ar.link.insert+"</button>";this.$dialog=ap.dialog({className:"link-dialog",title:ar.link.insert,fade:an.dialogsFade,body:at,footer:av}).render().appendTo(au)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(au,at){au.on("keypress",function(av){if(av.keyCode===x.code.ENTER){at.trigger("click")}})};this.showLinkDialog=function(at){return M.Deferred(function(ax){var aw=am.$dialog.find(".note-link-text"),ay=am.$dialog.find(".note-link-url"),av=am.$dialog.find(".note-link-btn"),au=am.$dialog.find("input[type=checkbox]");ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");aw.val(at.text);aw.on("input",function(){ap.toggleBtn(av,aw.val()&&ay.val());at.text=aw.val()});if(!at.url){at.url=at.text||"http://";ap.toggleBtn(av,at.text)}ay.on("input",function(){ap.toggleBtn(av,aw.val()&&ay.val())}).val(at.url).trigger("focus");am.bindEnterKey(ay,av);am.bindEnterKey(aw,av);au.prop("checked",at.isNewWindow);av.one("click",function(az){az.preventDefault();ax.resolve({range:at.range,url:ay.val(),text:aw.val(),isNewWindow:au.is(":checked")});am.$dialog.modal("hide")})});ap.onDialogHidden(am.$dialog,function(){aw.off("input keypress");ay.off("input keypress");av.off("click");if(ax.state()==="pending"){ax.reject()}});ap.showDialog(am.$dialog)}).promise()};this.show=function(){var at=ao.invoke("editor.getLinkInfo");ao.invoke("editor.saveRange");this.showLinkDialog(at).then(function(au){ao.invoke("editor.restoreRange");ao.invoke("editor.createLink",au)}).fail(function(){ao.invoke("editor.restoreRange")})};ao.memo("help.linkDialog.show",an.langInfo.help["linkDialog.show"])};var Y=function(ao){var am=this;var ap=M.summernote.ui;var an=ao.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){am.update()},"summernote.dialog.shown":function(){am.hide()}};this.shouldInitialize=function(){return !z.isEmpty(an.popover.link)};this.initialize=function(){this.$popover=ap.popover({className:"note-link-popover",callback:function(ar){var at=ar.find(".popover-content");at.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var aq=this.$popover.find(".popover-content");ao.invoke("buttons.build",aq,an.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(!ao.invoke("editor.hasFocus")){this.hide();return}var aq=ao.invoke("editor.createRange");if(aq.isCollapsed()&&aq.isOnAnchor()){var at=d.ancestor(aq.sc,d.isAnchor);var ar=M(at).attr("href");this.$popover.find("a").attr("href",ar).html(ar);var au=d.posFromPlaceholder(at);this.$popover.css({display:"block",left:au.left,top:au.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var G=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.initialize=function(){var ax=an.dialogsInBody?M(document.body):aq;var av="";if(an.maximumImageFileSize){var au=Math.floor(Math.log(an.maximumImageFileSize)/Math.log(1024));var aw=(an.maximumImageFileSize/Math.pow(1024,au)).toFixed(2)*1+"  KMGTP"[au]+"B";av="<small>"+ar.image.maximumFileSize+" : "+aw+"</small>"}var at='<div class="form-group note-group-select-from-files"><label>'+ar.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+av+'</div><div class="form-group" style="overflow:auto;"><label>'+ar.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>';var ay='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+ar.image.insert+"</button>";this.$dialog=ap.dialog({title:ar.image.insert,fade:an.dialogsFade,body:at,footer:ay}).render().appendTo(ax)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(au,at){au.on("keypress",function(av){if(av.keyCode===x.code.ENTER){at.trigger("click")}})};this.show=function(){ao.invoke("editor.saveRange");this.showImageDialog().then(function(at){ap.hideDialog(am.$dialog);ao.invoke("editor.restoreRange");if(typeof at==="string"){ao.invoke("editor.insertImage",at)}else{ao.invoke("editor.insertImagesOrCallback",at)}}).fail(function(){ao.invoke("editor.restoreRange")})};this.showImageDialog=function(){return M.Deferred(function(av){var aw=am.$dialog.find(".note-image-input"),at=am.$dialog.find(".note-image-url"),au=am.$dialog.find(".note-image-btn");ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");aw.replaceWith(aw.clone().on("change",function(){av.resolve(this.files||this.value)}).val(""));au.click(function(ax){ax.preventDefault();av.resolve(at.val())});at.on("keyup paste",function(){var ax=at.val();ap.toggleBtn(au,ax)}).val("").trigger("focus");am.bindEnterKey(at,au)});ap.onDialogHidden(am.$dialog,function(){aw.off("change");at.off("keyup paste keypress");au.off("click");if(av.state()==="pending"){av.reject()}});ap.showDialog(am.$dialog)})}};var A=function(an){var ao=M.summernote.ui;var am=an.options;this.shouldInitialize=function(){return !z.isEmpty(am.popover.image)};this.initialize=function(){this.$popover=ao.popover({className:"note-image-popover"}).render().appendTo("body");var ap=this.$popover.find(".popover-content");an.invoke("buttons.build",ap,am.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(ap){if(d.isImg(ap)){var aq=d.posFromPlaceholder(ap);this.$popover.css({display:"block",left:aq.left,top:aq.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var H=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.initialize=function(){var au=an.dialogsInBody?M(document.body):aq;var at='<div class="form-group row-fluid"><label>'+ar.video.url+' <small class="text-muted">'+ar.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>';var av='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+ar.video.insert+"</button>";this.$dialog=ap.dialog({title:ar.video.insert,fade:an.dialogsFade,body:at,footer:av}).render().appendTo(au)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(au,at){au.on("keypress",function(av){if(av.keyCode===x.code.ENTER){at.trigger("click")}})};this.createVideoNode=function(az){var aH=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var av=az.match(aH);var au=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/;var aM=az.match(au);var aF=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var aw=az.match(aF);var aB=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var aG=az.match(aB);var ax=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var at=az.match(ax);var aL=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var aJ=az.match(aL);var aI=/^.+.(mp4|m4v)$/;var aE=az.match(aI);var aD=/^.+.(ogg|ogv)$/;var aN=az.match(aD);var aK=/^.+.(webm)$/;var aA=az.match(aK);var aC;if(av&&av[1].length===11){var ay=av[1];aC=M("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+ay).attr("width","640").attr("height","360")}else{if(aM&&aM[0].length){aC=M("<iframe>").attr("frameborder",0).attr("src",aM[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else{if(aw&&aw[0].length){aC=M("<iframe>").attr("frameborder",0).attr("src",aw[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else{if(aG&&aG[3].length){aC=M("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+aG[3]).attr("width","640").attr("height","360")}else{if(at&&at[2].length){aC=M("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+at[2]).attr("width","640").attr("height","360")}else{if(aJ&&aJ[1].length){aC=M("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+aJ[1])}else{if(aE||aN||aA){aC=M("<video controls>").attr("src",az).attr("width","640").attr("height","360")}else{return false}}}}}}}aC.addClass("note-video-clip");return aC[0]};this.show=function(){var at=ao.invoke("editor.getSelectedText");ao.invoke("editor.saveRange");this.showVideoDialog(at).then(function(av){ap.hideDialog(am.$dialog);ao.invoke("editor.restoreRange");var au=am.createVideoNode(av);if(au){ao.invoke("editor.insertNode",au)}}).fail(function(){ao.invoke("editor.restoreRange")})};this.showVideoDialog=function(at){return M.Deferred(function(au){var av=am.$dialog.find(".note-video-url"),aw=am.$dialog.find(".note-video-btn");ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");av.val(at).on("input",function(){ap.toggleBtn(aw,av.val())}).trigger("focus");aw.click(function(ax){ax.preventDefault();au.resolve(av.val())});am.bindEnterKey(av,aw)});ap.onDialogHidden(am.$dialog,function(){av.off("input");aw.off("click");if(au.state()==="pending"){au.reject()}});ap.showDialog(am.$dialog)})}};var f=function(ao){var am=this;var ap=M.summernote.ui;var aq=ao.layoutInfo.editor;var an=ao.options;var ar=an.langInfo;this.createShortCutList=function(){var at=an.keyMap[ai.isMac?"mac":"pc"];return Object.keys(at).map(function(av){var aw=at[av];var au=M('<div><div class="help-list-item"/></div>');au.append(M("<label><kbd>"+av+"</kdb></label>").css({width:180,"margin-right":10})).append(M("<span/>").html(ao.memo("help."+aw)||aw));return au.html()}).join("")};this.initialize=function(){var au=an.dialogsInBody?M(document.body):aq;var at=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.7.3</a> · ','<a href="//github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=ap.dialog({title:ar.options.help,fade:an.dialogsFade,body:this.createShortCutList(),footer:at,callback:function(av){av.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(au)};this.destroy=function(){ap.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return M.Deferred(function(at){ap.onDialogShown(am.$dialog,function(){ao.triggerEvent("dialog.shown");at.resolve()});ap.showDialog(am.$dialog)}).promise()};this.show=function(){ao.invoke("editor.saveRange");this.showHelpDialog().then(function(){ao.invoke("editor.restoreRange")})}};var T=function(ap){var am=this;var aq=M.summernote.ui;var an=ap.options;var ao=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){am.update()},"summernote.change summernote.dialog.shown":function(){am.hide()},"summernote.focusout":function(ar,at){if(ai.isFF){return}if(!at.relatedTarget||!d.ancestor(at.relatedTarget,y.eq(am.$popover[0]))){am.hide()}}};this.shouldInitialize=function(){return an.airMode&&!z.isEmpty(an.popover.air)};this.initialize=function(){this.$popover=aq.popover({className:"note-air-popover"}).render().appendTo("body");var ar=this.$popover.find(".popover-content");ap.invoke("buttons.build",ar,an.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var au=ap.invoke("editor.currentStyle");if(au.range&&!au.range.isCollapsed()){var at=z.last(au.range.getClientRects());if(at){var ar=y.rect2bnd(at);this.$popover.css({display:"block",left:Math.max(ar.left+ar.width/2,0)-ao,top:ar.top+ar.height})}}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var W=function(an){var am=this;var aq=M.summernote.ui;var ao=5;var at=an.options.hint||[];var ar=an.options.hintDirection||"bottom";var ap=M.isArray(at)?at:[at];this.events={"summernote.keyup":function(au,av){if(!av.isDefaultPrevented()){am.handleKeyup(av)}},"summernote.keydown":function(au,av){am.handleKeydown(av)},"summernote.dialog.shown":function(){am.hide()}};this.shouldInitialize=function(){return ap.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=aq.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){am.$content.find(".active").removeClass("active");M(this).addClass("active");am.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(au){this.$content.find(".active").removeClass("active");au.addClass("active");this.$content[0].scrollTop=au[0].offsetTop-(this.$content.innerHeight()/2)};this.moveDown=function(){var aw=this.$content.find(".note-hint-item.active");var au=aw.next();if(au.length){this.selectItem(au)}else{var av=aw.parent().next();if(!av.length){av=this.$content.find(".note-hint-group").first()}this.selectItem(av.find(".note-hint-item").first())}};this.moveUp=function(){var av=this.$content.find(".note-hint-item.active");var au=av.prev();if(au.length){this.selectItem(au)}else{var aw=av.parent().prev();if(!aw.length){aw=this.$content.find(".note-hint-group").last()}this.selectItem(aw.find(".note-hint-item").last())}};this.replace=function(){var au=this.$content.find(".note-hint-item.active");if(au.length){var av=this.nodeFromItem(au);this.lastWordRange.insertNode(av);n.createFromNode(av).collapse().select();this.lastWordRange=null;this.hide();an.invoke("editor.focus")}};this.nodeFromItem=function(au){var ax=ap[au.data("index")];var aw=au.data("item");var av=ax.content?ax.content(aw):aw;if(typeof av==="string"){av=d.createText(av)}return av};this.createItemTemplates=function(av,au){var aw=ap[av];return au.map(function(az,ax){var ay=M('<div class="note-hint-item"/>');ay.append(aw.template?aw.template(az):az+"");ay.data({index:av,item:az});if(av===0&&ax===0){ay.addClass("active")}return ay})};this.handleKeydown=function(au){if(!this.$popover.is(":visible")){return}if(au.keyCode===x.code.ENTER){au.preventDefault();this.replace()}else{if(au.keyCode===x.code.UP){au.preventDefault();this.moveUp()}else{if(au.keyCode===x.code.DOWN){au.preventDefault();this.moveDown()}}}};this.searchKeyword=function(av,au,ay){var ax=ap[av];if(ax&&ax.match.test(au)&&ax.search){var aw=ax.match.exec(au);ax.search(aw[1],ay)}else{ay()}};this.createGroup=function(au,av){var aw=M('<div class="note-hint-group note-hint-group-'+au+'"/>');this.searchKeyword(au,av,function(ax){ax=ax||[];if(ax.length){aw.html(am.createItemTemplates(au,ax));am.show()}});return aw};this.handleKeyup=function(aw){if(z.contains([x.code.ENTER,x.code.UP,x.code.DOWN],aw.keyCode)){if(aw.keyCode===x.code.ENTER){if(this.$popover.is(":visible")){return}}}else{var ax=an.invoke("editor.createRange").getWordRange();var av=ax.toString();if(ap.length&&av){this.$content.empty();var au=y.rect2bnd(z.last(ax.getClientRects()));if(au){this.$popover.hide();this.lastWordRange=ax;ap.forEach(function(az,ay){if(az.match.test(av)){am.createGroup(ay,av).appendTo(am.$content)}});if(ar==="top"){this.$popover.css({left:au.left,top:au.top-this.$popover.outerHeight()-ao})}else{this.$popover.css({left:au.left,top:au.top+au.height+ao})}}}else{this.hide()}}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};M.summernote=M.extend(M.summernote,{version:"0.7.3",ui:S,plugins:{},options:{modules:{editor:D,clipboard:t,dropzone:F,codeview:J,statusbar:I,fullscreen:s,handle:af,hintPopover:W,autoLink:ad,autoSync:ak,placeholder:L,buttons:B,toolbar:p,linkDialog:V,linkPopover:Y,imageDialog:G,imagePopover:A,videoDialog:H,helpDialog:f,airPopover:T},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"fa fa-align-left",alignCenter:"fa fa-align-center",alignJustify:"fa fa-align-justify",alignLeft:"fa fa-align-left",alignRight:"fa fa-align-right",indent:"fa fa-indent",outdent:"fa fa-outdent",arrowsAlt:"fa fa-arrows-alt",bold:"fa fa-bold",caret:"caret",circle:"fa fa-circle",close:"fa fa-close",code:"fa fa-code",eraser:"fa fa-eraser",font:"fa fa-font",frame:"fa fa-frame",italic:"fa fa-italic",link:"fa fa-link",unlink:"fa fa-chain-broken",magic:"fa fa-magic",menuCheck:"fa fa-check",minus:"fa fa-minus",orderedlist:"fa fa-list-ol",pencil:"fa fa-pencil",picture:"fa fa-picture-o",question:"fa fa-question",redo:"fa fa-repeat",square:"fa fa-square",strikethrough:"fa fa-strikethrough",subscript:"fa fa-subscript",superscript:"fa fa-superscript",table:"fa fa-table",textHeight:"fa fa-text-height",trash:"fa fa-trash",underline:"fa fa-underline",undo:"fa fa-undo",unorderedlist:"fa fa-list-ul",video:"fa fa-youtube-play"}}})}));